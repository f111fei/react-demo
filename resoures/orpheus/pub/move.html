<!DOCTYPE html> <html lang="zh"> <head> <title>网易音乐</title> <meta charset="utf-8"/> <link href="./core.css?243778e6c5bbaa5c570d0bbed0205ac2" type="text/css" rel="stylesheet"/>     <link rel="stylesheet" href="" id="skin-frame-node">     <link rel="stylesheet" href="" id="skin-dark-node">     <link rel="stylesheet" href="" id="skin-light-node"> </head> <body id="music-163-com" style="overflow:hidden"> <div class="m-install"> <div class="barbg"><div class="bar j-flag"></div></div> <div class="note j-flag"></div> </div> <script src="./core.js?d6f6bc0297f47c85393f12f01df02f16" type="text/javascript"></script><script type="text/javascript">(function(){var byz=NEJ.P,byA=byz("nej.e"),gu=byz("nej.cef"),bm=byz("nej.u"),cI=byz("nej.n"),bj=byz("nm.x"),bp=byz("nm.d"),bi=byz("nej.v"),bTU=null,bD=byz("nm.n");var page={IG:function(){this.HC();this.HV()},HV:function(){gu.uN({width:440,height:211,minWidth:440,minHeight:211,show:!0},"move");var GK=bm.nM(location.search.substr(1));this.zQ=GK.src;this.bpl=GK.dest;this.bbG=false;bTU.bTX("offline success","select * from web_offline_track where state == 4;");if(GK.src.charAt(0)==GK.dest.charAt(0)){this.bbG=true;cI.fo("moveprocess","storage",this.bdC.byB(this,"move"),1)}else{cI.fo("copyprocess","storage",this.bdC.byB(this,"copy"),1);cI.fo("deletefilesdone","storage",this.bjd.byB(this),1)}},HC:function(){var bg=byA.bV(document.body,"j-flag");this.bdk=bg[0];this.jJ=bg[1];bTU=bj.bUi.kE();bi.bM(bj.bUi,"sql",this.bUl.byB(this))},bUl:function(bn){if(!bn||!bn.id){this.lT("抱歉，迁移失败");this.KB();return}var bE=[],Wp=[];if(bn.id=="offline success"){if(bn.err==0){bm.cj(bn.ret,function(bl){if(!!bl&&!!bl.detail){var dY=this.zQ+"\\"+bl.relative_path;var vN=this.bpl+"\\"+bl.relative_path;bE.push(dY.replace(/\\/g,"\\"));Wp.push(vN.replace(/\\/g,"\\"))}},this);if(bE.length==0){this.bdD(this.bpl);byA.byW(this.bdk,"width",100+"%");this.lT("迁移成功");logger.warn("########### __exitWin");this.KB();return}logger.log(bE,"########### __arr__destArr==",Wp);if(this.bbG){cI.bX("storage.movefiles","move","abs","",bE,"abs","",Wp)}else{cI.bX("storage.copyfiles","copy","abs","",bE,"abs","",Wp)}}}},bhS:function(){gu.bJo();bj.oA("app.html");setTimeout(function(){logger.warn("########### closeWindow");gu.uD()},100)},KB:function(){setTimeout(this.bhS,800)},lT:function(ds){this.jJ.innerText=ds},bdD:function(xr){var boh=bp.gO.bG();var cq=boh.fF();cq.storage.path=xr+"\\";boh.nB(cq)},bjd:function(id,ret,files){logger.log(id,"########### __cbDelfiles id==",id);logger.log(ret,"########### __cbDelfiles ret==",ret);logger.log(files,"########### __cbDelfiles files==",files)},bdC:function(bq,bzg){var bh={code:bzg.code,state:bzg.state,err:bzg.errcode,remain:bzg.remain,process:bzg.process,src:bzg.src,dest:bzg.dst};if(bh.code==0){if(bq=="copy"){cI.cFB("storage.deletefile","delfile","abs","",bh.src)}this.bdD(this.bpl);var dY=bj.bVn(bh.src).split(this.zQ.toLowerCase()+"\\");var vN=bj.bVn(bh.dest).split(this.bpl.toLowerCase()+"\\");if(dY.length>1&&vN.length>1){dY=dY[1];vN=vN[1];if(dY!==vN){var iK={relative_path:vN};var bTR=bj.bXa("web_offline_track",iK,dY,"relative_path");bTU.bTX("update offline success",bTR)}}var Qu=Math.floor(bh.process*100)+"%";byA.byW(this.bdk,"width",Qu);this.jJ.innerText="正在迁移，已完成："+Qu}else{switch(bh.err){default:this.lT("抱歉，迁移出错了")}}logger.log(bh.code,"########### _data.state==",bh.state);if(bh.state==0){this.KB()}}};page.IG()})()</script> </body> </html>
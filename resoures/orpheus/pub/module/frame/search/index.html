<meta charset="utf-8"/> <textarea name="txt" id="m-fsch-module"> <h1 class="m-logo"> <a href="#/m/disc/rec/" data-da-event="b211"> <svg><use xlink:href="orpheus://orpheus/style/res/svg/topbar.sp.svg#logo"></use></svg> </a> </h1> <div class="m-topbox j-topbox"> <div class="m-hst" data-draggable="false"> <span title="后退" data-da-event="b213" class="btn btn-prv z-dis j-flag"><svg class="svg"><use xlink:href="orpheus://orpheus/style/res/svg/topbar.sp.svg#back"></use></svg></span> <span title="前进" data-da-event="b212" class="btn btn-nxt z-dis j-flag"><svg class="svg"><use xlink:href="orpheus://orpheus/style/res/svg/topbar.sp.svg#next"></use></svg></span> </div> <div class="m-sch" data-draggable="false"> <input type="text" class="j-flag j-search-input" data-res-menu="true" data-res-type="16" placeholder="搜索音乐，歌手，歌词，用户"> <span class="sch-btn j-flxg"> <svg><use xlink:href="orpheus://orpheus/style/res/svg/topbar.sp.svg#search"></use></svg> </span> <div class="u-arrlay m-schlist j-flag j-search-body f-dn"></div> </div> </div> <div class="m-tool "> <div class="itm switch j-inform"> </div> <div class="itm icn import f-hide j-import f-dn"> <div class="u-arrlay u-arrlay-1 u-arrlay-opacity s-fc1 j-tip"> <p class="j-import">正在导入，请稍候...</p> </div> </div> <div class="itm dld f-hide j-download f-dn"> <a class="dlding" href="#/m/offline/download/" id="id-top-offlining">正在下载<b></b><i class="loading"></i></a> </div> <div class="user j-flag" data-action="profile" data-anon-action="login" data-draggable="false"> <div class="j-pl-click"></div> <i class="u-tip u-tip-sml j-top-fow f-dn"></i> </div> <div class="itm skin j-flag" data-draggable="false"> <svg class="btn"><use xlink:href="orpheus://orpheus/style/res/svg/topbar.sp.svg#skin"></use></svg> </div> <div class="itm msg j-flag" data-draggable="false"> <svg class="btn"><use xlink:href="orpheus://orpheus/style/res/svg/topbar.sp.svg#msg"></use></svg> <span class="u-tip" style="display:none;">0</span> </div> <a href="#/m3/setting/" data-da-event="b215" class="itm set" title="设置" data-draggable="false"><svg class="btn"><use xlink:href="orpheus://orpheus/style/res/svg/topbar.sp.svg#set"></use></svg></a> </div> </textarea> <textarea name="jst" id="m-fsch-face"> <a class="face u-face j-flag" href="#/m/personal/?uid=${!!user?user.userId:0}" data-anon-action="login"><div class="wrap"><img src="${src|escape}" onerror="nm.l.f.empty(this)"/></div></a> <div class="name"><p class="f-thide">{if isAnonimous}未登录{else}${user.nickname}{/if}</p> <span class="arr"> <svg class="svg"><use xlink:href="orpheus://orpheus/style/res/svg/topbar.sp.svg#head_arr"></use></svg> </span></div> </textarea> <textarea name="jst" id="m-fsch-item"> <mark class="s-fc2">${src}</mark> </textarea> <textarea name="jst" id="m-fsch-list"> <p style="height:0px;" class="note s-fc3 j-item" data-value="0-0"></p> <p class="note j-item" data-value="0-1002"> <a href="javascript:;" class="txt s-fc3 f-ff1">搜“<span class="f-thide s-fc2">${name|escape}</span>”相关用户 &gt;</a> </p> <div class="wrap s-scroll"> {list data.order as k} {var x = data[k]} {if x}{if k == 'songs'} <h3 class="hd hd-1 s-fc1 j-item" data-value="0-1">${commonJST('com-svg', 'icon.sp.svg#search_song', 'icn')}单曲</h3> <ul> {list x as s} <li class="j-item" data-value="1-1-${s.id}-${s.album.id}"> {var alias = getAlias(s)} <a href="javascript:;" class="f-thide">${s.nameshow}&nbsp;{if alias}&nbsp;<span class="s-fc4">(${alias|escape})</span>{/if}-{list s.artists as a}&nbsp;<span>${a.nameshow}</span>{/list}</a> </li> {/list} </ul> {elseif k == 'artists'} <h3 class="hd hd-2 s-fc1 j-item" data-value="0-100">${commonJST('com-svg', 'icon.sp.svg#search_artist', 'icn')}歌手</h3> <ul> {list x as s} <li class="j-item" data-value="1-100-${s.id}"> <a href="javascript:;" class="f-thide">${s.nameshow}</a> </li> {/list} </ul> {elseif k == 'albums'} <h3 class="hd hd-3 s-fc1 j-item" data-value="0-10">${commonJST('com-svg', 'icon.sp.svg#search_alb', 'icn')}专辑</h3> <ul> {list x as s} <li class="j-item" data-value="1-10-${s.id}"> <a href="javascript:;" class="f-thide">${s.nameshow}&nbsp;-&nbsp;${s.artist.nameshow}</a> </li> {/list} </ul> {elseif k == 'mvs'} <h3 class="hd hd-5 s-fc1 j-item" data-value="0-1004">${commonJST('com-svg', 'icon.sp.svg#search_mv', 'icn')}MV</h3> <ul> {list x as s} <li class="j-item" data-value="1-1004-${s.id}"> <a href="javascript:;" class="f-thide">${s.nameshow}&nbsp;-&nbsp;${s.artnameshow}</a> </li> {/list} </ul> {elseif k == 'playlists' && x.length} <h3 class="hd hd-4 s-fc1 j-item" data-value="0-1000">${commonJST('com-svg', 'icon.sp.svg#search_list', 'icn')}歌单</h3> <ul> {list x as s} <li class="j-item" data-value="1-1000-${s.id}"> <a href="javascript:;" class="f-thide">${s.nameshow}</a> </li> {/list} </ul> {/if}{/if} {/list} </div> </textarea> <textarea name="jst" id="m-fsch-hot"> <p class="note hot f-ff1 j-item" data-value="-1"><span class="s-fc4">热门搜索</span></p> <div class="wrap s-scroll"> <ul class="hotlst"> {list result as s} <li class="j-item" data-value="0-${s.second}-${s_index}" data-key="${s.first|escape}"><a href="javascript:;">${s.first|escape}</a></li> {/list} </ul> </div> </textarea> <textarea name="ntp" id="m-fsh-progress"> <span class="switching f-pr j-flag"><i class="full u-icn u-icn-full f-pa"></i></span> <div class="u-arrlay m-switch j-flag"> </div> </textarea> <textarea name="jst" id="m-fsh-progress-list"> <ul class="s-fc1"> {if imp.status!='none'} <li> {if imp.status=='ing'} <svg class="icon"><use xlink:href="orpheus://orpheus/style/res/svg/icon.sp.svg#transput_leadin"></use></svg> {elseif imp.status=='pause'} <svg class="icon"><use xlink:href="orpheus://orpheus/style/res/svg/icon.sp.svg#transput_pause"></svg></svg> {elseif imp.status=='error'} <svg class="icon icon-err"><use xlink:href="orpheus://orpheus/style/res/svg/icon.sp.svg#info"></svg></svg> {else} <svg class="icon"><use xlink:href="orpheus://orpheus/style/res/svg/icon.sp.svg#transput_done"></svg></svg> {/if} <label {if imp.status!='ing'}class="full"{/if}>${imp.msg}</label> {if imp.status=='ing'} <div class="progress"> <div class="u-probar"> <div class="pro" style="width:${imp.progress}"></div> </div> </div> <div class="data s-fc3 f-ff1">${imp.progress}</div> {/if} {if imp.status=='error' || imp.status=='finish'} <span class="cls u-icn u-icn-laycls f-vc f-cp" data-action="dnone" title="关闭"><svg><use xlink:href="orpheus://orpheus/style/res/svg/icon.sp.svg#close"></svg></span> {/if} </li> {/if} {if download.status!='none'} <li> {if download.status=='ing'} <svg class="icon icon-loading"><use xlink:href="orpheus://orpheus/style/res/svg/icon.sp.svg#transput_update"></svg></svg> {elseif download.status=='pause'} <svg class="icon"><use xlink:href="orpheus://orpheus/style/res/svg/icon.sp.svg#transput_pause"></svg></svg> {elseif download.status=='error'} <svg class="icon icon-err"><use xlink:href="orpheus://orpheus/style/res/svg/icon.sp.svg#info"></svg></svg> {else} <svg class="icon"><use xlink:href="orpheus://orpheus/style/res/svg/icon.sp.svg#transput_done"></svg></svg> {/if} <label {if download.status!='ing'}class="full"{/if}> {if download.status=='ing'}正在下载{elseif download.status=='pause'}下载暂停，{elseif download.status=='error'}磁盘已满{else}下载完成，{/if} {if download.status=='finish'}<a href="#/m/offline/complete/" data-action="dnone" class="s-fc2 f-tdu">点击查看</a>{/if} {if download.status=='pause'}<a href="#/m/offline/download/" data-action="dnone" class="s-fc2 f-tdu">点击查看</a>{/if} </label> {if download.status=='ing'} <div class="progress"> <div class="u-probar"> <div class="pro" style="width:${download.progress}"></div> </div> </div> <div class="data f-ff1">${download.suc}/${download.total}</div> {/if} {if download.status=='finish'} <span class="cls u-icn u-icn-laycls f-vc f-cp" data-action="dnone" title="关闭"><svg><use xlink:href="orpheus://orpheus/style/res/svg/icon.sp.svg#close"></svg></span> {/if} </li> {/if} {if upload.status!='none'} <li> {if upload.status=='ing'} <svg class="icon"><use xlink:href="orpheus://orpheus/style/res/svg/icon.sp.svg#transput_update"></svg></svg> {elseif upload.status=='pause'} <svg class="icon"><use xlink:href="orpheus://orpheus/style/res/svg/icon.sp.svg#transput_pause"></svg></svg> {elseif upload.status=='error'} <svg class="icon icon-err"><use xlink:href="orpheus://orpheus/style/res/svg/icon.sp.svg#info"></svg></svg> {else} <svg class="icon"><use xlink:href="orpheus://orpheus/style/res/svg/icon.sp.svg#transput_done"></svg></svg> {/if} <label {if upload.status!="ing"}class="full"{/if}> {if upload.status=='ing'}正在上传{elseif upload.status=='pause'}上传暂停，{elseif upload.status=='error'}云空间已满，{else}上传完成，{/if} {if upload.status=='finish'||upload.status=='pause' || upload.status=='error'}<a href="#/m/cloud/" data-action="unone" class="s-fc2 f-tdu">点击查看</a>{/if} </label> {if upload.status=='ing'} <div class="progress"> <div class="u-probar"> <div class="pro" style="width:${upload.progress}"></div> </div> </div> <div class="data s-fc3 f-ff1">${upload.suc}/${upload.total}</div> {/if} {if upload.status=='finish'} <span class="cls u-icn u-icn-laycls f-vc f-cp" data-action="dnone" title="关闭"><svg><use xlink:href="orpheus://orpheus/style/res/svg/icon.sp.svg#close"></svg></span> {/if} </li> {/if} </ul> </textarea> <textarea name="js">(function(){var byz=NEJ.P,cJO=NEJ.O,byA=byz("nej.e"),bi=byz("nej.v"),bm=byz("nej.u"),cN=byz("nej.j"),bD=byz("nej.n"),bp=byz("nm.d"),bj=byz("nm.x"),bR=byz("nm.l"),byx,byD;bR.Wz=NEJ.C();byx=bR.Wz.bS(bR.EZ);byx.byL=function(){this.byO();this.Pm=[[this.bA,"click",this.ei.byB(this)],[bp.mx,"message",this.hA.byB(this)],[bp.kj,"listchange",this.ku.byB(this)],[bp.du,"dailytask",this.QT.byB(this)]]};byx.cJ=function(blZ){byA.eB(this.bA,"m-xwgt-profile-loading",{commonJST:ctl.commonJST.cFB});blZ.clazz="u-arrlay m-userlist "+(blZ.clazz||"");this.cK(blZ);this.byK=ctl.host.cGS();this.biP=blZ.isShowFans;this.vM=blZ.isShowFris;this.WB=false;dc.user.cSr(ctl.host.cGS(),this.nf.byB(this));this.dO(this.Pm)};byx.dH=function(){this.dI();this.bA.innerHTML=""};byx.ei=function(byy){var bk=bi.cR(byy,"d:action");if(!bk)return;switch(byA.bT(bk,"action")){case"forward":location.hash=byA.bT(bk,"href");break;case"redirect":var hC=byA.bT(bk,"href");if(hC=="/store/product"){dc.setting.cAL("showNewStore");nm.log.bTO("f115")}bj.caU(hC,!0);break;case"forward2fan":if(this.biP&&!this.WB){this.WB=!0}location.hash=byA.bT(bk,"href");break;case"sign":dc.user.QY(1);return;case"logout":bj.ci({state:"loading"});ctl.host.xO();break}bi.bF(document,"click")};byx.nf=function(){var bBh=function(bg,bq){for(var i=0;i<bg.length;++i){if(bg[i].type==bq&&bg[i].tokenJsonStr){if(bq==8)bg[i].url="http://yixin.im/";return bg[i].url||"http://music.163.com"}}return!1};return function(blZ){blZ=blZ||cJO;var byH=dc.user.cl(this.byK),bg=dc.user.byI("user_bindings-"+this.byK),gG={weibo:bBh(bg,2),yixin:bBh(bg,8)};if(byH&&bg){this.fG=byH;byA.eB(this.bA,"m-xwgt-profile",{user:byH,bind:gG,pcExtData:byH.pcExtData||{},hasNewFans:this.biP,hasNewFriend:this.vM,hasClickFans:this.WB,showNewStore:dc.setting.cAL("showNewStore",!0),showSignAnima:!!blZ.showSignAnima,signPoint:blZ.signPoint||0,vipInfoTime:bj.cSY((byH.vipInfo||cJO).expireTime),entryVip:ctl.order.cVA("entryVip"),entryNotVip:ctl.order.cVA("entryNotVip"),commonJST:ctl.commonJST.cFB})}else{byA.eB(this.bA,"m-xwgt-profile-error",{commonJST:ctl.commonJST.cFB})}}}();byx.hA=function(bn){if(bn&&bn.code==200&&bn.follow&&bn.id!=this.QU&&this.fG){this.QU=bn.id;if(!this.biP||this.WB){this.biP=!0;this.WB=!1;this.nf()}}};byx.ku=function(blZ){if(blZ.key=="event-"+this.byK&&this.fG){this.nf()}};byx.QT=function(byy){if(byy&&byy.taskType==1&&this.fG){this.nf({showSignAnima:byy.point>0,signPoint:byy.point})}}})();
(function(){var byz=NEJ.P,cJO=NEJ.O,co=NEJ.F,byA=byz("nej.e"),bi=byz("nej.v"),bm=byz("nej.u"),bD=byz("nej.cef"),bU=byz("nej.ut"),bTG=byz("nm.c"),bj=byz("nm.x"),bR=byz("nm.l"),byx;if(!!bTG.cXY)return;bTG.cXY=NEJ.C();byx=bTG.cXY.bS(bTG.cWt);byx.byR=function(){this.cWh={type:7,conf:{content:[bD.dw({menu_id:70003,text:"复制"}),bD.dw({menu_id:70001,text:"加入黑名单",image_path:bj.byN("icn_blackbill")}),bD.dw({menu_id:70002,text:"举报",image_path:bj.byN("icn_report")}),bD.dw({menu_id:7e4,text:"删除",image_path:bj.byN("icn_delete")})],hotkey:{7e4:"Delete"},resource:function(bo){return this.Tw.cl(bo)},check:function(jC,cB){var bJv=window.getSelection().toString();bD.dV(70003).menu=!!bJv&&bJv.length>0;if(cB&&cB.type==7){bD.dV(7e4).menu=!0;var Dl=cB.fid==-10&&this.fG.bQL().indexOf(jC.fromUser.userId)<0;bD.dV(70001).menu=Dl;bD.dV(70002).menu=Dl;if(cB.fid==-12){bD.dV(70002).menu=!0}}},handler:function(bo,jC,cB,fC){switch(bo){case 70003:var bIO=byA.cg(cB.target),jP=bIO.value,bJv=window.getSelection().toString();nm.log.dE("rightbutton",null,null,{type:"copy",object:"text",source:nm.log.SOURCE[cB.fid]||"other"});bD.bX("winhelper.setClipBoardData",bJv);break;case 70001:dc.user.iL({key:"user_black",ext:jC.fromUser,userId:jC.fromUser.userId});break;case 70002:if(cB.fid==-12){var bE=(jC.combindId||"").split(":");if(bE&&bE[1]&&bE[2]){dc.comment.cCo(bE[2],bE[1])}}else{dc.message.cCo(jC.fromUser.userId)}break;case 7e4:ctl.layer.cYn(bR.rx.bG({stopped:!0,checkable:!1,message:"确定删除该消息？",data:JSON.stringify({type:7}),onok:this.pZ.byB(this,jC,cB)}).dD());break}}.byB(this)}};this.bEc();this.dbi={"-9":{key:"message_at-{uid}",data:function(bh){return{id:bh.id}}},"-10":{key:"message_private-{uid}",data:function(bh){return{userId:bh.fromUser.userId}}},"-11":{key:"message_chat-{data}",data:function(bh){return{id:bh.id}}},"-12":{key:"message_comment-{uid}",data:function(bh){return{combindId:bh.combindId}}},"-13":{key:"message_notify-{uid}",data:function(bh){return{id:bh.id}}}}};byx.pZ=function(jC,cB){var byF=this.dbi[cB.fid];if(!byF)return;if(jC.customItem){bj.gM("/?/message/chat/",{cmd:"deletecustomitem",ext:jC.id})}else{bj.gM("/?/message",{cmd:"markread","new":Math.max(0,(jC||cJO).newMsgCount||0)});dc.message.ln({id:jC.id,key:bj.iM(byF.key,{data:cB.data,uid:localCache.cF("host.profile.userId")}),data:byF.data(jC),ext:jC})}};byz("ctl").privateUserContextMenu=bTG.cXY.kE()})();
(function(){var byz=NEJ.P,byA=byz("nej.e"),bi=byz("nej.v"),cmw=byz("nej.ui"),bj=byz("nm.x"),byx,byD;bj.WH=NEJ.C();byx=bj.WH.bS(cmw.hl);byx.eo=function(){this.Yl="m-xwgt-msgs";this.ckv=!1};byx.byL=function(){this.byO();var mF=byA.gj(this.bA);bi.bM(mF[0],"click",this.jn.byB(this));bi.bM(this.bA,"click",this.Ko.byB(this))};byx.cJ=function(blZ){this.cK(blZ);var byC="/?/message/"+blZ.target+"/"+(blZ.target=="chat"?"?userId="+blZ.data.userId+"&nickname="+blZ.data.nickname+"&ext=1":"");dispatcher.dr(byC,{input:{parent:this.bA,message:blZ.message}});this.cXm(!0)};byx.jn=function(){this.bF("onclose")};byx.Ko=function(byy){bi.bQd(byy);bi.bF(document,"click",{ext:byy})};byx.dH=function(){this.cXm(!1);this.dI()};byx.cXm=function(HB){if(this.ckv==HB)return;this.ckv=HB;if(this.ckv){byA.bJ(this.bA,"f-dn");nm.log.cFs("page",{type:"message"})}else{byA.bK(this.bA,"f-dn")}};byx.cUf=function(){return!!this.ckv}})();
(function(){var byz=NEJ.P,cJO=NEJ.O,byA=byz("nej.e"),bi=byz("nej.v"),bm=byz("nej.u"),bD=byz("nej.n"),kB=byz("nej.ui"),bp=byz("nm.d"),bTG=byz("nm.c"),bj=byz("nm.x"),bR=byz("nm.l"),byx,byD;bR.cBN=NEJ.C();byx=bR.cBN.bS(kB.hl);byx.eo=function(){this.Yl="m-fsh-progress"};var cvT={duomi:"多米",douban:"豆瓣",kuwo:"酷我",kugou:"酷狗"};var dU={"-2":"导入被中断","-1":"导入失败",0:"",1:"",2:"正在导入，当前进度：",3:"导入完成",405:"导入过于频繁，请10分钟后再试",507:"歌单超上限",510:"服务不可用",512:"用户被禁止导入歌单",514:"不允许重复导入歌单"};byx.byL=function(){this.byO();var bg=byA.bV(this.bA,"j-flag");this.cBO=bg[0];this.kk=bg[1];bi.bM(this.bA,"click",this.ei.byB(this))};byx.cJ=function(blZ){this.cK(blZ);this.dO([[bp.cG,"offlineprogress",this.bjI.byB(this)],[bp.cG,"uploadprogress",this.cBR.byB(this)],[bp.cG,"uploadoverflowchange",this.cBS.byB(this)],[bTG.cVZ,"uploadoverflowchange",this.cBS.byB(this)],[bp.dZ,"importprogress",this.By.byB(this)],[bTG.beh,"switch",this.bKu.byB(this)],[location,"urlchange",this.LP.byB(this)]]);bi.bM(this.cBO,"mouseout",this.coc.byB(this));this.IV={download:{status:"none"},upload:{status:"none"},imp:{status:"none"},clip:this.bCb};byA.bK(this.bA.parentNode,"f-dn")};byx.dH=function(){this.dI()};byx.ei=function(byy){var bk=bi.cR(byy,"d:action");if(!bk)return;switch(byA.bT(bk,"action")){case"inone":this.IV.imp.status="none";break;case"dnone":if(this.IV.download.status=="finish")this.IV.download.status="none";break;case"unone":if(this.IV.upload.status=="finish")this.IV.upload.status="none";break}this.cBD(true)};byx.coc=function(byy){clearTimeout(this.coA);this.kk.style.display="block";this.coA=setTimeout(function(){this.kk.style.display=""}.byB(this),1e3)};byx.bjI=function(byy){var di=bj.cL(4,function(cJN){return cJN.bgU()});if(byy.sta==0&&!di.download||byy.del==3){this.IV.download.status="none";return}if(byy.sta==1){this.IV.download.status="ing";this.IV.download.suc=byy.suc;this.IV.download.total=byy.suc+di.download;this.IV.download.progress=byy.suc/(byy.suc+di.download)*100+"%"}else if(byy.sta==2||byy.sta==0){if(this.IV.download.status=="ing"||this.IV.download.status=="error")this.cBF=true;if(!di.download){this.IV.download.status="finish"}else{this.IV.download.status="pause"}}this.cBD()};byx.cBR=function(byy){var jF=byy.len;if(byy.sta==1){this.IV.upload.status="ing";this.IV.upload.suc=byy.suc;this.IV.upload.total=byy.suc+jF;this.IV.upload.progress=byy.suc/(byy.suc+jF)*100+"%"}else if(byy.sta==2||byy.sta==0){if(byy.recap&&!jF){return}var cAl=bj.cL(4,function(cJN){return cJN.cya()});if(cAl.useSize>=cAl.maxSize&&cAl.maxSize!=0){if("error"==this.IV.upload.status)return;this.IV.upload.status="error";this.cBF=true;this.cBD();return}if(this.IV.upload.status=="ing"||this.IV.upload.status=="error"||this.IV.upload.status=="none")this.cBF=true;if(!jF){this.IV.upload.status="finish";if(byy.del==1)this.IV.upload.status="none"}else{this.IV.upload.status="pause"}}this.cBD()};byx.By=function(byy){if(byy.status==-2||byy.status==3||byy.status==-1&&byy.code==507){bj.cL(1,function(cJN){cJN.wp(localCache.cF("host.profile.userId"),!0)})}if(byy.status==2){this.IV.imp.status="ing";this.IV.imp.progress=byy.progress+"%";this.IV.imp.msg="导入"+cvT[byy.from]+"音乐"}if(byy.status==3){this.cBF=true;this.IV.imp.status="finish";this.IV.imp.msg="导入成功"}else if(byy.status<0){this.cBF=true;this.IV.imp.msg=dU[byy.code+""]||dU[byy.status+""]||"导入失败";this.IV.imp.status="error"}this.cBD()};byx.cBD=function(AK){if(this.IV.download.status=="none"&&this.IV.upload.status=="none"&&this.IV.imp.status=="none"){byA.bK(this.bA.parentNode,"f-dn");return}else byA.bJ(this.bA.parentNode,"f-dn");if(this.IV.download.status=="ing"||this.IV.upload.status=="ing"||this.IV.imp.status=="ing")byA.bJ(this.cBO,"z-stop");else byA.bK(this.cBO,"z-stop");if(this.cBF){this.cBF=false;this.kk.style.display="block";clearTimeout(this.cgT);this.cgT=setTimeout(function(){this.kk.style.display=""}.byB(this),3e3)}if(!!AK){clearTimeout(this.cBT);this.kk.style.display="none";this.cBT=setTimeout(function(){this.kk.style.display=""}.byB(this),1e3)}byA.eB(this.kk,"m-fsh-progress-list",NEJ.X({},this.IV))};byx.LP=function(byy){if(byy.path!="/m/cloud/"&&byy.path!="/m/offline/complete/"&&byy.path!="/m/offline/download/")return;if(byy.path=="/m/cloud/"){if(this.IV.upload.status=="finish")this.IV.upload.status="none";this.cBD(true)}if(byy.path=="/m/offline/complete/"||byy.path=="/m/offline/download/"){if(this.IV.download.status=="finish")this.IV.download.status="none";this.cBD(true)}};byx.bKu=function(byy){this.IV.upload.status="none";this.IV.imp.status="none";this.cBD()};byx.cBS=function(byy){if(!!byy.userChange)return;if(byy.overflow){}else{this.IV.upload.status="none";var byy=bj.cL(4,function(cJN){return cJN.ctp()});byy.recap=true;this.cBR(byy)}this.cBD()};byx.bCb=function(ik){if(ik<=9999)return ik;else if(ik%1e4/1e3>=1)return Math.floor(ik/1e4)+"."+Math.floor(ik%1e4/1e3)+"万";else return Math.floor(ik/1e4)+"万"}})();
(function(){var byz=NEJ.P,cJO=NEJ.O,byA=byz("nej.e"),bi=byz("nej.v"),bm=byz("nej.u"),cN=byz("nej.j"),bU=byz("nej.ut"),cmw=byz("nej.ui"),bj=byz("nm.x"),bxI=byz("nm.i"),bp=byz("nm.d"),bR=byz("nm.l"),bTG=byz("nm.c"),byx,byD;bR.bFh=NEJ.C();byx=bR.bFh.bS(bR.ir,!0);byD=bR.bFh.gZ;byx.cJ=function(blZ){if(blZ.from=="taste"){localCache.bSX("host",cN.vh("NM_HOST"))}blZ.clazz=blZ.clazz||"m-layer-sns";this.cK(blZ);this.dn=blZ.userId||localCache.cF("host.profile.userId");this.fP="user_bindings-"+this.dn;this.pw=[];this.bGa=blZ.picUrl||"";this.cbQ=blZ.targetUrl||"http://music.163.com/download";this.gH=blZ.from;if(this.gH=="taste"){this.bMY=blZ.picUrl;this.bGb=blZ.skin}else{var bQv=blZ.skin||"default";var dN="刚给网易云音乐 PC版换了一套“"+blZ.sname+"”的皮肤，整个世界都亮了~ 大家也来试试呗~";if(blZ.skin=="default"){dN="刚把网易云音乐 PC版换回了默认“酷炫黑”，还是它高端大气~ 大家也来试试呗~"}this.bMY="orpheus://orpheus/style/res/common/skin/shr_"+bQv+".jpg";this.bGb=dN}this.byJ={onlistload:this.Oo.byB(this,false),onerror:this.gF.byB(this)};this.bAT={onshare:this.bGc.byB(this),onerror:this.gF.byB(this)};if(!!this.dv)this.dv.bQ();this.dv=bp.gO.bG();if(!!this.pN)this.pN.bQ();this.pN=bp.du.bG(this.byJ);this.pN.tw(this.fP,!1);this.pN.fE({key:this.fP,offset:0,limit:10,data:{offset:0,limit:10,userId:this.dn}});if(!!this.bFj)this.bFj.bQ();this.bFj=bp.mo.bG(this.bAT)};byx.eo=function(){this.Yl="m-mskin-app"};byx.dH=function(){this.dI();byA.bJ(this.bA,"z-showbox");this.Ks=undefined;this.bGC=undefined;this.pw=[];this.bGg({btnText:"发 送",btnClazz:"z-dis"})};byx.byL=function(){this.byO();this.rW=140;var bg=byA.bV(this.bA,"j-flag");this.bGz=bg[0];this.bGy=bg[1];this.bET=bg[2];this.qF=bg[3];this.bGd=bg[4];this.oN=bg[5];bi.bM(bg[0],"click",this.qn.byB(this));bi.bM(bg[5],"click",this.bFv.byB(this));bi.bM(bTG.bFY,"bind",this.cBx.byB(this));bi.bM(bTG.bFY,"binderror",this.gF.byB(this));bi.bM(window,"storage",this.bqq.byB(this));bj.bIr(this.bET,this.qF,this.rW)};byx.qn=function(byy){bi.bQd(byy);if(bj.btm()){bj.bCv();this.dy();return}var bk=bi.cR(byy,"d:type");if(!bk)return;this.Ks=bk;var bq=byA.bT(bk,"type")-0;this.uP=bq;var bIa={2:0,3:3,4:2,6:1};var bzU=bIa[bq];if(!this.pw[bzU]||this.mK[bzU].bind&&!this.mK[bzU].update){bj.oA("sns.html",{from:"bind",snsType:bq,callbackType:"Binding",visible:!1});this.dy()}else{this.bGE()}};byx.bGE=function(){this.bGd.src=this.bMY;this.bET.value=this.bGb;byA.bK(this.bA,"z-showbox");this.bET.focus();this.bET.blur()};byx.bGe=function(bq){var dU=this.bET.value;if(!!dU){var dp=/@([\u4e00-\u9fa5A-Za-z0-9-_]{2,})([ :])/g,bE=null,bzh=null;dp.lastIndex=0;while(bE=dp.exec(dU)){bzh=bE[1];dp.lastIndex=bE.index+bE[0].length}}var hj=this.gH=="taste"?this.cbQ:"（戳这里下载@网易云音乐 客户端 http://music.163.com/#/m/download）";return this.brn(dU,hj)};byx.brn=function(dU,hj){dU=dU||"";hj=hj||"";if(dU.length+hj.length<140)dU=dU+" "+hj;else if(hj.length>136)dU=" "+hj;else dU=dU.substr(0,137-hj.length)+"..."+hj;return dU};byx.bFv=function(){if(navigator.offline){bj.ci({txt:"网络不给力哦，请检查你的网络设置~"});return}this.bGf({btnText:"正在发送中",btnClazz:"z-dis"});var bh={sns:[this.uP],description:"http://music.163.com/download",targetUrl:this.cbQ};var bBn=this.bGe(this.uP);bh[this.uP]={picUrl:this.bGa,content:bBn};this.bFj.Qf(bh)};byx.xt=function(){this.bFv()};byx.bGf=function(blZ){if(!!blZ.btnText)this.oN.innerText=blZ.btnText;if(!!blZ.btnClazz)byA.bK(this.oN,blZ.btnClazz);bi.kS(this.oN,"click")};byx.bGg=function(blZ){if(!!blZ.btnText)this.oN.innerText=blZ.btnText;if(!!blZ.btnClazz)byA.bJ(this.oN,blZ.btnClazz);bi.bM(this.oN,"click",this.bFv.byB(this))};byx.Oo=function(bGF,blZ){if(blZ.key!=this.fP)return;this.bGD=this.pN.byI(this.fP);var eY=this.dv.hw(!0);this.mK=eY.bindAccount;for(var i=0,l=this.bGD.length;i<l;i++){if(!!this.bGD[i]){if(this.bGD[i].type==2){this.pw[0]=this.bGD[i];this.mK[0].bind=true}else if(this.bGD[i].type==3){this.pw[3]=this.bGD[i];this.mK[3].bind=true}else if(this.bGD[i].type==4){this.pw[2]=this.bGD[i];this.mK[2].bind=true}else if(this.bGD[i].type==6){this.pw[1]=this.bGD[i];this.mK[1].bind=true}}}if(!this.bGC&&bGF){this.bGC=true;if(this.Ks){var bq=byA.bT(this.Ks,"type")-0;if(bq==this.uP){this.dD();this.Ks.click()}}}};byx.cBx=function(bn){switch(bn.code){case 200:var hu={onlistload:this.Oo.byB(this,true),onerror:this.gF.byB(this)};if(!!this.pN)this.pN.bQ();this.pN=bp.du.bG(hu);this.pN.eN(this.fP);this.pN.fE({key:this.fP,offset:0,limit:5,data:{offset:0,limit:5,userId:this.dn}});break;case 2e3:var caE=function(){this.bGD=this.pN.byI(this.fP);for(var i=0,l=this.bGD.length;i<l;i++){if(!!this.bGD[i]){if(this.bGD[i].type==2){this.pw[0]=this.bGD[i];this.mK[0].bind=true}else if(this.bGD[i].type==3){this.pw[3]=this.bGD[i];this.mK[3].bind=true}else if(this.bGD[i].type==4){this.pw[2]=this.bGD[i];this.mK[2].bind=true}else if(this.bGD[i].type==6){this.pw[1]=this.bGD[i];this.mK[1].bind=true}}}};var hu={onlistload:caE.byB(this),onerror:this.gF.byB(this)};if(!!this.pN)this.pN.bQ();this.pN=bp.du.bG(hu);this.pN.eN(this.fP);this.pN.fE({key:this.fP,offset:0,limit:5,data:{offset:0,limit:5,userId:this.dn}});break}};byx.bGc=function(bn){var bzg=bn[this.uP];this.bGg({btnText:"发 送",btnClazz:"z-dis"});if(bzg!==undefined){if(bzg==1){this.dy();bj.ci({txt:"分享成功",state:"success"})}else{bj.ci({txt:"分享失败"})}}};byx.bqq=function(byy){if(byy.key=="NM_SETTING_USER"){var cbq=JSON.parse(byy.newValue);if(cbq){this.mK=cbq.bindAccount;this.pw=[];this.cBx({code:2e3})}}if(byy.key=="NM_HOST"){var cbq=JSON.parse(byy.newValue);if(cbq&&cbq.profile){this.fP="user_bindings-"+this.dn;this.dn=cbq.profile.userId}}};byx.gF=function(byy){if(bj.hi(byy)){bj.ci({txt:"网络不给力哦，请检查你的网络设置~"});byy.stopped=true}}})();
(function(){var byz=NEJ.P,cJO=NEJ.O,byA=byz("nej.e"),bi=byz("nej.v"),bm=byz("nej.u"),bD=byz("nej.n"),bU=byz("nej.ut"),bp=byz("nm.d"),bj=byz("nm.x"),bR=byz("nm.l"),bTG=byz("nm.c"),byx,byD;bR.bCO=NEJ.C();byx=bR.bCO.bS(bR.EZ);byx.eo=function(){this.Yl="m-xwgt-skin-layout"};byx.byL=function(){this.byO();var bg=byA.bV(this.bA,"j-flag");this.bTP=bg.shift();this.hZ=bg.shift();this.cYT=bg.shift();this.cWq=bg.shift();this.Mj=bg.shift();this.cYS=bg.shift();this.cYM=bg.shift();this.zo=bU.cBY.bG({list:byA.gj(this.bTP),index:0,selected:"z-sel",onchange:this.Av.byB(this)});this.Yf={"default":"hsl(218, 9%, 18%)",red:"hsl(0, 62%, 48%)",pink:"hsl(339, 93%, 73%)",blue:"hsl(206, 93%, 62%)",green:"hsl(151, 52%, 48%)",golden:"hsl(34, 63%, 59%)"};this.pA=false;this.bvZ=null;bi.bM(this.cYS,"change",this.dae.byB(this));bi.bM(this.cYM,"change",this.dad.byB(this));bi.bM(this.bA,"click",this.ei.byB(this));bi.bM(bTG.cLr,"switch",this.cRe.byB(this));bD.fo("queryskinpackets","app",this.bEx.byB(this));bi.bM(this.cYS,"input",this.boo.byB(this));bi.bM(this.cYM,"input",this.bqo.byB(this))};byx.cJ=function(blZ){blZ.clazz="u-arrlay "+(blZ.clazz||"");this.bxg();this.cK(blZ);this.bEy()};byx.bxg=function(){byA.bK(this.bTP,"f-dn");byA.bK(this.cYT,"f-dn");this.hZ.innerHTML='<div class="u-load"></div>';this.bW=null;this.nV=!1};byx.dH=function(){this.bxg();this.dI()};byx.bEy=function(){bD.bX("app.querySkinPackets")};byx.bEx=function(bh){var cmp=ctl.skin.cLd(),bEm=[],bHJ=1;if(!!bh&&!!bh.default&&!!bh.default.length){var ez="orpheus://skin/default/",hj="/web/img/preview.png",bHT=[],bEv=[];for(var i=0,l=bh.default.length;i<l;i++){var bl=bh.default[i];var fz=bm.eA(bl.info)?bj.mE(bl.info):bl.info;if(fz&&fz.version==bHJ){var bs=fz.sortIndex;if(bs>=0){bHT[bs]=bl}else{bEv.push(bl)}}}bHT=bHT.concat(bEv);bm.ij(bHT,function(bl,bs,AB){if(!bl){AB.splice(0,1)}});bHT.forEach(function(bl){var fz=bm.eA(bl.info)?JSON.parse(bl.info):bl.info;bEm.push({type:"default",name:bl.name,title:fz.info,pic:fz.pic,preview:ez+bl.name+hj})}.byB(this))}this.bW={selected:NEJ.X({},cmp.selected),colorSkin:cmp.colorSkin,themeSkin:bEm};this.zo.AX(0,!0);byA.bJ(this.bTP,"f-dn")};byx.Av=function(byy){if(!byy||byy.last==null)return;this.cZ=byy.index;this.bCM()};byx.bCM=function(){if(!this.bW)return;if(this.cZ==0){byA.eB(this.hZ,"m-xwgt-skin-theme",{selected:this.bW.selected,themeSkin:this.bW.themeSkin,defaultPreview:bj.hk().preview});byA.bK(this.cYT,"f-dn")}else{byA.eB(this.hZ,"m-xwgt-skin-color",{selected:this.bW.selected,colorSkin:this.bW.colorSkin});byA.bJ(this.cYT,"f-dn");this.dbq()}};byx.dbq=function(){var cmp=ctl.skin.cLd(),Bg=NEJ.X({},cmp.selected);if(Bg.type=="default"){Bg.name=this.Yf[Bg.name];if(this.cZ==0){byA.bK(this.cYT,"f-dn")}}this.Mj.checked=cmp.isCustomed;var dac=Number(Bg.name.split(",")[0].split("(")[1].trim()),daa=Number(Bg.name.split(",")[1].split("%")[0].trim());this.cWu=dac;this.cWA=daa;this.cYS.value=dac;this.cYM.value=daa;this.cYM.style.background="-webkit-linear-gradient(left, hsl("+this.cWu+", 100%, 20%),hsl("+this.cWu+", 100%, 70%))"};byx.dae=function(byy){if(!this.Mj.checked){nm.log.bTO("b218")}clearInterval(this.bvZ);this.bvZ=null;this.cWu=this.cYS.value;this.cYM.style.background="-webkit-linear-gradient(left, hsl("+this.cWu+", 100%, 20%),hsl("+this.cWu+", 100%, 70%))";var bN="hsl("+this.cWu+", "+this.cWA+"%, "+(this.cWA/100*50+20)+"%)";ctl.skin.cRf({type:"color",name:bN,isCustom:true});this.Mj.checked=true};byx.dad=function(byy){if(!this.Mj.checked){nm.log.bTO("b218")}clearInterval(this.bvZ);this.bvZ=null;this.cWA=this.cYM.value;var bN="hsl("+this.cWu+", "+this.cWA+"%, "+(this.cWA/100*50+20)+"%)";ctl.skin.cRf({type:"color",name:bN,isCustom:true});this.Mj.checked=true};byx.boo=function(byy){var dac=this.cYS.value;this.cYM.style.background="-webkit-linear-gradient(left, hsl("+dac+", 100%, 20%),hsl("+dac+", 100%, 70%))";if(!this.bvZ){this.bvZ=setInterval(function(){var dac=this.cYS.value,bN="hsl("+dac+", "+this.cWA+"%, "+(this.cWA/100*50+20)+"%)";ctl.skin.cYD({type:"color",name:bN})}.byB(this),300)}};byx.bqo=function(byy){var daa=this.cYM.value;if(!this.bvZ){this.bvZ=setInterval(function(){var daa=this.cYM.value,bN="hsl("+this.cWu+", "+daa+"%, "+(daa/100*50+20)+"%)";ctl.skin.cYD({type:"color",name:bN})}.byB(this),300)}};byx.ei=function(byy){var bk=bi.cR(byy,"d:action");if(!bk)return;switch(byA.bT(bk,"action")){case"select":var bN=byA.bT(bk,"name"),bq=byA.bT(bk,"type"),KF;if(bq=="default"){KF=bk.childNodes[5].childNodes[1]}else{KF=bk.childNodes[1]}if(KF.checked||this.nV)return;this.nV=!0;ctl.skin.cRf({type:bq,name:bN,isCustom:false});break}};byx.cRe=function(byy){if(!this.bW)return;this.nV=!1;if(byy.success){NEJ.X(this.bW.selected,byy.newSetting);this.dbq()}else{bj.ci({txt:"皮肤设置失败"})}}})();
(function(){var byz=NEJ.P,byA=byz("nej.e"),bi=byz("nej.v"),cmw=byz("nej.ui"),bj=byz("nm.x"),byx,byD;bj.BW=NEJ.C();byx=bj.BW.bS(cmw.hl);byx.cJ=function(blZ){this.cK(blZ);if(blZ.html){this.bNB=byA.xQ("<span>"+blZ.html+"</span>");this.bA.appendChild(this.bNB);var blM=this.bNB.offsetWidth,Cs=50;while(this.bA.offsetWidth-blM<Cs){this.bA.style.width=blM+Cs+"px"}}};byx.dH=function(){this.dI();byA.lG(this.bNB);this.bA.style.width=this.bjh};byx.eo=function(){this.Yl="m-xwgt-msgs"};byx.byL=function(){this.byO();byA.bJ(this.bA,"u-arrlay-msg");bi.bM(this.bA,"click",this.Ko.byB(this));this.bjh=this.bA.style.width};byx.Ko=function(byy){var WJ=bi.cR(byy,"c:j-close");var bjj=bi.cR(byy,"c:close");if(WJ){this.bF("onotherback");this.jn();var hC=byA.lh(WJ,"href");location.hash=hC}if(bjj){this.jn()}};byx.jn=function(){this.bF("onback");this.bQ()}})();
(function(){var byz=NEJ.P,cJO=NEJ.O,byA=byz("nej.e"),bi=byz("nej.v"),bU=byz("nej.ut"),bD=byz("nej.cef"),bj=byz("nm.x"),bxI=byz("nm.i"),bTG=byz("nm.c"),bp=byz("nm.d"),bR=byz("nm.l"),bY=byz("nm.m"),bC=byz("nm.m.f"),byx,byD;bC.zq=NEJ.C();byx=bC.zq.bS(bY.cW);byx.byG=function(){this.bCU="m-fsch";this.dg();var dL=byA.bV(this.bA,"j-flag");this.BM=dL[0];this.BJ=dL[1];this.nt=dL[2];this.vI=dL[3];this.xq=dL[4];this.bCG=dL[5];this.JP=dL[6];this.JN=byA.bV(this.xq,"j-pl-click")[0];var WO=byA.bV(this.bA,"j-import");this.sJ=WO[0];this.bjt=WO[1];this.nO=byA.bV(this.bA,"j-download")[0];this.cBU=byA.bV(this.bA,"j-inform")[0];this.WQ=byA.gj(this.JP)[1];this.kp={body:this.vI,input:this.nt,clazz:"sug",onchange:this.zu.byB(this),onselect:this.BC.byB(this),onempty:this.Ph.byB(this)};this.byJ={onsearch:this.tW.byB(this),onlistload:this.bsg.byB(this)};this.bzu={last:"at",target:"",data:null,message:{code:200,forward:0,msg:0,comment:0,notice:0}};this.JH();var fA=byA.bV(this.bA,"j-flxg");bi.bM(fA[0],"click",this.MN.byB(this,"btn"));bi.bM(document.body,"keypress",this.MN.byB(this,"key"));bi.bM(document.body,"click",this.JC.byB(this));bi.bM(location,"urlchange",this.bjB.byB(this));bi.bM(this.BM,"click",this.WT.byB(this,-1));bi.bM(this.BJ,"click",this.WT.byB(this,1));bi.bM(bp.mx,"message",this.hA.byB(this));bi.bM(bj.lN,"change",this.bjD.byB(this));bi.bM(this.nt,"focus",this.WU.byB(this,"focus"));bi.bM(this.nt,"blur",this.WU.byB(this,"blur"));bi.bM(bTG.beh,"switch",this.hA.byB(this,{data:"onrefreshavatar"}));this.dgV=ctl.cache.dgU("frame_top_search_sugget",{size:50,checkItemValid:function(bl){return+(new Date)-bl.addTime<3e5}})};byx.byT=function(blZ){this.dO([[this.xq,"click",this.bjF.byB(this)],[this.JP,"click",this.WV.byB(this)],[bp.dZ,"importprogress",this.By.byB(this)],[bp.cG,"offlineprogress",this.Ez.byB(this)],[bp.cG,"searchkeyupdate",this.bPN.byB(this)],[this.bCG,"click",this.bDK.byB(this)]]);this.cmx(blZ);bj.gM("/m",{cmd:"init"});this.Ez(bj.cL(4,function(cJN){return cJN.CG()}));this.cBW=bR.cBN.bG({parent:this.cBU})};byx.dq=function(blZ){this.dC(blZ);!!this.hS&&this.hS.bQ();this.hS=bj.Wy.bG(this.kp);!!this.bH&&this.bH.bQ();this.bH=bp.mo.bG(this.byJ);if(!!this.pN)this.pN.bQ();this.pN=bp.du.bG();if(!!this.eh)this.eh.bQ();this.eh=bp.cG.bG();this.dv=bp.gO.kE()};bqO=/\d+\.jpg/;byx.JH=function(){var kX=localCache.cF("host.profile.avatarUrl");if(!kX){kX=bj.hk().avatar30}else{kX=kX+"?param=24y24&quality=100"}var bRq=byA.bV(this.JN,"j-flag");if(bRq&&bRq.length>0){bRq=bRq[0].firstElementChild}this.JN.innerHTML="";byA.eB(this.JN,"m-fsch-face",{user:localCache.cF("host.profile"),src:kX,checkAnonimous:bj.bRw,isAnonimous:bj.btm()});var ho=(kX||"").match(bqO);ho=(ho||[])[0];if(bRq&&ho&&(bRq.src||"").indexOf(ho)>-1){var bRB=byA.bV(this.JN,"j-flag");if(bRB&&bRB.length>0){bRB=bRB[0];byA.cae(bRB);bRB.appendChild(bRq)}}};byx.bjL=function(cT){var iQ=this;if(this.bAS)this.bAS.bQ();byA.bJ(this.sJ,"f-hide");this.bAS=bj.BW.bG({parent:this.sJ,clazz:"u-arrlay-1",html:cT,onback:function(){byA.bK(iQ.sJ,"f-hide")}.byB(this)});this.bAS.dD()};byx.WX=function(bq,bk){bq==-1?byA.byW(bk,"display","none"):byA.byW(bk,"display","block")};byx.WY=function(){var wT=null;return function(bq,bjP,cT){var bjQ={"import":this.sJ};var vH=byA.bV(this.sJ,"j-tip")[0];var tq=bjQ[bq];if(!tq||!cT)return;if(bjP){if(this.bAS)this.bAS.bQ();this.bjt.innerText=cT;if(byA.ey(vH,"f-hide")&&!byA.ey(tq,"f-hide")){return}byA.bJ(tq,"f-hide");byA.bJ(vH,"f-hide");bi.bM(tq,"mouseover",this.WX.byB(this,1,vH));bi.bM(tq,"mouseout",this.WX.byB(this,-1,vH));wT=setTimeout(function(){byA.bK(vH,"f-hide");clearTimeout(wT)},2e3)}else{wT&&clearTimeout(wT);bi.kS(tq,"mouseover");bi.kS(tq,"mouseout");byA.byW(vH,"display","none");this.bjL(cT)}}}();byx.By=function(byy){return;if(bj.btm()){if(this.bAS)this.bAS.bQ();byA.bK(this.sJ,"f-hide");this.bjt.innerText="";return}var dU={"-2":"导入被中断","-1":"导入失败",0:"",1:"",2:"正在导入，当前进度：",3:"导入完成",405:"导入过于频繁，请10分钟后再试",507:"歌单超上限",510:"服务不可用",512:"用户被禁止导入歌单",514:"不允许重复导入歌单"};if(byy.status==-2||byy.status==3||byy.status==-1&&byy.code==507){bj.cL(1,function(cJN){cJN.wp(localCache.cF("host.profile.userId"),!0)})}if(byy.status==3||byy.status<0){var cT="";if(byy.status==3){cT='导入完成，<a href="#/m/my/" class="s-fc2 j-close">返回我的音乐</a>'}else{cT=byy.message||dU[byy.status+""];if(bj.hi(byy))cT="网络不给力哦，请检查你的网络设置~"}this.WY("import",false,cT)}else{if(!dU[byy.status+""])return;var cT=byy.message||dU[byy.status+""]||dU[byy.code+""];if(byy.status==2){if(byy.noprogress){cT="正在导入，请稍候..."}else{cT=cT+parseInt(byy.progress||0)+"%"}}if(bj.hi(byy))cT="网络不给力哦，请检查你的网络设置~";this.WY("import",true,cT)}};byx.Jt=function(){var ds=['<a class="dlding" href="#/m/offline/download/" id="id-top-offlining-0">正在下载<b></b><i class="loading"></i></a>','<span class="icn" id="id-top-offlining-1"></span>','<a class="dlding" href="#/m/offline/download/" id="id-top-offlining-2">下载暂停<b></b><i class="icn"></i></a>'];return function(bq,HB){if(!ds[bq])return;if(!byA.cg("id-top-offlining-"+bq))this.nO.innerHTML=ds[bq];if(!!HB)byA.bJ(this.nO,"f-hide");else byA.bK(this.nO,"f-hide")}}();byx.bjV=function(dT,byM){if(!!this.Js)this.Js.bQ();this.Js=bj.BW.bG({parent:this.nO,clazz:byM||"u-arrlay-1",html:dT,onback:this.Jt.byB(this,0,!1)});this.Js.dD()};byx.Ez=function(){var bRZ="",bRY=0,bSa=-1,gw=null;var bSb=function(){if(bSa<0)return;if(!!bRZ){if(+(new Date)-bRY>3e3){bRZ="";this.Ez({sta:bSa})}else{window.clearTimeout(gw);gw=window.setTimeout(bSb.byB(this),500)}}else{this.Ez({sta:bSa})}};return function(byy){return;if(bRZ&&+(new Date)-bRY>3e3){bRZ=""}if(!!byy.error){var bRX=+(new Date);if(!!bRZ&&bRZ==byy.error&&bRX-bRY<=3e3){bRY=bRX;window.setTimeout(function(){bj.lm()}.byB(this),1e3);return}switch(byy.error){case"overflow-storage":bj.ci({txt:"本地硬盘空间不足"});bRZ=byy.error;bRY=bRX;return;case"overflow-limit":bj.ci({txt:"本日下载的歌曲数超限"});bRZ=byy.error;bRY=bRX;return;case"network-error":bj.ci({txt:"网络不给力哦，请检查你的网络设置~"});bRZ=byy.error;bRY=bRX;return;default:return}}if(!!bRZ){window.clearTimeout(gw);bSa=byy.sta;gw=window.setTimeout(bSb.byB(this),500);return}bSa=-1;var di=bj.cL(4,function(cJN){return cJN.bgU()});if(byy.sta==2){if(!di.download){if(di.complete&&byy.del==0){this.Jt(1,!0);this.bjV('下载完成，<a href="#/m/offline/complete/" class="s-fc2 j-close">查看我下载的音乐</a>');window.setTimeout(function(){this.Jt(0,false)}.byB(this),3e3)}else{this.Jt(0,!1)}}else{this.Jt(2,!0)}}else if(byy.sta==0){if(!di.download){}else{this.Jt(2,!0)}}else{this.Jt(0,!0)}}}();byx.hA=function(bn){if(bn&&bn.data){switch(bn.data){case"onclose":this.Jr();return;case"onclosenewfriend":this.bCB();return;case"onrefreshavatar":this.JH();return;default:switch(bn.data.cmd){case"onchat":var dF=this.bzu;this.bzu={last:"chat",target:"chat",data:bn.data,message:dF.message};this.WV();this.bzu=dF;return;case"onread":this.bzu.message[bn.data.type]=Math.max(bn.data.new,0);this.hA(this.bzu.message);return;case"resize":var bk=byA.bV(this.bA,"j-topbox")[0];bk.style.left=bn.data.width-1+"px";return;case"msgtabchange":var bPR=bn.data.tab;if(bPR!="chat"){this.bzu.last=bn.data.tab||"at"}else{this.bzu.last="chat";this.bzu.data=bn.data.ext}return}}}if(!bn||bn.code!=200)return;var dR=bn.forward+bn.notice+bn.msg+bn.comment;if(dR>99)dR="99+";if(dR<0)dR=0;this.WQ.innerText=dR;this.WQ.style.display=!!dR?"":"none";this.bzu.target=!!bn.forward?"at":!!bn.msg?"private":!!bn.comment?"comment":!!bn.notice?"notify":"";this.bzu.message=bn;if(bn.friend&&bn.friend.count){if(this.vG)this.vG.bQ();var nj=bn.friend.friend;if(nj&&nj.snsType&&nj.snsType!=6){this.vM=true}else{this.vM=false}var kX=nj.avatarUrl,iQ=this;var cvU={1:"通讯录",2:"新浪微博",3:"豆瓣",4:"人人",5:"QQ",8:"易信"},cvV=!nj.snsType?"":cvU[nj.snsType]||"",cvW=nj.snsNickname||"";var cvX=!nj.gender?"Ta":nj.gender==1?"他":"她";var dT='<div class="cnt"><a class="j-close s-fc3" href="#/m/personal/?uid='+nj.userId+'"><img src="'+kX+'?param=24y24" onerror="nm.l.f.empty(this)" class="pic">你的'+cvV+'好友<em class="s-fc2 f-thide">'+cvW+"</em>也加入了，关注"+cvX+"共享好音乐吧</a></div>";this.vG=bj.BW.bG({parent:this.xq,clazz:"u-arrlay-1 m-newfrd",html:dT,onotherback:function(){iQ.vM=false}.byB(this),onback:this.bka.byB(this)});this.vG.dD()}else{this.bCB()}var mC=byA.bV(this.xq,"j-top-fow")[0];if(bn.follow){byA.bJ(mC,"f-dn")}else{byA.bK(mC,"f-dn")}};byx.bka=function(){if(this.bzu&&this.bzu.message)this.bzu.message.friend={count:0};this.byK=localCache.cF("host.profile.userId");this.pN.fE({key:"user_rec_follow-"+this.byK,data:{starNum:0,snsNum:0,random:0,filterUserIds:0}})};byx.bjF=function(byy){if(bj.btm()){return}if(bi.cR(byy,function(byA){return byA.href})){return}var bk=bi.cR(byy,"d:action");if(!bk||byA.bT(bk,"action")!="profile"){return}bi.bQd(byy);var mC=byA.bV(this.xq,"j-top-fow")[0],bCA=false;if(!byA.ey(mC,"f-dn")){byA.bK(mC,"f-dn");bCA=true;if(this.bzu&&this.bzu.message)this.bzu.message.follow=0}var Jp=this.oF&&this.bBM(this.oF.bA)?true:false;this.JC();if(Jp)return;this.oF=bR.Wz.bG({parent:this.xq,isShowFris:this.vM,isShowFans:bCA});this.oF.dD();nm.log.bTO("b216");nm.log.dE(nm.log.ACTION.PC_CLICK,null,null,"personal")};byx.bDK=function(byy){bi.bQd(byy);var Jp=this.bAV&&this.bBM(this.bAV.bA)?true:false;this.JC();if(Jp)return;this.bAV=bR.bCO.bG({parent:this.bCG,clazz:"m-skswitch"});this.bAV.dD();nm.log.bTO("b217")};byx.WV=function(byy){bi.bQd(byy);var Jp=this.bAW&&this.bAW.cUf()?true:false;this.JC();if(bj.btm()&&bi.cR(byy.ext||byy,"anonAction")){bj.bCv();return}if(Jp)return;bj.cL(12,function(cJN){cJN.UF(1)});var cXi=!1;if(this.bAW){if(this.dbw!=localCache.cF("host.profile.userId")){cXi=!0}else if(this.bzu.target){cXi=!0}else if(+(new Date)-this.dbx>18e4){cXi=!0}}if(cXi&&this.bAW){this.bAW=this.bAW.bQ()}this.dbx=+(new Date);if(this.bAW){this.bAW.cXm(!0)}else{this.dbw=localCache.cF("host.profile.userId");this.bAW=bj.WH.bG({parent:this.JP.parentNode,target:bj.btm()?"private":this.bzu.target||this.bzu.last||"at",data:this.bzu.data,message:this.bzu.message,onclose:this.Jr.byB(this)})}nm.log.bTO("b214");nm.log.dE(nm.log.ACTION.PC_CLICK,null,null,"message")};byx.Jr=function(){if(this.bAW&&this.bAW.cUf()){this.bAW.cXm(!1);bj.cL(12,function(cJN){cJN.UF(0)})}};byx.bBM=function(bk){var lV=bk?true:false;while(bk){if(bk.tagName){if(bk.tagName.toLowerCase()=="html")break;bk=bk.parentNode}else{lV=false;break}}return lV};byx.JC=function(byy){if(this.oF)this.oF=this.oF.bQ();if(this.bAV)this.bAV=this.bAV.bQ();this.Jr();this.bEH(byy);bi.bF(document,"click",{ext:byy});bi.sA(byy)};byx.bEH=function(byy){var bk=bi.cR(byy,"j-search-input");if(!bk){this.hS.byg=false;byA.bK(this.vI,"f-dn")}};byx.bPN=function(byy){this.nt.value=byy.key};byx.bCB=function(){if(!!this.vG){this.vG.bQ();delete this.vG}this.vM=false};byx.bjB=function(){if(history.index>0){byA.bJ(this.BM,"z-dis")}else{byA.bK(this.BM,"z-dis")}if(history.index<history.size-1){byA.bJ(this.BJ,"z-dis")}else{byA.bK(this.BJ,"z-dis")}};byx.WT=function(cH){if(localCache.cg("detail-max")){this.bgu("/?/frame/brief/",{cmd:"min"});return}if(cH<0){if(!byA.ey(this.BM,"z-dis")){history.back(-1)}nm.log.dE(nm.log.ACTION.PC_CLICK,null,null,"backward")}else{if(!byA.ey(this.BJ,"z-dis")){history.forward()}nm.log.dE(nm.log.ACTION.PC_CLICK,null,null,"forward")}};byx.zu=function(bO){if(APP_CONF.command){var cSV=bO.trim(),bUr=cSV.split(/\s+/);if(bUr&&bUr[0]=="cmd"){switch(bUr[1]){case"switch":var pf=bUr[2];if(pf&&pf.match(/^http:\/\/[\w\.\-]+\.com$/)){if(APP_CONF.domain==pf){bj.ci({txt:"当前域已经是"+APP_CONF.domain})}else{bj.ci({state:"loading"});localStorage.clear();dc.track.btp(1);dc.track.bjM(1);ctl.env.cUn(pf);bj.cnk(function(){bD.bX("app.exit","restart")},1e3)}}else{bj.ci({txt:"命令参数不正确"})}return;case"domain":bj.ci({txt:"当前域是:"+APP_CONF.domain});return;case"super":var caH="命令参数不正确";if(bUr[bUr.length-1]=="EOF"){var bs=cSV.indexOf("super");if(bs>=0){var cqj=cSV.substring(bs+6,cSV.length-4);if(cqj){try{caH=bj.ciE((new Function(cqj))())}catch(_e){caH=byA.message}}}}bj.ci({txt:caH});return;case"localhost":location.href="orpheus://orpheus/style/pages/index.html";return;default:bj.ci({txt:"不支持的命令类型"});return}}}this.gY=bO;if(this.dgV.get(this.gY)){bj.cnk(this.mi.byB(this),10,"frame_top_search_sugget")}else{bj.cnk(this.mi.byB(this),300,"frame_top_search_sugget")}};byx.mi=function(){if(this.gY&&this.nt.value.trim()){var dhh=this.dgV.get(this.gY);if(dhh){this.tW(dhh,!0)}else{this.bH.bkq({s:this.gY,limit:6})}}};byx.tW=function(){var Jl=function(ho){var bCz=byA.iz("div");byA.eB(bCz,"m-fsch-item",{src:ho});return bCz.innerHTML.trim()};return function(cmt,dhq){if(cmt.code!=200||this.gY!=cmt.keyword||!this.nt.value.trim()){return}if(!dhq){this.dgV.add(cmt.keyword,cmt)}var bh=cmt.result;var Jk=new RegExp(bj.cdn(cmt.keyword),"gi");for(var key in bh){if(key=="order"){continue}var bE=bh[key];for(var i=0,item;item=bE[i];i++){item.nameshow=item.name.replace(Jk,Jl);if(key=="songs"){for(var j=0;j<item.artists.length;j++){item.artists[j].nameshow=item.artists[j].name.replace(Jk,Jl)}}if(key=="albums"){item.artist.nameshow=item.artist.name.replace(Jk,Jl)}if(key=="mvs"){item.artnameshow=item.artistName.replace(Jk,Jl)}}}byA.eB(this.vI,"m-fsch-list",{name:cmt.keyword,data:bh,getAlias:bj.csw,commonJST:ctl.commonJST.cFB});byA.bJ(this.vI,"m-schsug");var dL=byA.bV(this.vI,"j-item");if(this.hS.byg){this.hS.tX(dL)}}}();byx.Ph=function(byy){var ih="frgmt_search_hot-1111",bg=this.bH.byI(ih);if(bg&&bg.length){if(+(new Date)-this.dfM>=3e5){this.bH.eN(ih);this.dfD(ih)}this.bsg(bg)}else{this.dfD(ih)}};byx.dfD=function(ih){this.dfM=+(new Date);this.bH.fE({key:ih,data:{type:1111}})};byx.bsg=function(){if(this.nt.value.trim()){return}var bn=this.bH.byI("frgmt_search_hot-1111");byA.eB(this.vI,"m-fsch-hot",{result:bn});byA.bK(this.vI,"m-schsug");var dL=byA.bV(this.vI,"j-item");if(this.hS.byg){this.hS.tX(dL)}};byx.MN=function(bq,byy){if(this.hS.cZ>0&&this.hS.byg)return;var gE=this.nt.value.replace(/(^\s*)|(\s*$)/g,"");if(bq=="btn"||byy.keyCode==13&&this.hS.iy.id==document.activeElement.id){this.bEH();if(!gE.length){bi.bQd(byy)}else{this.hS.bF("onselect","0-0",{type:"enter"});this.gY=""}}};byx.BC=function(bO,blZ){if(bO=="-1"){return}if(!this.nt.value.trim()){this.nt.value=blZ.keyword}var eF=this.nt.value;if(bO=="0-0"){var gE=encodeURIComponent(eF);var byC="/m/search/?type=1&s="+gE;if(location.href.substring(location.href.indexOf("/m/search/"))==byC)bi.bF(location,"urlchange",{href:byC,path:"/m/search/",query:{s:eF,type:"1"},type:"urlchange",msg:"搜索词相同，主动触发的事件"});dispatcher.dr(byC);return}var bE=bO.split("-");var byE={1:{href:"/m/search/?type=1",desc:"首单曲"},10:{href:"/m/search/album/?type=10",desc:"张专辑"},100:{href:"/m/search/artist/?type=100",desc:"位歌手"},1e3:{href:"/m/search/playlist/?type=1000",desc:"个歌单"},1002:{href:"/m/search/user/?type=1002",desc:"位用户"},1004:{href:"/m/search/mv/?type=1004",desc:"首MV"},1006:{href:"/m/search/lyric/?type=1006",desc:"首单曲"},1008:{href:"/m/search/djradio/?type=1009",desc:"首单曲"},1009:{href:"/m/search/djradio/?type=1009",desc:"首单曲"}};var Xf=byE[bE[1]].href+"&s="+encodeURIComponent(eF);if(bE[0]==0){dispatcher.dr(Xf);if(bE[2]!=null){nm.log.cFs("search",{type:"suggestword",id:null,keyword:null,searchword:eF,position:Number(bE[2]||0)})}}else{var Xg=encodeURIComponent(eF);var cC={1:"/m/album/?",10:"/m/album/?",100:"/m/artist/?",1e3:"/m/playlist/?",1002:"/m/personal/?",1004:"#/m2/mv/?source=search&",1006:"/m/album/?"};var bkm={1:1,10:2,100:3,1e3:4,1002:5,1006:1,1004:7};if(bE[1]==1){document.action({id:parseInt(bE[2]),type:4,from:7,action:"play",href:Xf,log:1,logAction:100,logType:1,logFrom:1,logKeyword:Xg})}else{dispatcher.dr(cC[bE[1]]+"id="+bE[2]+"&log=1&logAction=100&logFrom=1&logType="+bkm[bE[1]]+"&logKeyword="+Xg)}}};byx.bjD=function(byy){byy=byy||cJO;!!byy.online&&this.JH()};byx.WU=function(bq){this.nt.placeholder=bq=="focus"?"":"搜索音乐，歌手，歌词，用户"};bj.cU("/?/frame/top/",bC.zq)})()</textarea>
<meta charset="utf-8"/> <textarea name="txt" id="m-ffrm-module-txt"> <header class="g-hd s-theme-bgc1"> </header> <div class="m-winctrl"> <span class="bar"></span> <span class="icn fix" title="mini模式"><svg class="svg"><use xlink:href="orpheus://orpheus/style/res/svg/topbar.sp.svg#mini"></use></svg></span> <span class="icn min" title="最小化"><svg class="svg"><use xlink:href="orpheus://orpheus/style/res/svg/topbar.sp.svg#zoomout"></use></svg></span> <span class="icn revert" title="最大化"><svg class="svg"><use xlink:href="orpheus://orpheus/style/res/svg/topbar.sp.svg#zoomin"></use></svg></span> <span class="icn cls" title="关闭"><svg class="svg"><use xlink:href="orpheus://orpheus/style/res/svg/topbar.sp.svg#close"></use></svg></span> </div> <div id="x-g-mn"> <section class="g-sd"> <div></div> <div class="u-resize2"></div> </section> <section class="g-mn"></section> <div class="g-ft"></div> <div></div> <div></div> <div></div> <div></div> </div> <div class="u-resize"><svg class="svg f-vhc z-dis"><use xlink:href="orpheus://orpheus/style/res/svg/btmbar.sp.svg#resize"></use></svg></div> <div class="u-resize2 u-resize2-1"></div> </textarea> <textarea name="js">(function(){var byz=NEJ.P,cJO=NEJ.O,co=NEJ.F,byA=byz("nej.e"),bi=byz("nej.v"),bm=byz("nej.u"),bD=byz("nej.cef"),bU=byz("nej.ut"),bTG=byz("nm.c"),bj=byz("nm.x"),byx;if(!!bTG.cYe)return;bTG.cYe=NEJ.C();byx=bTG.cYe.bS(bTG.cWt);byx.byR=function(){this.cWh={type:"miniplayercontextmenu",conf:{content:[bD.dw({text:"总在最前面",menu_id:200}),bD.dw({text:"完整模式",menu_id:201,image_path:bj.byN("icn_normal")}),bD.dw({text:"列表循环",menu_id:205,children:[bD.dw({text:"列表循环",menu_id:1040,image_path:bj.byN("icn_loop")}),bD.dw({text:"单曲循环",menu_id:1041,image_path:bj.byN("icn_repeat")}),bD.dw({text:"随机播放",menu_id:1042,image_path:bj.byN("icn_shuffle")}),bD.dw({text:"顺序播放",menu_id:1043,image_path:bj.byN("icn_order")})],image_path:bj.byN("icn_loop")}),bD.dw({text:"打开桌面歌词",menu_id:203,image_path:bj.byN("icn_openLrc")}),bD.dw({text:"锁定桌面歌词",menu_id:204,image_path:bj.byN("icn_lock")}),bD.dw({text:"词、曲报错",menu_id:202,image_path:bj.byN("icn_words")}),bD.dw({text:"退出",menu_id:206,image_path:bj.byN("icn_exit")})],hotkey:{200:"Ctrl F"},resource:function(){return{}},check:function(){var gT=bD.dV(200),hg=dc.setting.hw().minitop;!hg?delete gT.image_path:gT.image_path=bj.byN("icn_checked");var dk=dc.track.gB()||cJO,btn=dc.track.xR(dk.data),cAE=dc.track.cAG(dk.data);if(dk&&dk.state&&dk.state==2&&!btn&&!cAE){bD.dV(202).menu=!0}else{bD.dV(202).menu=!1}(bD.dV(201)||{}).text="完整模式";var byY=ctl.hotkey.daZ();if(!!byY){for(var i=0,l=byY.length;i<l;i++){var bl=byY[i];if(bl.name=="mini_max"){if(bl.notconflict&&bl.val){(bD.dV(201)||{}).text="完整模式（"+bl.val+"）"}break}}}var cik=localCache.cg("desktop_lyric_close"),cin=localCache.cg("desktop_lyric_lock"),cvy=localCache.cg("show_lyric_type"),Og=bD.dV(203),cbG=bD.dV(204);if(cvy!=0){Og.menu=!0;Og.text="启用桌面歌词";cbG.menu=!1}else{Og.text=cik?"打开桌面歌词":"关闭桌面歌词";Og.image_path=bj.byN(cik?"icn_openLrc":"icn_closeLrc");cbG.menu=!cik;cbG.text=cin?"解锁桌面歌词":"锁定桌面歌词";cbG.image_path=bj.byN(cin?"icn_unlock":"icn_lock")}var bl=bD.dV(205);if(ctl.defPlayer.Jj()){bl.menu=!0;var daV=ctl.defPlayer.daW();bm.cj(bl.children,function(cYc){if(cYc.menu_id==daV){cYc.check_image_path=bj.byN("icn_checked");bl.text=cYc.text;bl.image_path=cYc.image_path}else{delete cYc.check_image_path}})}else{bl.menu=!1}},handler:function(bo,bh,cA){switch(bo){case 200:var hg=!dc.setting.hw().minitop;bD.bX("player.setAlwaysOnTop",!!hg);var cq=dc.setting.hw();cq.minitop=!!hg;dc.setting.bI(cq);break;case 202:bi.bF(document,"menuaction",{id:1053});var dk=dc.track.gB();if(!dk)return;var bB=dk.data;if(bB.filename)return;bTG.Dv.kE().boU();break}}}};this.bEc();bD.fo("contextmenu","player",this.buH.byB(this));bD.fo("shortcut","player",this.buB.byB(this),2)};byx.buH=function(){bi.bF(document,"contextmenu",{res:{id:"rand-id",type:this.cWh.type,menu:"true"}})};byx.buB=function(byy){if(byy.id==200){this.cWh.conf.handler(200)}};byz("ctl").miniPlayerContextMenu=bTG.cYe.kE()})();
(function(){var byz=NEJ.P,cJO=NEJ.O,co=NEJ.F,byA=byz("nej.e"),bi=byz("nej.v"),bm=byz("nej.u"),bD=byz("nej.cef"),bU=byz("nej.ut"),bTG=byz("nm.c"),bj=byz("nm.x"),byx;if(!!bTG.cYb)return;bTG.cYb=NEJ.C();byx=bTG.cYb.bS(bTG.cWt);byx.byR=function(){this.cWh={type:5,conf:{content:[bD.dw({menu_id:50001,text:"查看用户",image_path:bj.byN("icn_lookfor")}),bD.dw({separator:!0,enable:!1}),bD.dw({menu_id:50002,text:"复制链接",image_path:bj.byN("icn_link")})],resource:function(bo){return dc.user.cl(bo)},check:function(bh,cB){var HB=!navigator.offline&&cB.fid==7;bD.dV(50001).menu=HB;bD.dV(50002).menu=HB},handler:function(bo,bh,cA){switch(bo){case 50001:location.hash="/m/personal/?uid="+bh.userId;break;case 50002:bj.CZ(5,bh.userId);break}}}};this.bEc()};byz("ctl").userContextMenu=bTG.cYb.kE()})();
(function(){var byz=NEJ.P,cJO=NEJ.O,co=NEJ.F,byA=byz("nej.e"),bi=byz("nej.v"),bm=byz("nej.u"),bD=byz("nej.cef"),bU=byz("nej.ut"),bTG=byz("nm.c"),bj=byz("nm.x"),bp=byz("nm.d"),bR=byz("nm.l"),byx;if(!!bTG.cYa)return;bTG.cYa=NEJ.C();byx=bTG.cYa.bS(bTG.cWt);byx.byR=function(){this.Tv=bp.bzI.bG({onitemload:this.wr.byB(this,6)});this.cWh={type:6,conf:{content:[bD.dw({menu_id:60001,text:"查看歌手",image_path:bj.byN("icn_lookfor")}),bD.dw({separator:!0,enable:!1}),bD.dw({menu_id:60003,text:"收藏...",image_path:bj.byN("icn_addlist")}),bD.dw({menu_id:60002,text:"复制链接",image_path:bj.byN("icn_link")}),bD.dw({separator:!0,enable:!1}),bD.dw({menu_id:60004,text:"删除歌手",image_path:bj.byN("icn_delete")}),bD.dw({menu_id:60007,text:"不感兴趣"})],hotkey:{60003:"Ctrl S",60004:"Delete"},resource:function(bo){return dc.artist.cl(bo)},loadres:function(bo){this.Tv.hv({id:bo,key:"artist",ext:6})}.byB(this),check:function(bh,blZ){var yR=dc.artist.cdJ(bh),BE=blZ.fid==-14,cEV=blZ.fid==-18&&!yR,bFL=!!bh.artistTopId,bmi=!navigator.offline;bD.dV(60001).enable=bmi;bD.dV(60003).menu=!bFL&&!yR;bD.dV(60003).enable=bmi;bD.dV(60002).menu=!bFL;bD.dV(60004).menu=BE&&yR;bD.dV(60004).enable=bmi;bD.dV(60007).menu=cEV},handler:function(bo,jC,cB,fC){switch(bo){case 60001:var bFL=!!jC.artistTopId;if(!!bFL){location.hash="#/m/disc/artists?type="+jC.artistTopId}else{location.hash="#/m/artist/?id="+jC.id}break;case 60002:bj.CZ(6,jC.id);break;case 60003:var bZ=localCache.cF("host.profile.userId");this.Tv.iL({key:"artist_sub-"+bZ,data:jC,extRefreshKey:"artist_recommend-"+bZ,extFrom:cB.fid});break;case 60004:ctl.layer.cYn(bR.rx.bG({message:"确定要取消收藏该歌手？",data:{rdata:jC,type:6},onok:this.bMu.byB(this,jC),okText:"确定",title:"取消收藏"}).dD());break;case 60007:var bZ=localCache.cF("host.profile.userId");this.Tv.ln({key:"artist_recommend-"+bZ,id:jC.id,data:{artistIds:[jC.id]}});break}}.byB(this)},action:{play:{6:function(jC,cB){dc.track.rA(dc.track.byI("track_artist_top-"+cB.data),cB,{play:!0,clear:!0})}.byB(this)},fav:{6:600003},favart:{6:60003},unfavart:{6:60004}},ddtip:{6:function(jM){return jM.name}}};this.bEc()};byx.bMu=function(bh){var bZ=localCache.cF("host.profile.userId");this.Tv.ln({ext:bh,id:bh.id,data:bh,key:"artist_sub-"+bZ,extRefreshKey:"artist_recommend-"+bZ})};byz("ctl").artistContextMenu=bTG.cYa.kE()})();
(function(){var byz=NEJ.P,cJO=NEJ.O,co=NEJ.F,byA=byz("nej.e"),bi=byz("nej.v"),bm=byz("nej.u"),bD=byz("nej.cef"),bU=byz("nej.ut"),bTG=byz("nm.c"),bj=byz("nm.x"),bp=byz("nm.d"),bR=byz("nm.l"),byx;if(!!bTG.cEU)return;bTG.cEU=NEJ.C();byx=bTG.cEU.bS(bTG.cWt);byx.byR=function(){this.cWh={type:110,conf:{resource:function(bo){return dc.ad.cl(bo)}},action:{link:{110:function(jC,cB){if(!jC||!jC.url){return}bj.caU(jC.url);dc.ad.cCe(jC.type+"_"+jC.adId)}.byB(this)}}};this.bEc()};byz("ctl").adContextMenu=bTG.cEU.kE()})();
(function(){var byz=NEJ.P,cJO=NEJ.O,byA=byz("nej.e"),bi=byz("nej.v"),bm=byz("nej.u"),cN=byz("nej.j"),bD=byz("nej.cef"),qC=byz("nej.cef.ut"),bp=byz("nm.d"),bR=byz("nm.l"),bj=byz("nm.x"),bTG=byz("nm.c"),bY=byz("nm.m"),bC=byz("nm.m.f"),byx,byD;bC.nN=NEJ.C();byx=bC.nN.bS(bY.cW);byx.byG=function(){this.bCU="m-ffrm";this.dg();this.bA=document.body;this.bA.insertAdjacentHTML("afterBegin",byA.gy("m-ffrm-module-txt"));var bXI=byA.gj(this.bA),bYH=byA.gj(bXI[2]);this.cdm=bXI[2];this.ccf=bYH;this.hU;this.ip={top:bXI[0],side:bYH[0].firstElementChild,brief:bYH[3],parent:bYH[1],lyric:bYH[4],player:bYH[5],fmp:bYH[6]};document.mbody=bYH[1];document.mside=bYH[0];document.mhead=bXI[0];this.bfo=document.mbody;this.bfp=document.mside;this.bmT=bXI[3];this.bmd=bXI[4];var fA=byA.gj(bXI[1]);this.DY=qC.rL.bG({min:fA[2],max:fA[3],dbmax:bXI[0],close:fA[4],dragger:bXI[0],clazz:"max",resizes:{bottomright:bXI[3],right:bXI[4]},onbeforeclose:this.bfr.byB(this),onstatuschange:this.Nn.byB(this)});this.Vn=fA[1];bi.bM(fA[1],"click",this.bfu.byB(this));bi.bM(document,"menuaction",this.lW.byB(this));bi.bM(window,"requesterror",this.bfv.byB(this));bi.bM(bTG.cvL,"updatehotkey",this.Nm.byB(this));bi.bM(bTG.cvL,"hotkey",this.cOy.byB(this));bi.bM(this.bfp.lastElementChild,"mousedown",this.bfx.byB(this));bi.bM(document,"mousemove",this.bfy.byB(this));bi.bM(document,"mouseup",this.bfz.byB(this));bi.bM(window,"resize",this.bmY.byB(this));bi.bM(document,"beforeexit",this.Kv.byB(this));this.ri={begin:!1,x:0,y:0,now:199,min:199,max:199,mask:null,minmax:199,offset:1022-3,mnminw:820,mnmaxw:820,mnmaxws:[1100,1050,997,980,866,823],allclazz:"mq-763 mq-806 mq-920 mq-937 mq-990 mq-1040",mq:!1};bD.fo("foregroundpreinstance","app",this.Nh.byB(this));bD.fo("requestchangetomain","player",this.xX.byB(this));bD.fo("requestclose","player",this.DY.bqk.byB(this.DY));bD.fo("desktoplyricaction","player",this.cbm.byB(this),2);this.dv=bp.gO.bG();this.beS=nej.cef.ut.bDo.kE();this.bEh=0;bD.fo("FontSize","player",this.cdo.byB(this));bD.bX("app.getCooperation",this.cfe.byB(this));bi.bM(location,"urlchange",this.VV.byB(this));this.cvJ=""};byx.byT=function(){var eg=!1;var XC=function(blZ,bn){blZ.totl--;if(blZ.done)return;var oK=!1;if(bn&&bn.code==200&&bn.updateFiles&&bn.updateFiles.length){if(blZ.coreVersion==this.beS.baD(bn.updateFiles)){blZ.newFeature=this.beS.bgk(bn.updateFiles);blZ.updateTitle=this.beS.cFw(bn.updateFiles);blZ.subTitle=this.beS.yG(bn.updateFiles);oK=!0}}if(oK||blZ.totl<=0){blZ.done=!0;bR.pE.bG({title:"已升级到"+(blZ.version?blZ.version:"新")+"版本",message:this.beS.FX(blZ.version,blZ.subTitle,blZ.newFeature),nocl:true,hasstyle:true,okText:"知道了"}).dD()}};var bre=function(blZ,bix){blZ.coreVersion=bix;blZ.done=!1;if(blZ.updateSetting&&blZ.updateSetting.version==bix&&blZ.updateSetting.newFeature&&blZ.updateSetting.newFeature.length){blZ.newFeature=blZ.updateSetting.newFeature;blZ.updateTitle=blZ.updateSetting.updateTitle;blZ.subTitle=blZ.updateSetting.subTitle;blZ.totl=0;XC.call(this,blZ)}else{blZ.totl=2;bj.cg("/api/pc/version",{core:"1.0.0.0","native":"",orpheus:""},XC.byB(this,blZ));bj.cg("/api/pc/version?includeUnopen=true",{core:"1.0.0.0","native":"",orpheus:""},XC.byB(this,blZ))}};var bCj=function(XA,brP,blz){var blZ={newFeature:XA,updateSetting:brP,updateTitle:"",subTitle:"",version:blz.version};bD.bX("update.getVersion","core",bre.byB(this,blZ))};var bym=function(){var cyQ=bj.cL(11,function(cJN){var ml=cJN.fF(),cnj=!!ml.betaGuideShowed2;if(!cnj){ml.betaGuideShowed2=!0;cJN.nB(ml)}return!cnj});if(cyQ){var bja=document.createElement("div");byA.eB(bja,"m-guide-beta",{});document.body.appendChild(bja);bi.bM(byA.cg("x-id-guide-beta"),"click",function(){byA.kO(bja)})}};var Io=function(bfI){if(bfI=="updaterun"){var cq=dc.setting.fF(),cQR=(cq||cJO).updateFiles||[];bD.bX("update.getVisualVersion",bCj.byB(this,cQR,dc.setting.bLn()));if(cq&&cq.updateFiles){delete cq.updateFiles;dc.setting.nB(cq)}}this.cmh(2)};return function(blZ){if(!eg){eg=!0;this.cmx(blZ);bD.bX("app.getAppStartType",Io.byB(this));if(this.bEh>=3){this.bEk()}this.bDW();if(APP_CONF.autoRun){this.DY.ckT()}else{if(!!(this.dv.bEd()||cJO).maximize){this.DY.ciH();this.DY.bqd()}else{this.DY.ciI()}}bj.cGp("/api/point/retrieve",{},this.cJG.byB(this))}else{this.cdm.style.display="none";this.ccf[0].style.display="none";bm.cj(this.ccf,function(bk){this.cdm.appendChild(bk)},this);this.cdm.style.display="";bj.gM("/?/frame/side/",{cmd:"leftrefresh",data:blZ});this.cdm.firstElementChild.style.display=""}}}();byx.eR=function(){bm.cj(this.ccf,function(bk){byA.kO(bk)},this)};byx.bfH=function(){var cq=this.dv.fF();cq.updateFiles=[];this.dv.nB(cq)};byx.bfr=function(byy){nm.log.dE(nm.log.ACTION.CLOSE);bD.bJo("mini_player");byy.action="confirm";var cq=this.dv.fF(),bJl=bJl=cq.closeFrame;if(bJl.remind){if(bJl.close=="tray"){bD.bJo()}else{this.hA({data:{cmd:"checkbeforeexit"}})}}else{this.xX();if(!!this.bLR)this.bLR.bQ();this.bLR=bR.bMP.bG({onok:this.bOU.byB(this)});this.bLR.dD()}};byx.bOU=function(byy){if(byy.bOR){bD.bJo()}else{this.hA({data:{cmd:"checkbeforeexit"}})}};byx.Nh=function(){bD.uH(localCache.cg("window_name"))};byx.bfu=function(){nm.log.dE(nm.log.ACTION.MINI_BTN_PAGE);this.Vq()};byx.Vq=function(byy){localCache.bSX("window_name","mini_player");bD.bJo();bD.bBd("mini_player");bD.bX("player.setAlwaysOnTop",bj.cL(11,function(cJN){return!!cJN.hw().minitop}));this.Nn({status:"mini"});nm.log.cNF()};byx.xX=function(dS){if(!!dS&&dS==1){if(!this.eh)this.eh=bp.cG.bG();var cA=this.eh.gB().from;if(!!cA.fm){if("#/m/fm/"!=location.hash){location.hash="#/m/fm/"}}else{bi.bF(document,"menuaction",{id:100})}}localCache.bSX("window_name","");this.Nn({status:"main"});if(dS!=1)bD.bJo("mini_player");setTimeout(function(dS){if(dS==1)bD.bJo("mini_player");bD.uH()}.byB(this,dS),dS==1?500:25)};byx.Nn=function(byy){byy=byy||cJO;var cpr=!1,iA=1050,bzp=byy.status;if(this.cvJ==bzp)return;this.cvJ=bzp;switch(bzp){case"mini":cpr=!0;break;case"main":break;case"hide":cpr=!0;break;case"show":break;case"zoom":break;case"maximize":byA.bK(this.bmd,"f-dn");byA.bK(this.bmT,"f-dn");this.bEl("maximize",!0);break;case"minimize":cpr=!0;iA=1052;localCache.bSX("window_name","");break;case"restore":byA.bJ(this.bmd,"f-dn");byA.bJ(this.bmT,"f-dn");this.bEl("resolution",byy.width,byy.height);this.bEl("maximize",!1);break}if(cpr){if(!localCache.cg("mq-hide")){localCache.bSX("mq-hide",!0);byA.bK(document.body,"mq-hide")}if(this.cvJ=="minimize"){bj.cnk(this.cmi.byB(this),500,"main-page-show-reset-thumbnail")}bj.gM("/m/disc/rec/",{cmd:"mainPageHide"})}else{if(localCache.cg("mq-hide")){localCache.bSX("mq-hide",!1);byA.bJ(document.body,"mq-hide");bj.cnk(this.cmi.byB(this),500,"main-page-show-reset-thumbnail")}bj.gM("/m/disc/rec/",{cmd:"mainPageShow"})}if(localCache.cg("window_name")=="mini_player"){iA=1051}this.bfK(iA);this.bLQ(bzp)};byx.cmi=function(){if(localCache.cg("mq-hide")&&this.cvJ!="minimize")return;var cmO="播放",cnd="play";if(ctl.cefPlayer.cek()){cmO="暂停";cnd="pause"}bD.bX("app.setThumbnail",{btnLeft:{id:300,tooltip:"上一首",url:bj.uZ("prev")},btnMiddle:{id:301,tooltip:cmO,url:bj.uZ(cnd)},btnRight:{id:302,tooltip:"下一首",url:bj.uZ("next")}})};byx.bfK=function(){var yo=[1050,1051,1052],bCi=["icn_normal","icn_max","icn_min"];return function(bo){var gT=bD.dV(105);bm.cj(yo,function(iA,bs){var bl=bD.dV(iA);if(iA==bo){gT.text=bl.text;gT.image_path=bj.byN(bCi[bs]);bl.check_image_path=bj.byN("icn_checked")}else{delete bl.check_image_path}})}}();byx.lW=function(byy){switch(byy.id){case 1050:this.DY.Qv();this.xX();return;case 1051:this.Vq();return;case 1052:this.DY.Qt();bD.bJo("mini_player");return;case 201:case 1053:this.xX();return;case 1006:this.xX();bj.gM("/?/frame/brief/",{cmd:"min"});dispatcher.dr("/m3/setting/");return;case 330007:bj.cL(11,function(cJN){cJN.cud()});bj.gM("/m3/setting/",{cmd:"refresh"});return;case 330001:bj.cL(11,function(cJN){var cq=cJN.yY();cq.lineMode=!cq.lineMode;bj.cfr(cq.lineMode,cq.lineMode?cq.oneLineAlign:cq.doubleLineAlign);cJN.bxJ(cq)});bj.gM("/m3/setting/",{cmd:"refresh"});return;case 330100:case 330101:case 330102:case 330103:var bvp=byy.id-330100;bj.cL(11,function(cJN){var cq=cJN.yY();if(!!cq.lineMode){cq.oneLineAlign=bvp}else{cq.doubleLineAlign=bvp}bj.cfr(cq.lineMode,cq.lineMode?cq.oneLineAlign:cq.doubleLineAlign);cJN.bxJ(cq)});bj.gM("/m3/setting/",{cmd:"refresh"});return;case 330020:case 330030:case 330040:case 330050:case 330060:case 330070:var byF={330020:{prein:"酷炫黑",skin:"default"},330030:{prein:"可爱粉",skin:"pink"},330040:{prein:"清新绿",skin:"green"},330050:{prein:"天际蓝",skin:"blue"},330060:{prein:"土豪金",skin:"golden"},330070:{prein:"自定义",skin:"custom"}}[byy.id];if(!byF)return;bj.cL(11,function(cJN){var cq=cJN.yY();if(cq.prein==byF.prein)return;var ml=byF.prein=="自定义",jU=cq.color,caQ=ml?jU.customcolor||jU.val:cJN.cpR(byF.skin);if(!caQ)return;jU.isCustom=ml?!0:!1;if(ml&&!jU.customcolor)jU.customcolor=caQ;jU.val=caQ.concat();cq.prein=byF.prein;cq.outline=cJN.cbl(byF.prein);cq.color.isUse=true;bD.bX("player.setOutlineColor",cq.outline[0],cq.outline[1]);bD.bX("player.setLRCColor",caQ[0],caQ[1],caQ[2],caQ[3]);cJN.bxJ(cq);bj.gM("/m3/setting/",{cmd:"refresh"})});return;case 330003:dispatcher.dr("/m3/setting/?to=desklrc&time="+ +(new Date));this.xX();return;case 203:case 330004:var cuG=!1;if(localCache.cg("show_lyric_type")!=0){cuG=!0;bj.cL(11,function(cJN){var cq=cJN.hw();bj.gM("/?/frame/foot/player/","closedesktoplrc");cq.showLyricType=0;cJN.bI(cq);bj.gM("/?/frame/foot/player/","synclyrictype");bj.gM("/?/frame/foot/player/","closedesktoplrc")})}if(!!localCache.cg("desktop_lyric_close")){bj.gM("/?/frame/foot/player/","opendesktoplrc");nm.log.dE("click",null,null,{type:"desklrc",value:"on",source:byy.id==330004?"tray":"mini"})}else{bj.gM("/?/frame/foot/player/","closedesktoplrc");nm.log.dE("click",null,null,{type:"desklrc",value:"off",source:byy.id==330004?"tray":"mini"})}if(cuG){bj.gM("/m3/setting/",{cmd:"refresh"})}return;case 204:case 330005:case 330015:if(!!localCache.cg("desktop_lyric_lock")){this.cbm("unlock");if(byy.id!=330015)nm.log.dE("click",null,null,{type:"unlock",source:byy.id==330005?"tray":"mini"})}else{this.cbm("lock");if(byy.id!=330015)nm.log.dE("click",null,null,{type:"lock",source:byy.id==330005?"tray":"mini"})}return}};byx.bfv=function(byy){var byF=byy["ext_req_conf"],oi=(byF||cJO).key;logger.warn("requesterror|"+oi+"|"+bj.ciE(byy),"frame/frame.js","__onRequestError");if((byy||cJO).code==301){bj.bsu(oi)}else if((byy||cJO).code==302){bj.bNt(oi)}};byx.hA=function(bn){if(!bn||!bn.data)return;switch(bn.data.cmd){case"switchtomain":this.xX();break;case"init":this.bEh++;if(this.bEh>=2)this.bEk();break;case"updatehotkey":this.Nm();break;case"test":this.cbm("setting");break;case"pushconnected":this.cmh(1);break;case"detail":this.cbm("detail");break;case"checkbeforeexit":var dS=bj.cL(4,function(cJN){return(cJN.cAd()||cJO).state});if(dS==1){this.xX();if(this.cDA)this.cDA.bQ();this.cDA=bR.pE.bG({title:"关闭提示",message:"正在添加本地音乐。现在退出，手机将无法同步并播放歌单中的本地音乐╮(╯▽╰)╭",okText:"现在退出",clText:"再等等",onok:this.cDB.byB(this)}).dD()}else{this.cDB()}break}if(bn.data.eventType=="localResize"){this.bTC=bn.data.inLocal;this.bTD=bn.data.rminw-10,this.bTE=bn.data.rnode}};byx.cDB=function(){bD.bAA()};byx.Nm=function(){var cq=ctl.hotkey.pO();if(!!cq&&cq.shortcut){var bs=bm.eT(cq.shortcut,function(bl){return bl.name=="mini_max"});if(bs>-1&&cq.shortcut[bs].notconflict){var byY=cq.shortcut[bs].val;this.Vn.title="mini模式（"+byY+"）";bD.bX("player.updateTooltips","完整模式（"+byY+"）")}else{this.Vn.title="mini模式";bD.bX("player.updateTooltips","完整模式")}}};byx.bfx=function(byy){this.ri.begin=!0;this.ri.x=byy.x;this.ri.y=byy.y;this.bDZ();if(!this.ri.mask){var bk=document.createElement("div");bk.style.cssText="position:absolute;left:0;top:0;width:100%;height:100%;cursor:e-resize;z-index:99999;";this.ri.mask=bk}this.bLQ("resize");document.body.appendChild(this.ri.mask)};byx.bLQ=function(bq){bj.gM("/m/playlist/",{type:bq});bj.gM("/m/program/",{type:bq});bj.gM("/m/album/",{type:bq});bj.gM("/m/local",{type:bq});bj.gM("/m/offline/complete/",{type:bq});bj.gM("/m/offline/download/",{type:bq});bj.gM("/m/offline/program/",{type:bq})};byx.bfy=function(byy){if(!this.ri.begin)return;var bze=byy.x;if(this.bTC){if(this.bTE.offsetWidth<this.bTD){if(bze-this.ri.now>0)return}}if(bze>=this.ri.min&&bze<=this.ri.max)this.byn(bze);else if(bze<this.ri.min&&this.ri.now>this.ri.min)this.byn(this.ri.min);else if(bze>this.ri.max&&this.ri.now<this.ri.max)this.byn(this.ri.max)};byx.bfz=function(byy){if(!this.ri.begin)return;this.ri.begin=!1;this.bLQ("resizeEnd");this.ri.mask.parentNode.removeChild(this.ri.mask);nm.log.dE("stretch",null,null,{type:"leftpanel"})};byx.bmY=function(){this.bDV();this.bDW(!0);bj.gM("/?/track/",{cmd:"scroll"})};byx.byn=function(bze){if(this.ri.now==bze)return;if(bze<0)return;this.ri.now=bze;this.bfp.style.width=bze+"px";this.bfo.style.left=bze+1+"px";var bh={cmd:"resize",width:bze};bj.gM("/?/frame/brief/",bh);bj.gM("/?/frame/top/",bh);this.bDW();this.bEl("side",bze)};byx.bDZ=function(){this.bDV();this.ri.max=Math.max(this.ri.offset-this.ri.mnminw,this.ri.minmax)};byx.bDV=function(){this.ri.offset=Math.max(document.body.offsetWidth,1022)-3};byx.bDW=function(bEa){var bDX=this.ri.offset-this.ri.now;if(!!bEa&&bDX<this.ri.mnminw){this.byn(this.ri.offset-this.ri.mnminw);return}if(bDX>=this.ri.mnmaxw){var ek=[],coI=this.ri.allclazz;for(var i=0,ii=this.ri.mnmaxws.length;i<ii;i++){if(bDX>=this.ri.mnmaxws[i]){ek.unshift("mq-"+(this.ri.mnmaxws[i]-60));coI=coI.replace(ek[0],"");for(var j=i+1,jj=this.ri.mnmaxws.length;j<jj;j++){ek.unshift("mq-"+(this.ri.mnmaxws[j]-60));coI=coI.replace(ek[0],"")}break}}byA.bEq(document.body,coI,ek.join(" "));this.ri.mq=!0}else{if(!this.ri.mq)return;byA.bJ(document.body,this.ri.allclazz);this.ri.mq=!1}};byx.bEl=function(bq,bze,hO){var bEb=this.dv.bEd();if(!bEb)return;switch(bq){case"resolution":if(!bze||!hO)return;if(bEb.resolution.width==bze&&bEb.resolution.height==hO)return;this.dv.bEo("resolution",{width:bze,height:hO});break;case"side":if(bEb.side.width==bze)return;this.dv.bEo("side",{width:bze});break;case"maximize":this.dv.bEo("maximize",!!bze);break}};byx.bEk=function(){var bEb=this.dv.bEd(),cr=bEb.resolution.width,bze=bEb.side.width;this.ri.offset=Math.max(document.body.offsetWidth,1022,cr)-3;if(this.ri.offset-bze<this.ri.mnminw){bze=Math.max(this.ri.minmax,this.ri.offset-this.ri.mnminw)}this.byn(bze);bD.bX("winhelper.loadingFinished")};byx.Kv=function(){var cq=this.dv.fF(),rn=[],kf=["mymusic","download","windowsmedia","itunes","cloudmusic","kugou","baidumusic"];if(cq&&cq.localdir){cq.localdir.forEach(function(bl){if(bl&&(!bl.hide||cvv(bl.name)))rn.push(bl)});cq.localdir=rn;this.dv.nB(cq)}bj.cL(4,function(cJN){cJN.bPf()});function cvv(bN){return bm.eT(kf,function(WA){if(bN.indexOf(WA)!=-1)return true})!=-1}qC.Ej.kE().dy()};byx.cdo=function(KA){var jo=this.dv.yY();jo.font.size=KA;this.dv.bxJ(jo);var bIQ=jo.font;dispatcher.gM({to:"/m3/setting/",from:"",data:{cmd:"ondesklrcfschanged",size:KA},mode:0})};byx.cbm=function(bq){switch(bq){case"detail":if(!this.eh)this.eh=bp.cG.bG();var cA=this.eh.gB().from;if(!!cA.fm){this.xX();if("#/m/fm/"!=location.hash){location.hash="#/m/fm/"}break}nm.log.dE("songbtn",null,null,{type:"desklrc"});this.xX(1);break;case"playprev":break;case"play_pause":break;case"playnext":break;case"setting":this.cdp();bD.NH(localCache.cg("desktop_lyric_menu"),3);nm.log.dE("click",null,null,{type:"setup",source:"desklrc"});break;case"lock":bD.bX("player.setLock",!0);var Og=bD.dV(330005);Og.text="解锁桌面歌词";Og.image_path=bj.byN("icn_unlock");localCache.bSX("desktop_lyric_lock",!0);nm.log.dE("click",null,null,{type:"lock",source:"desklrc"});bj.cL(11,function(cJN){var tF=cJN.hw();if(!tF)return;tF.lockLyric=!0;cJN.bI(tF)});break;case"unlock":bD.bX("player.setLock",!1);var Og=bD.dV(330005);Og.text="锁定桌面歌词";Og.image_path=bj.byN("icn_lock");localCache.bSX("desktop_lyric_lock",!1);bj.cL(11,function(cJN){var tF=cJN.hw();if(!tF)return;tF.lockLyric=!1;cJN.bI(tF)});break;case"offset_back":nm.log.dE("click",null,null,{type:"adjustlrc",source:"desklrc"});bj.gM("/?/frame/foot/player/","ajustlrcoffsetback2");break;case"offset_forward":nm.log.dE("click",null,null,{type:"adjustlrc",source:"desklrc"});bj.gM("/?/frame/foot/player/","ajustlrcoffsetforward2");break;case"close":nm.log.dE("click",null,null,{type:"desklrc",value:"off",source:"desklrc"});bj.gM("/?/frame/foot/player/","closedesktoplrc");break}};byx.cdp=function(){if(!localCache.cg("desktop_lyric_menu")){localCache.bSX("desktop_lyric_menu",{content:[bD.dw({text:"总在最前",menu_id:330007,enable:!0,image_path:bj.byN("icn_top")}),bD.dw({text:"单行模式/双行模式",menu_id:330001,enable:!0}),bD.dw({text:"对齐方式",menu_id:330006,enable:!0,children:[bD.dw({text:"居中",menu_id:330100,enable:!0,image_path:bj.byN("icn_align_0")}),bD.dw({text:"左右分离",menu_id:330101,enable:!0,image_path:bj.byN("icn_align_1")}),bD.dw({text:"左对齐",menu_id:330102,enable:!0,image_path:bj.byN("icn_align_2")}),bD.dw({text:"右对齐",menu_id:330103,enable:!0,image_path:bj.byN("icn_align_3")})]}),bD.dw({text:"更换配色",menu_id:330002,enable:!0,image_path:bj.byN("icn_font"),children:[bD.dw({text:"自定义",menu_id:330070,enable:!0}),bD.dw({text:"酷炫黑",menu_id:330020,enable:!0}),bD.dw({text:"可爱粉",menu_id:330030,enable:!0}),bD.dw({text:"清新绿",menu_id:330040,enable:!0}),bD.dw({text:"天际蓝",menu_id:330050,enable:!0}),bD.dw({text:"土豪金",menu_id:330060,enable:!0})]}),bD.dw({separator:!0}),bD.dw({text:"更多设置",menu_id:330003,enable:!0,image_path:bj.byN("icn_more")})],hotkey:null})}var cq=bj.cL(11,function(cJN){return cJN.yY()});if(cq){var ccg=cq.lineMode,Og=bD.dV(330001),ckA=cq.noTop,ckp=bD.dV(330007);Og.text=ccg?"双行模式":"单行模式";Og.image_path=bj.byN(ccg?"icn_twoline":"icn_oneline");var cjH=bD.dV(330101);if(ckA){delete ckp.check_image_path}else{ckp.check_image_path=bj.byN("icn_checked")}if(!ccg){cjH.menu=!0;var bvp=cq.doubleLineAlign||0}else{cjH.menu=!1;var bvp=cq.oneLineAlign||0}cjH=bD.dV(330006);cjH.image_path=bj.byN("icn_align_"+bvp);for(var i=0;i<=3;i++){var cko=bD.dV(330100+i);if(i==bvp){cko.check_image_path=bj.byN("icn_checked")}else{delete cko.check_image_path}}var brI=cq.prein||"自定义";for(var i=2;i<=7;i++){var cbG=bD.dV(33e4+i*10);if(cbG.text==brI){cbG.check_image_path=bj.byN("icn_checked")}else{delete cbG.check_image_path}}}};byx.cfe=function(fz){var gi="netease",Sz=/^\s*$/;if(fz&&fz.main&&fz.sub&&!fz.main.match(Sz)&&!fz.sub.match(Sz)){gi=fz.main.trim()+fz.sub.trim()}nm.log.dE("active",null,null,{source:gi});bD.bX("browser.setCookie",APP_CONF.domain,"channel",gi);this.cmh(0)};byx.cmh=function(){var cmf=!1,cme=!1,cQT=!1,hg=!1,IM=!1;return function(bq){if(bq==0){cmf=!0;cme=bj.cL(14,function(cJN){return cJN.cmk()})}else if(bq==1){cme=!0}else if(bq==2){cQT=!0}logger.info({type:bq,cookieSetted:cmf,pushConnected:cme,check:hg},"frame/farme/index.js","__checkUpdate");if(!hg&&cmf&&cQT){hg=!0;if(cme){IM=!0}this.beS.sX(APP_CONF.domain+"/api/pc/version",null,!0)}else if(!IM&&!!hg&&cmf&&cQT&&cme){IM=!0;this.beS.sX(APP_CONF.domain+"/api/pc/version",null,!0)}}}();byx.cJG=function(bn){if(bn&&bn.data&&bn.data.length){bm.cj(bn.data,function(bl){if(bl&&bl.id){switch(bl.id){case 4:APP_CONF.point["lrc"]=bl.pointCount||0;break;case 5:APP_CONF.point["lrc-translate"]=bl.pointCount||0;break;case 6:APP_CONF.point["lrc-scroll"]=bl.pointCount||0;break}}})}};byx.cOy=function(byy){switch((byy||cJO).action){case"minimax":if(!localCache.cg("window_name")){bi.bF(this.Vn,"click")}else{this.xX()}break;case"closewindow":this.DY.bqk();break}};byx.VV=function(byy){var dY=byy.path||"",biZ=dY.substr(0,4);if(biZ=="/m3/"){if(this.ip.player.parentNode!=this.cdm){this.cdm.appendChild(this.ip.player)}if(this.ip.fmp.parentNode!=this.cdm){this.cdm.appendChild(this.ip.fmp)}byA.bK(this.ip.lyric.childNodes[0],"m-lyric-set");if(this.ip.lyric.parentNode!=this.cdm){this.cdm.appendChild(this.ip.lyric)}}else if(biZ=="/m2/"){if(this.ip.player.parentNode==this.cdm){byA.kO(this.ip.player)}if(this.ip.fmp.parentNode==this.cdm){byA.kO(this.ip.fmp)}if(this.ip.lyric.parentNode==this.cdm){byA.kO(this.ip.lyric)}}else{if(this.ip.player.parentNode!=this.cdm){this.cdm.appendChild(this.ip.player)}if(this.ip.fmp.parentNode!=this.cdm){this.cdm.appendChild(this.ip.fmp)}byA.bJ(this.ip.lyric.childNodes[0],"m-lyric-set");if(this.ip.lyric.parentNode!=this.cdm){this.cdm.appendChild(this.ip.lyric)}}};bj.cU("/m",bC.nN)})()</textarea>
<meta charset="utf-8"/> <textarea name="txt" id="m-fply-module"> <div id="main-player" class="m-player f-os" data-dd-box="100"> <div title="上一首" class="btnc btnc-prv f-vc f-cp"> <svg class="svg"><use xlink:href="orpheus://orpheus/style/res/svg/btmbar.sp.svg#prev"></use></svg> </div> <div title="播放" class="btnp btnp-play f-vc f-cp"> <svg class="svg"><use xlink:href="orpheus://orpheus/style/res/svg/btmbar.sp.svg#play"></use></svg> </div> <div title="下一首" class="btnc btnc-nxt f-vc f-cp"> <svg class="svg"><use xlink:href="orpheus://orpheus/style/res/svg/btmbar.sp.svg#next"></use></svg> </div> <time class="now">00:00</time> <div class="prg prg-ply f-vc"> <span class="track j-flag"></span> <span class="download j-flag" style="width:0%"></span> <span class="has" style="width:0%"> <span class="ctrl j-flag"></span> </span> </div> <time class="all">00:00</time> <div class="spk f-vc f-cp" title="静音"> <svg class="svg"><use xlink:href="orpheus://orpheus/style/res/svg/btmbar.sp.svg#voice"></use></svg> </div> <div title="音量调节" class="prg prg-spk f-vc"> <span class="track j-flag"></span> <div class="hastrack"> <span class="has j-flag" style="width:0%"></span> </div> <div class="ctrlctrak" style="width:0%"><span class="ctrl j-flag"></span></div> </div> <div class="type f-vc f-cp"><svg class="svg"><use xlink:href="orpheus://orpheus/style/res/svg/btmbar.sp.svg#order"></use></svg></div> <div class="word f-vc f-cp" title="打开歌词"><svg class="svg"><use xlink:href="orpheus://orpheus/style/res/svg/btmbar.sp.svg#lrc"></use></svg></div> <div class="list f-vc f-cp" title="打开播放列表" data-log-action="page" data-log-type="playlist" data-log-source="main" data-da-event="b235"> <span class="icon f-fl"><svg class="svg"><use xlink:href="orpheus://orpheus/style/res/svg/btmbar.sp.svg#state_playlist"></use></svg></span> <span class="num f-fl f-ff1">500</span> <div class="u-arrlay u-arrlay-dn m-queuenotify u-arrlay-opacity f-dn">已添加到播放列表</div> </div> </div> </textarea> <textarea name="ntp" id="m-player-queue"> <div class="listhd"> <div class="tab f-vhc j-flag"> <span class="btn f-cp">播放列表</span> <span class="btn f-cp">历史记录</span> </div> <span class="close u-icn u-icn-laycls f-fr f-cp j-flag"> <svg><use xlink:href="orpheus://orpheus/style/res/svg/btmbar.sp.svg#close"></use></svg> </span> </div> <div class="listsub"> <span class="f-fl s-fc3 j-flag">共38首</span> <span class="clear f-fr f-cp s-fc3 j-flag"> <svg><use xlink:href="orpheus://orpheus/style/res/svg/btmbar.sp.svg#delete"></use></svg>清空 </span> <span class="fav f-fr f-cp s-fc3 j-flag" data-res-type="14" data-res-action="fav" data-res-id="1" data-log-action="pcclick" data-log-type="addall" data-log-source="playlist"> <svg><use xlink:href="orpheus://orpheus/style/res/svg/btmbar.sp.svg#fav"></use></svg>收藏全部 </span> </div> <div class="listbd j-flag"><ul class="f-cb j-flag" style="counter-reset:tlistorder 0" tabindex="1000" data-dd-box="101" data-res-type="4" data-res-from="-15" data-res-data="" data-res-shortcut=""></ul></div> <div class="listbd m-empty f-dn j-flag"><div class="u-load s-fc1">载入中...</div></div> </textarea> <textarea name="js">(function(){var byz=NEJ.P,cJO=NEJ.O,co=NEJ.F,byA=byz("nej.e"),bi=byz("nej.v"),bU=byz("nej.ut"),bz=byz("nej.ui"),bj=byz("nm.x"),bp=byz("nm.d"),bR=byz("nm.l"),byx,byD;var dbl=20,cVw=28,dds=false;bR.Vw=NEJ.C();byx=bR.Vw.bS(bz.hl);byx.eo=function(){this.Yl="m-player-queue"};byx.byL=function(){this.byO();var gR=byA.bV(this.bA,"j-flag");this.bfX=gR.shift();this.bga=gR.shift();this.daY=gR.shift();this.bfZ=gR.shift();this.bCh=gR.shift();this.MQ=gR.shift();this.ddr=gR.shift();this.HM=gR.shift();this.cu={parent:this.ddr,shortcutNode:this.ddr,wf:!0,selector:{parent:this.ddr},mopt:{limit:500,cache:{klass:bp.cG,lkey:"track_queue"},item:{from:{fid:-5}},onafterlistload:function(byy){if(!this.byS||!this.byS.cw){this.cVK(byy,!0);return}if(this.byS.cw.fY<this.ix){}else{logger.info("playlist loaded","queue.js")}}.byB(this),onafterlistrender:function(byy){if(!this.byS||!this.byS.cw){return}if(this.byS.cw.fY>=this.ix){if(byy.options.key=="track_queue"){var dec=this.byS.OS;if(dec!==undefined){this.MQ.scrollTop=(dec-7)*cVw+10}else{this.MQ.scrollTop=this.MQ.scrollHeight}}else{}this.cVK({})}else{if(this.ix/this.byS.cw.fY>5){window.requestAnimationFrame(this.byS.Ef.byB(this.byS))}else{this.byS.Ef()}}}.byB(this),onemptylist:function(byy){this.cVK({})}.byB(this)}};this.eZ={list:byA.gj(this.bfX),index:0,selected:"z-sel",onchange:this.Av.byB(this)};this.deb=byA.iz("style");document.head.appendChild(this.deb);this.dfo=0;bi.bM(this.bCh,"click",this.oJ.byB(this,0));bi.bM(this.bfZ,"click",this.oJ.byB(this,1));bi.bM(this.bga,"click",this.oJ.byB(this,2));bi.bM(this.MQ,"scroll",this.cVK.byB(this));bi.bM(window,"resize",this.cVK.byB(this))};byx.cJ=function(blZ){this.cK(blZ);if(!!localCache.cg("detail-max"))byA.bK(this.bA.parentNode,"z-high");else byA.bJ(this.bA.parentNode,"z-high");this.dO([[bp.cG,"listchange",this.ku.byB(this)]]);if(this.zo){this.zo.bQ();delete this.zo}this.zo=bU.cBY.bG(this.eZ);this.zo.AX(0,!0)};byx.dH=function(){if(this.zo){this.zo.bQ();delete this.zo}this.dI();this.bzJ()};byx.Av=function(byy){if(!byy||byy.last==null)return;this.bzJ();if(byy.index==0){byA.bJ(this.bCh,"f-dn");byA.bT(this.MQ,"ddBox","101");this.cu.mopt.cache.lkey="track_queue";this.cu.mopt.item.from.fid=-5}else{byA.bK(this.bCh,"f-dn");byA.bT(this.MQ,"ddBox","");this.cu.mopt.cache.lkey="track_history";this.cu.mopt.item.from.fid=-15;nm.log.dE(nm.log.ACTION.PC_CLICK,null,null,"history")}this.cu.mopt.item.hostId=localCache.cF("host.profile.userId");this.ku({key:this.cu.mopt.cache.lkey});this.MQ.scrollTop=0;this.byS=bj.lo.bG(this.cu);window.requestAnimationFrame(function(){this.byS.Ef()}.byB(this))};byx.bzJ=function(){if(!!this.byS){this.byS.bQ();delete this.byS}};byx.oJ=function(bq,byy){switch(bq){case 0:if(this.bJn){document.action({type:14,action:"guidefav",id:-1});this.crO();bi.bQd(byy)}break;case 1:if(this.cu.mopt.cache.lkey=="track_history"){dc.track.bjM()}else{dc.track.btp()}nm.log.dE(nm.log.ACTION.PC_CLICK,null,null,"clear");break;case 2:bj.gM("/?/frame/foot/player/","onclose");break}};byx.ku=function(byy){if(!byy||byy.key!=this.cu.mopt.cache.lkey)return;var di=Math.max(0,dc.track.hQ(byy.key));this.ix=Math.min(APP_CONF.max_play_queue,di);this.daY.innerText="总"+di+"首";if(di>0){byA.bEq(this.bCh,"z-dis","f-cp");byA.bEq(this.bfZ,"z-dis","f-cp")}else{byA.bEq(this.bCh,"f-cp","z-dis");byA.bEq(this.bfZ,"f-cp","z-dis")}};byx.cty=function(){if(!this.bJn){this.bJn=byA.xQ(byA.gy("m-xwgt-new-queue-guide"));this.bA.appendChild(this.bJn)}};byx.ei=function(byy){bk=bi.cR(byy,"d:action");if(bk){switch(byA.bT(bk,"action")){case"notfav":var bdn=dc.track.byI("next_play_queue");dc.track.rA.apply(dc.track,bdn);dc.track.eN("next_play_queue");this.crO();bi.bQd(byy);break;case"closeguide":this.crO();bi.bQd(byy);break}}};byx.crO=function(){byA.lG(this.bJn);delete this.bJn;dc.setting.csa("new_queue_guide",!0)};byx.ded=function(cV,bHq){var bzv=this.MQ.scrollTop,dee=this.MQ.offsetHeight,dea,ddZ;var jm=Math.max(bzv/cVw>>0,0),fs=Math.ceil((bzv+dee)/cVw),di=this.ix;jm=(jm/dbl/2>>0)*2;fs=Math.ceil(fs/dbl/2)*2;bzv=Math.max(jm*dbl*cVw,0);dea=cVw*di;ddZ=Math.max(dea-fs*dbl*cVw,0);if(bHq){this.MQ.style.pointerEvents="none";byA.bK(this.MQ,"f-vh");byA.bJ(this.HM,"f-dn")}else{this.MQ.style.pointerEvents="";byA.bK(this.HM,"f-dn");byA.bJ(this.MQ,"f-vh")}this.deb.textContent=".m-playlist ul{padding:"+bzv+"px 0 "+ddZ+"px 0} .m-playlist ul .pl-di:nth-of-type(-1n+"+jm+"){display:none;} .m-playlist ul .pl-di:nth-of-type(1n+"+(fs+1)+"){display:none;}";dds=false};byx.cVK=function(byy,bHq){if(!dds){dds=true;window.requestAnimationFrame(this.ded.byP(this,bHq))}}})();
(function(){var byz=NEJ.P,cJO=NEJ.O,co=NEJ.F,byA=byz("nej.e"),bi=byz("nej.v"),bm=byz("nej.u"),bU=byz("nej.ut"),gD=byz("nm.w"),bj=byz("nm.x"),byx;gD.cNW=NEJ.C();byx=gD.cNW.bS(bU.fQ);byx.byR=function(){this.bEc();this.fM=.1;this.cLn=!1;this.cFU=1;this.cNa=[["loadstart",this.cgZ.byB(this)],["canplay",this.cbx.byB(this)],["progress",this.tU.byB(this)],["play",this.cha.byB(this)],["pause",this.chb.byB(this)],["waiting",this.chc.byB(this)],["playing",this.chd.byB(this)],["seeked",this.che.byB(this)],["volumechange",this.chf.byB(this)],["stalled",this.bXr.byB(this)],["ended",this.bXu.byB(this)],["error",this.ej.byB(this)],["abort",this.chg.byB(this)]]};byx.cJ=function(blZ){this.cK(blZ)};byx.dH=function(){this.cMD();this.dI()};byx.cNX=function(blZ){this.cMD();this.cFz=blZ.playid;this.cwi=document.createElement("audio");this.cFE=!0;this.cFM=!1;this.li=!blZ.pause;this.Gn=blZ.duration||0;this.cMZ();this.cFG(this.li,!0);this.cFK();this.cwi.src=blZ.url};byx.cMZ=function(){var cJw=[];bm.cj(this.cNa,function(bl){cJw.push([this.cwi].concat(bl))},this);this.dO(cJw)};byx.cMD=function(){this.RO();if(this.cwi)this.cwi.src="";delete this.cwi;this.cFz=0};byx.cFG=function(dk,AK){if(this.li==dk&&!AK)return;logger.warn("??? __doPlayingStateChange",dk);this.li=dk;this.bF("onplayingstatechange",{playId:this.cFz,playing:this.li})};byx.cFK=function(){logger.warn("??? __doLoadingStateChange",this.cFM||this.cFE);this.bF("onloadingstatechange",{playId:this.cFz,loading:this.cFM||this.cFE})};byx.cgZ=function(){this.cFE=!0;this.cFM=!1;this.cFK()};byx.cbx=function(){this.Gn=this.cwi.duration;this.cFE=!1;this.cFK();if(this.li){this.vT()}else{this.NT()}};byx.bQd=function(){if(!this.cFz)return;var cFA=this.cFz;this.cFG(!1,!0);this.cMD();this.bF("onplayend",{playId:cFA,reason:"call"})};byx.vT=function(){if(!this.cFz)return;logger.warn("??? player._$resume");if(!this.cFE){this.cwi.play()}this.cFG(!0)};byx.NT=function(){if(!this.cFz)return;logger.warn("??? player._$pause");if(!this.cFE){this.cwi.pause()}this.cFG(!1)};byx.cha=function(){this.cFG(!0)};byx.chb=function(){this.cFG(!1)};byx.tU=function(byy){};byx.chc=function(){this.cFM=!0;this.cFK()};byx.chd=function(){this.cFM=!1;this.cFK()};byx.che=function(){};byx.bXr=function(){};byx.cHX=function(){if(this.cLn){this.Fu(this.cNe||.1)}else{this.cNe=this.cFU;this.Fu(0)}};byx.NR=function(bCH){this.cLn=!!bCH;this.bF("onmutechange",{mute:this.cLn})};byx.Fu=function(sM){this.cwi.volume=sM};byx.NO=function(cH){this.Fu(this.cFU+(cH||0)*this.fM)};byx.chf=function(){this.cFU=this.cwi.volume;this.bF("onvolumechange",{volume:this.cwi.volume})};byx.cek=function(){return!!this.cFz&&this.li};byx.bXu=function(){if(!this.cFz)return;this.cFG(!1);this.bF("onplayend",{playId:this.cFz,reason:"end"})};byx.ej=function(){if(!this.cFz)return;this.cFG(!1);this.bF("onplayend",{playId:this.cFz,reason:"err",code:this.cwi.error.code})};byx.chg=function(){};byz("ctl").html5Player=gD.cNW.bG()})();
(function(){var byz=NEJ.P,cJO=NEJ.O,co=NEJ.F,dz=NEJ.R,byA=byz("nej.e"),bi=byz("nej.v"),bm=byz("nej.u"),bD=byz("nej.cef"),bU=byz("nej.ut"),bTG=byz("nm.c"),bp=byz("nm.d"),bj=byz("nm.x"),byx;if(!!bTG.bpf)return;bTG.bpf=NEJ.C();byx=bTG.bpf.bS(bTG.cGP);byx.byR=function(){this.bEc();this.cFz="";this.bCN=null;ctl.html5Player.bgM("onmutechange",this.Yq.byB(this,"onmutechange"));ctl.html5Player.bgM("onvolumechange",this.Yq.byB(this,"onvolumechange"));ctl.html5Player.bgM("onpositionchange",this.Yq.byB(this,"onpositionchange"));ctl.html5Player.bgM("onloading",this.Yq.byB(this,"onloading"));ctl.html5Player.bgM("onplayingstatechange",this.Yq.byB(this,"onplayingstatechange"));ctl.html5Player.bgM("onloadingstatechange",this.Yq.byB(this,"onloadingstatechange"));ctl.html5Player.bgM("onplayend",this.cFO.byB(this));this.eh=dc.track;this.dv=dc.setting;this.dO([[bTG.Sk,"before_switch_player",this.YT.byB(this,"before_switch_player")],[bTG.Sk,"after_switch_player",this.YT.byB(this,"after_switch_player")]])};byx.cJ=function(blZ){this.cK(blZ)};byx.dH=function(){this.dI()};byx.Jj=function(){return ctl.player.cLE()==ctl.tempPlayer};byx.rA=function(){if(this.cFz){ctl.player.cHW(this);this.vT()}else{if(this.bCN){if(this.bCN.info){this.Dr(this.bCN.info)}else{this.coD(this.bCN.track)}}}};byx.Dr=function(blZ){if(this.cFz!=blZ.playid){this.bQd()}this.cFz=blZ.playid;ctl.player.cHW(this);ctl.html5Player.cNX(blZ)};byx.vT=function(cA){if(!this.Jj())return;ctl.html5Player.vT(cA)};byx.NT=function(cA){if(!this.Jj())return;ctl.html5Player.NT(cA)};byx.bQd=function(cA){if(!this.Jj())return;ctl.html5Player.bQd(cA)};byx.cHX=function(){ctl.html5Player.cHX()};byx.NR=function(bCH){ctl.html5Player.NR(bCH)};byx.Fu=function(sM){ctl.html5Player.Fu(sM)};byx.NO=function(cH){ctl.html5Player.NO(cH)};byx.cLl=function(){if(this.Jj()){if(ctl.html5Player.cek()){this.NT()}else{this.rA()}}else{this.rA()}};byx.YT=function(bq,byy){if(!bq||!byy)return;if(bq=="before_switch_player"){if(byy.oldPlayer==ctl.tempPlayer){this.NT();bi.bF(bTG.bpf,"off")}}else{if(byy.newPlayer==ctl.tempPlayer){bi.bF(bTG.bpf,"on")}}};byx.cJk=function(cX){switch(cX){case"play":this.rA();break;case"pause":this.NT();break;case"stop":this.bQd();break;case"play_pause":this.cLl();break;case"volumeup":this.NO(1);break;case"volumedown":this.NO(-1);break;case"check_tray_menu":var oX=bD.dV(100);if(this.cFz&&this.bCN){oX.text=this.bCN.track.name;if(this.bCN.track.artists&&this.bCN.track.artists[0]){oX.text+=" - "+this.bCN.track.artists[0].name}oX.enable=!0}else{oX.text="没有正在播放的音乐";oX.enable=!1}var qg=bD.dV(101);if(this.cFz&&this.bCN){if(ctl.html5Player.cek()){qg.text="暂停";qg.image_path=bj.byN("icn_pause")}else{qg.text="播放";qg.image_path=bj.byN("icn_play")}qg.enable=!0}else{qg.text="播放/暂停";qg.enable=!1;qg.image_path=bj.byN("icn_play")}var uL=bD.dV(102);uL.menu=!1;var bLj=bD.dV(103);bLj.menu=!1;var bMq=bD.dV(104);bMq.menu=!1;var bMr=bD.dV(105);bMr.menu=!0;var bLi=bD.dV(330004);bLi.menu=!1;var bMt=bD.dV(330005);bMt.menu=!1;break}};byx.Yq=function(bq,byy){if(!byy||byy.playId&&byy.playId!=this.cFz)return;bi.bF(bTG.bpf,bq,byy)};byx.cFO=function(byy){if(!byy||byy.playId!=this.cFz)return;this.cFz="";switch(byy.reason){case"end":ctl.player.cLp(this);break;case"call":break;case"err":ctl.player.cLp(this);logger.warn(byy,"__onPlayEnd","player.temp.js");bj.ci({txt:"试听遇到问题，播放失败",duration:3e3});break}};byx.cNU=function(bB){if(!bB||!bB.id)return;var cFA=bB.id+"-tempPlayer";if(this.Jj()){if(this.cFz==cFA){if(ctl.html5Player.cek()){this.bQd()}else{this.rA()}}else{this.coD(bB)}}else{this.coD(bB)}};byx.cLF=function(){if(this.Jj()){ctl.player.cLp(this)}};byx.coD=function(bB){var cFA=bB.id+"-tempPlayer",jH=bB.duration;this.bCN={track:bB,playId:cFA};ctl.trackPlayUtil.cRE(bB,this.bPP.byB(this,cFA,jH))};byx.bPP=function(cFA,jH,byC){if(this.cFz!=cFA&&this.bCN&&this.bCN.playId==cFA){this.bCN.info={playid:cFA,url:byC,duration:jH};this.Dr(this.bCN.info)}};bU.hB.bG({element:bTG.bpf,event:["on","off","onmutechange","onvolumechange","onpositionchange","onloading","onplayingstatechange","onloadingstatechange"]});byz("ctl").tempPlayer=bTG.bpf.kE();ctl.player.cU(ctl.tempPlayer)})();
(function(){var byz=NEJ.P,cJO=NEJ.O,co=NEJ.F,dz=NEJ.R,byA=byz("nej.e"),bi=byz("nej.v"),bm=byz("nej.u"),bD=byz("nej.cef"),bU=byz("nej.ut"),bTG=byz("nm.c"),bj=byz("nm.x"),oH=byz("nm.w.mv"),byx;if(!!bTG.cfb)return;bTG.cfb=NEJ.C();byx=bTG.cfb.bS(bTG.cGP);byx.byR=function(){this.bEc();this.cFz="";this.Jm=oH.bNy.bG({onbuffering:this.Yq.byB(this,"onbuffering"),onmeta:this.Yq.byB(this,"onmeta"),oncanplay:this.Yq.byB(this,"oncanplay"),onloadprogress:this.Yq.byB(this,"onloadprogress"),onstatechange:this.Yq.byB(this,"onstatechange"),onvolumechange:this.Yq.byB(this,"onvolumechange"),onplayprogress:this.Yq.byB(this,"onplayprogress"),onerror:this.Yq.byB(this,"onerror")});this.dO([[bTG.Sk,"before_switch_player",this.YT.byB(this,"before_switch_player")],[bTG.Sk,"after_switch_player",this.YT.byB(this,"after_switch_player")]])};byx.cJ=function(blZ){this.cK(blZ)};byx.dH=function(){this.dI()};byx.Jj=function(){return ctl.player.cLE()==ctl.evtMVPlayer};byx.cLI=function(blZ){ctl.player.cHW(this);this.cFz=blZ.id;return this.Jm.cLI(blZ)};byx.cLA=function(){this.cFz="";return this.Jm.cLA();ctl.player.cLp(this)};byx.Dr=function(byC){return this.Jm.Dr(byC)};byx.bXz=function(byC){return this.Jm.bXz(byC)};byx.rA=function(){ctl.player.cHW(this);return this.Jm.rA()};byx.NT=function(){return this.Jm.NT()};byx.cej=function(){return this.Jm.cej()};byx.bNR=function(kz){ctl.player.cHW(this);return this.Jm.bNR(kz)};byx.Fu=function(sM){return this.Jm.Fu(sM)};byx.chJ=function(){return this.Jm.chJ()};byx.NO=function(cH){return this.Jm.NO(cH)};byx.cht=function(chK){return this.Jm.cht(chK)};byx.cek=function(){return this.Jm.cek()};byx.YT=function(bq,byy){if(!bq||!byy)return;if(bq=="before_switch_player"){if(byy.oldPlayer==ctl.evtPlayer){this.NT();bi.bF(bTG.cfb,"off")}}else{if(byy.newPlayer==ctl.evtPlayer){bi.bF(bTG.cfb,"on")}}};byx.cJk=function(cX){switch(cX){case"show_volume":bD.cFB("player.showVolume",ctl.player.chJ());break;case"play":this.rA();break;case"pause":this.NT();break;case"stop":this.bQd();break;case"play_pause":this.cej();break;case"volumeup":this.NO(1);break;case"volumedown":this.NO(-1);break;case"check_tray_menu":var oX=bD.dV(100);if(this.cFz){oX.text=(dc.mv.cl(this.cFz)||cJO).name||"";oX.enable=!0}else{oX.text="没有正在播放的音乐";oX.enable=!1}var qg=bD.dV(101);if(this.cFz){if(this.cek()){qg.text="暂停";qg.image_path=bj.byN("icn_pause")}else{qg.text="播放";qg.image_path=bj.byN("icn_play")}qg.enable=!0}else{qg.text="播放/暂停";qg.enable=!1;qg.image_path=bj.byN("icn_play")}var uL=bD.dV(102);uL.menu=!1;var bLj=bD.dV(103);bLj.menu=!1;var bMq=bD.dV(104);bMq.menu=!1;var bMr=bD.dV(105);bMr.menu=!1;var bLi=bD.dV(330004);bLi.menu=!1;var bMt=bD.dV(330005);bMt.menu=!1;break}};byx.Yq=function(bq,byy){bi.bF(bTG.cfb,bq,byy)};bU.hB.bG({element:bTG.cfb,event:["on","off","onbuffering","onmeta","oncanplay","onloadprogress","onstatechange","onvolumechange","onplayprogress","onerror"]});byz("ctl").evtPlayer=bTG.cfb.kE();ctl.player.cU(ctl.evtPlayer)})();
(function(){var byz=NEJ.P,cJO=NEJ.O,co=NEJ.F,bm=byz("nej.u"),byA=byz("nej.e"),bi=byz("nej.v"),cmw=byz("nej.ui"),bU=byz("nej.ut"),bD=byz("nej.cef"),cN=byz("nej.j"),Cs=byz("nm.w"),bj=byz("nm.x"),oH=byz("nm.w.mv"),bp=byz("nm.d"),bTG=byz("nm.c"),byx;var SLOGAN_START="/style/res/common/play/mv_slogan-start.png",SLOGAN_MIDDLE="/style/res/common/play/mv_slogan-middle.png";Cs.cLW=NEJ.C();byx=Cs.cLW.bS(cmw.hl);byx.byR=function(){this.bEc();bD.fo("escape","browse",this.cfW.byB(this),2);bi.bM(bTG.cfb,"onmeta",this.cab.byB(this));bi.bM(bTG.cfb,"onstatechange",this.caa.byB(this));bi.bM(bTG.cfb,"onvolumechange",this.chi.byB(this));bi.bM(bTG.cfb,"oncanplay",this.cbx.byB(this));bi.bM(bTG.cfb,"onbuffering",this.cad.byB(this));bi.bM(bTG.cfb,"onplayprogress",this.cak.byB(this));bi.bM(bTG.cfb,"onloadprogress",this.cal.byB(this));bi.bM(bTG.cfb,"onerror",this.ej.byB(this))};byx.eo=function(){this.Yl="m-evt-mv-player"};byx.byL=function(){this.byO();var bg=byA.bV(this.bA,"j-flag");this.bwo=bg.shift();this.ccF=bg.shift();this.bRV=bg.shift();this.bnH=bg.shift();this.cgG=bg.shift();this.bLt=bg.shift();this.bLp=bg.shift();this.caD=bg.shift();this.bOX=bg.shift()};byx.cJ=function(blZ){this.cK(blZ);this.caW=bp.bPF.bG();this.hP=bp.gO.bG();this.cbf=this.hP.cct()||{};this.gp=this.hP.hw();this.bZY(this.bOX);ctl.evtPlayer.cLI({video:this.bwo,autoplay:!0,id:blZ.mvId});this.dO([[this.bA,"webkitfullscreenchange",this.cam.byB(this)],[this.bA,"click",this.bqC.byB(this)],[this.bA,"dblclick",this.cem.byB(this)],[this.bA,"mousemove",this.cen.byB(this)],[document.body,"keydown",this.cfX.byB(this)],[bp.bPF,"itemchange",this.cgV.byB(this)],[document.body,"click",this.btv.byB(this)]]);byA.byW(this.ccF,"display","");byA.tm(this.caD,{"margin-top":"100px",display:""});this.bha();ctl.evtPlayer.cht(this.cbf.muted);ctl.evtPlayer.Fu(this.cbf.volume);this.chi({volume:this.cbf.volume,muted:this.cbf.muted});this.cfY=blZ.mvId;byA.bK(this.bA,"z-dis")};byx.dH=function(){this.dI();this.caq.innerText=this.cap.innerText=bj.AG(0);byA.byW(this.bLt,"display","none");byA.byW(this.bnH,"display","none");byA.byW(this.bLp,"display","none");this.bAR();ctl.evtPlayer.cLA();if(this.VX){this.VX.bQ();delete this.VX}if(this.cax){this.cax.bQ();delete this.cax}if(this.hP){this.hP.bQ();delete this.hP}if(this.caW){this.caW.bQ();delete this.caW}byA.tm(this.caw,{width:0});delete this.bto;delete this.cbf;delete this.cgD};byx.ceo=function(cep){var bg=["q240","q480","q720","q1080"],rh=this.cbf.quality;this.cgi={start:SLOGAN_START,middle:SLOGAN_MIDDLE};if(cep.mvDetail&&cep.mvDetail.pcLoadingPic&&cep.mvDetail.pcBufferPic){this.cgi.start=cep.mvDetail.pcLoadingPic;this.cgi.middle=cep.mvDetail.pcBufferPic}byA.byW(this.bnH,"background-image","url("+this.cgi.start+")");byA.byW(this.bnH,"display","");this.cgV({data:cep.mvDetail,attr:"sub"});this.bKS=cep;if(this.bKS.localBit){rh=this.bKS.localBit}while(rh){if(!this.bKS[rh]){var bs=bg.indexOf(rh)-1;rh=bs>=0?bg[bs]:undefined}else{this.cTK(this.bKS.mvDetail.id,this.bKS[rh]);this.ceu(rh);return}}oH.log.error("resource not exists")};byx.cTK=function(bo,cqx,gE){if(cqx.local&&cqx.url){ctl.evtPlayer.Dr(cqx.url);return}bj.cGp("/api/song/enhance/play/mv/url",{id:bo,r:cqx.br},function(bn,cTZ){if(bn&&bn.code==200){if(!cTZ){ctl.evtPlayer.Dr(bn.data.url)}else{ctl.evtPlayer.bXz(bn.data.url)}}else{bj.ci({txt:"无法播放，获取播放信息失败"})}}.byP(this,gE||0))};byx.cTY=function(bo){byA.byW(this.caD,"display","none");this.cTw=2;this.cTX=bo};byx.bZY=function(bk){var bg=byA.bV(bk,"jj-flag");this.can(bg[0]);this.bHK=bg[1];this.cap=bg[2];this.caq=bg[3];this.bKR=bg[4];this.cao(bg[5]);this.dO([[bg[1],"click",this.car.byB(this)],[bg[4],"click",this.bTo.byB(this)],[bg[5],"click",this.cau.byB(this)],[bg[6],"click",this.cav.byB(this)]])};byx.can=function(bk){var bg=byA.bV(bk,"jjj-flag"),baU=bg[1];this.caw=bg[0];this.jJ=bg[4];this.bKJ=bg[5];this.caV={track:baU,thumb:bg[3],progress:bg[2],reset:true,value:1e-4,onslidechange:this.ccG.byB(this),onslidestop:this.cay.byB(this)};this.cax=oH.cfl.bG(this.caV);this.dO([[bk,"mouseover",this.bKx.byB(this)],[bk,"mouseout",this.bKx.byB(this)],[bk,"mousemove",this.bKx.byB(this)]])};byx.cao=function(bk){var bg=byA.bV(bk,"jjj-flag");this.bIs=bg[0];this.VX=oH.cfl.bG({track:bg[1],thumb:bg[3],progress:bg[2],reset:true,onslidechange:this.bOZ.byB(this),onslidestop:this.bOZ.byB(this)});this.dO([[this.bIs,"click",this.caz.byB(this)]]);this.ccG()};byx.cam=function(){if(this.cff()){this.bA.style.height="100%";this.bA.style.width="100%";byA.bK(this.bKR,"icon-full-0");this.caK(true);this.clh(true);if(this.gp.showLyric){if(this.gp.showLyricType==0){bD.bJo("desktop_lyrics")}}}else{this.bA.style.height="";this.bA.style.width="";byA.bJ(this.bKR,"icon-full-0");this.caK();this.clh();if(this.gp.showLyric){if(this.gp.showLyricType==0){bD.bBd("desktop_lyrics")}}this.bA.scrollIntoView()}window.setTimeout(this.bha.byB(this),100)};byx.btv=function(byy){var bk=bi.cR(byy);if(byA.ey(bk,"icon-quality")){bi.bQd(byy);return}byA.byW(this.bEY,"display","none")};byx.cfX=function(byy){if(byy.keyCode==27&&this.cff()){this.cas()}};byx.bqC=function(){var last=0,delay=200,tid;return function(byy){var bk=bi.cR(byy,"d:action");switch(byA.bT(bk,"action")){case"replay":ctl.evtPlayer.bNR(0);nm.log.dE("play","mv",this.cfY,{id:this.cfY,type:"mv",source:"replay"});ctl.evtPlayer.rA();this.caW.Hh(this.cfY);break;case"play":if(this.bLt.style.display!="none"){nm.log.dE("play","mv",this.cfY,{id:this.cfY,type:"mv",source:"replay"})}ctl.evtPlayer.rA();break;case"toggleplay":if(last==0){last=+(new Date);tid=window.setTimeout(function(){ctl.evtPlayer.cej();last=0}.byB(this),delay)}else{if(+(new Date)-last<delay){last=0;clearTimeout(tid)}}break;case"share":document.webkitCancelFullScreen();bi.bF(Cs.cLW,"mvfullscreenshare",{});break;case"comment":document.webkitCancelFullScreen();bi.bF(Cs.cLW,"mvfullscreencomment",{});break}}}();byx.cem=function(byy){var bk=bi.cR(byy,"d:dblaction");switch(byA.bT(bk,"dblaction")){case"togglefullscreen":this.cas();break}};byx.cen=function(){var ox,oy;return function(byy){var bk=bi.cR(byy,"d:box");switch(byA.bT(bk,"box")){case"bottom":this.caK();return;case"oper":return}if(!this.cff()||Math.pow(bi.cmU(byy)-ox,2)+Math.pow(bi.pQ(byy)-oy,2)<25){return}ox=bi.cmU(byy);oy=bi.pQ(byy);this.caK(true);this.clh(true)}}();byx.caK=function(){var tid;return function(bjP){byA.bJ(this.bOX,"bottom-hide");window.clearTimeout(tid);if(!bjP)return;tid=window.setTimeout(function(){byA.bK(this.bOX,"bottom-hide")}.byB(this),2e3)}}();byx.clh=function(){var tid;return function(bjP){byA.byW(this.bwo,"cursor","pointer");window.clearTimeout(tid);if(!bjP)return;tid=window.setTimeout(function(){byA.byW(this.bwo,"cursor","none")}.byB(this),2e3)}}();byx.ccG=function(byy){this.cbo()};byx.cbo=function(){var gD=this.caV.progress.clientWidth,ccH=18,cer=this.caV.track.clientWidth,eC=gD-ccH/2;eC=Math.max(eC,-2);eC=Math.min(eC,cer-ccH);byA.byW(this.caV.thumb,"left",eC+"px")};byx.cay=function(byy){ctl.evtPlayer.bNR(byy.ratio);this.cbo()};byx.bOZ=function(byy){var kz=byy.ratio;if(kz<=0){ctl.evtPlayer.Fu(0);ctl.evtPlayer.cht(true)}else{ctl.evtPlayer.cht(false);ctl.evtPlayer.Fu(kz)}};byx.car=function(byy){if(byA.ey(this.bHK,"icon-play")){if(this.bLt.style.display!="none"){nm.log.dE("play","mv",this.cfY,{id:this.cfY,type:"mv",source:"replay"})}ctl.evtPlayer.rA()}else{ctl.evtPlayer.NT()}};byx.NT=function(){if(!byA.ey(this.bHK,"icon-play")){ctl.evtPlayer.NT()}};byx.cas=function(byy){return;if(!byA.ey(this.bKR,"icon-full-0")){this.bA.webkitRequestFullScreen()}else{document.webkitCancelFullScreen()}};byx.bKx=function(){var cr=0,bKj;return function(byy){var bk=bi.cR(byy,"c:playbar");if(bk){this.caA=this.cff()?{x:0}:byA.lp(bk);byA.tm(this.jJ,{display:""});switch(byy.type){case"mouseover":cr=byA.lp(bk);bKj=this.jJ.clientWidth;byA.tm(this.jJ,{display:""});byA.tm(this.bKJ,{display:""});break;case"mouseout":byA.tm(this.jJ,{display:"none"});byA.tm(this.bKJ,{display:"none"});break;case"mousemove":if(!this.bto)return;var eI=bi.cmU(byy)-this.caA.x,kz=eI/bk.clientWidth,bFm=eI-bKj/2,bFA=eI-4;bFm=Math.max(bFm,0);bFm=Math.min(bFm,bk.clientWidth-bKj-3);bFA=Math.max(bFA,1);bFA=Math.min(bFA,bk.clientWidth-14);byA.tm(this.jJ,{left:bFm+"px"});byA.tm(this.bKJ,{left:bFA+"px"});this.jJ.innerText=bj.AG(kz*this.bto.duration);break}}}}();byx.caz=function(byy){if(byA.ey(this.bIs," z-silence")){ctl.evtPlayer.cht(false)}else{ctl.evtPlayer.cht(true)}};byx.ceu=function(rh){if(!this.bEY)return;var cfa={q240:"f",q480:"c",q720:"h",q1080:"s"};rh=cfa[rh];this.bEY.innerHTML=byA.gk("mv-quality-list",NEJ.X({quality:rh},this.bKS));this.bOY.className="jj-flag icon icon-quality "+"icon-quality-"+rh};byx.cau=function(byy){var bk=bi.cR(byy),rh;if(!this.bEY)return;if(this.bEY.style.display=="none"){if(byA.ey(bk,"icon-quality-c")){rh="c"}else if(byA.ey(bk,"icon-quality-h")){rh="h"}else if(byA.ey(bk,"icon-quality-s")){rh="s"}else if(byA.ey(bk,"icon-quality-f")){rh="f"}this.bEY.innerHTML=byA.gk("mv-quality-list",NEJ.X({quality:rh},this.bKS));this.bEY.style.display=""}else{this.bEY.style.display="none"}};byx.cav=function(byy){var byE={s:"q1080",h:"q720",c:"q480",f:"q240"},bk=bi.cR(byy,"d:url"),rh=byA.bT(bk,"quality");if(bk&&!byA.ey(this.bOY,"icon-quality-"+rh)){ctl.evtPlayer.bXz(byA.bT(bk,"url"));this.bOY.className="jj-flag icon icon-quality "+"icon-quality-"+rh;this.hP.cbL("quality",byE[rh])}};byx.bha=function(){var bwS=this.bA.clientWidth,bxb=this.bA.clientHeight;this.chn=bwS;this.chm=bxb;if(this.bto){var cgW=bwS,cgX=bxb,Nu=this.bto.width/this.bto.height-bxb/bxb;if(Math.abs(Nu)<.1||Nu>0){this.bwo.width=cgW;this.bwo.height=Math.round(this.bto.height*(cgW/this.bto.width))}else{this.bwo.height=cgX;this.bwo.width=Math.round(this.bto.width*(cgX/this.bto.height))}}this.cbo()};byx.caa=function(byy){switch(byy.state){case oH.mediaState.PLAY:byA.bEq(this.bHK,"icon-play","icon-pause");bj.cVV(this.bHK,"icon.sp.svg#mv_pause");byA.byW(this.bLp,"display","none");byA.byW(this.bLt,"display","none");this.bAR();break;case oH.mediaState.PAUSE:byA.bEq(this.bHK,"icon-pause","icon-play");bj.cVV(this.bHK,"icon.sp.svg#mv_play");byA.byW(this.bLp,"display","");break;case oH.mediaState.END:byA.bEq(this.bHK,"icon-pause","icon-play");bj.cVV(this.bHK,"icon.sp.svg#mv_play");byA.byW(this.bLp,"display","none");byA.byW(this.bLt,"display","");byA.byW(this.bRV,"display","");break}};byx.chi=function(byy){this.hP.cbL("volume",byy.volume);this.hP.cbL("muted",byy.muted);if(byy.muted||byy.volume<=0){byA.bK(this.bIs,"z-silence");bj.cVV(this.bIs,"btmbar.sp.svg#silence");this.VX.kn(0)}else{byA.bJ(this.bIs,"z-silence");bj.cVV(this.bIs,"btmbar.sp.svg#voice");this.VX.kn(byy.volume)}};byx.cab=function(HN){this.bto=HN;this.caq.innerText=bj.AG(HN.duration);this.bha();byA.bJ(this.bA,"z-dis")};byx.cbx=function(){byA.byW(this.ccF,"display","none");byA.byW(this.bnH,"display","none");byA.byW(this.bnH,"background-image","url("+this.cgi.middle+")");byA.tm(this.caD,{"margin-top":"60px",display:"none"})};byx.cad=function(){var fk;return function(byy){window.clearTimeout(fk);if(byy.buffering){fk=window.setTimeout(function(){byA.byW(this.caD,"display","");byA.byW(this.bnH,"display","");byA.byW(this.bRV,"display","")}.byB(this),1e3)}else{byA.byW(this.caD,"display","none");byA.byW(this.bnH,"display","none");byA.byW(this.bRV,"display","none")}}}();byx.cak=function(byy){this.cax.kn(byy.ratio);this.cap.innerText=bj.AG(byy.time);this.cbo()};byx.cal=function(byy){byA.tm(this.caw,{width:Math.round(byy.ratio*100)+"%"})};byx.cfZ=function(byy){if(!byy||!byy.cmd)return;switch(byy.cmd){case"volumeup":case"volumedown":if(!this.VX)return;var cbg=ctl.evtPlayer.chJ()||0;var cr=byy.cmd=="volumeup"?.1:-.1;var sM=Math.max(0,Math.min(1,cbg+cr));ctl.evtPlayer.cht(false);ctl.evtPlayer.Fu(sM);break;case"switchstate":this.car();break}};byx.cff=oH.cgg=function(){return!!document.webkitFullscreenElement};byx.cfW=function(){if(this.cff()){document.webkitCancelFullScreen()}};byx.cgB=function(byy){if(byy.code==200){var bh=byy.data[0];if(bh){}else{this.cgi={start:SLOGAN_START,middle:SLOGAN_MIDDLE}}byA.byW(this.bnH,"background-image","url("+this.cgi.start+")");byA.byW(this.bnH,"display","")}};byx.ej=function(){this.cad({buffering:false});this.jI("网络不给力哦，请检查你的网络设置~")};byx.rQ=function(){this.bAR()};byx.jI=function(mB){this.cgG.innerText=mB;byA.byW(this.cgG,"display","");byA.byW(this.bRV,"display","")};byx.bAR=function(){byA.byW(this.cgG,"display","none");byA.byW(this.bRV,"display","none")};byx.cgV=function(byy){};byx.cOH=function(){bj.ci({txt:"获取MV播放信息失败，无法播放"})};byx.Ri=function(){this.bha()};byx.bTo=function(){if(this.cfY){location.hash="#/m2/mv/?id="+this.cfY+"&source=event"}};bU.hB.bG({element:Cs.cLW,event:["mvfullscreencomment","mvfullscreenshare"]})})();
(function(){var byz=NEJ.P,cJO=NEJ.O,co=NEJ.F,byA=byz("nej.e"),bi=byz("nej.v"),bm=byz("nej.u"),bD=byz("nej.n"),bU=byz("nej.ut"),bTG=byz("nm.c"),gD=byz("nm.w"),bp=byz("nm.d"),bj=byz("nm.x"),byx;if(!!bTG.cLK)return;bTG.cLK=NEJ.C();byx=bTG.cLK.bS(bTG.cGP);byx.byR=function(){this.bEc();this.cfY=0;this.Jm=null;this.cJj=bp.bPF.bG({onitemload:this.cLD.byB(this),onerror:this.gF.byB(this)});this.crq=bj.bUi.kE()};byx.cJ=function(blZ){this.cK(blZ)};byx.dH=function(){this.dI()};byx.cOx=function(blZ){if(!blZ||!blZ.eventId||!blZ.mvId||!blZ.parent)return;if(this.cLz)this.cMC(this.cLz);this.cLz=blZ.eventId;this.cfY=blZ.mvId;this.Jm=gD.cLW.bG(blZ);var oH=this.cJj.cl(this.cfY);if(!!oH)this.cJj.bvP(this.cfY);this.cJj.hv({key:"mv",id:this.cfY,data:{id:this.cfY,type:"mp4"}});return this.Jm};byx.cMC=function(cIb){if(this.Jm&&this.cLz==cIb){bi.bF(bTG.cLK,"event_mv_close",{eventId:this.cLz});this.Jm=this.Jm.bQ();this.cLz=0;this.cfY=0}};byx.cLD=function(bn){if(!bn||bn.id!=this.cfY)return;var oH=this.cJj.cl(bn.id),gL="",chE=0;oH.subCount=Math.max(0,oH.subCount||0);if(!dc.mv.bVh(bn.id)){this.cUP=bn.id;this.cUO=!0;dc.mv.bJO(bn.id,"play");this.Jm.cTY(bn.id);this.cMC(this.cLz)}else{if(this.cJj.nx(bn.id)==4){gL="file:///"+this.cJj.bVf(bn.id);chE=this.cJj.crc(bn.id)}var cbh=oH.brs||[],iK={mvDetail:oH,localBit:undefined};bm.dP(cbh,function(bl,bs){iK["q"+bl.br]=NEJ.X({},bl)});if(chE==240||chE==480||chE==720||chE==1080){iK["q"+chE].url=gL;iK["q"+chE].local=!0;iK.localBit="q"+chE}this.Jm.ceo(iK);this.cJj.Hh(bn.id)}};byx.cxj=function(bo,bn){if(this.cfY==bo){if(bn&&bn.err==0&&bn.ret&&bn.ret.length){this.cJj.cum(bn.ret[0]);var oH=this.cJj.cl(bo);if(!oH)this.crb();else this.cLD({id:bo})}else{this.crb()}}};byx.gF=function(byy){if(this.cJj.nx(this.cfY)==4){this.crq.cxm("select * from web_offline_track where id='offline-mv-"+this.byZ+"';",this.cxj.byB(this,this.cfY))}else{this.crb()}};byx.crb=function(){this.Jm.cOH()};bU.hB.bG({element:bTG.cLK,event:["event_mv_close"]});byz("ctl").event=bTG.cLK.kE()})();
(function(){var byz=NEJ.P,cJO=NEJ.O,co=NEJ.F,dz=NEJ.R,byA=byz("nej.e"),bi=byz("nej.v"),bm=byz("nej.u"),bD=byz("nej.n"),bU=byz("nej.ut"),cI=byz("nej.n"),cN=byz("nej.j"),oT=byz("nej.cef"),qC=byz("nej.cef.ut"),bj=byz("nm.x"),bp=byz("nm.d"),bTG=byz("nm.c"),bR=byz("nm.l"),bY=byz("nm.m"),bC=byz("nm.m.f"),byx,byD,pU=null,bJb=0;bC.VR=NEJ.C();byx=bC.VR.bS(bY.cW);byx.byG=function(){this.bCU="m-fply";this.dg();var bg=byA.gj(this.bA);this.LN=bg[0];this.nu=bg[1];this.LI=bg[2];this.LC=bg[3];this.bhf=bg[5];this.rS=bg[6];this.CS=bg[7];this.Lv=bg[8];this.vR=bg[9];this.vS=bg[10];this.VT=byA.gj(this.vS);this.dO([[document,"click",this.bhm.byB(this)],[bg[0],"click",this.pW.byB(this,-1)],[this.nu,"click",this.CK.byB(this)],[bg[2],"click",this.pW.byB(this,1)],[this.rS,"click",this.bhp.byB(this)],[this.Lv,"click",this.xI.byB(this)],[bp.cG,"listchange",this.ku.byB(this)],[bp.cG,"queuechange",this.bhs.byB(this)],[bp.cG,"lrcload",this.bht.byB(this),!0],[bj.bAp,"statechange",this.bhu.byB(this)],[this.vS,"click",this.Lg.byB(this)],[this.vR,"click",this.bhw.byB(this)],[bTG.cLr,"updateskin",this.bEF.byB(this)],[bj.lN,"change",this.bjD.byB(this)],[document,"beforeexit",this.hA.byB(this,{data:"beforeexit"})],[bTG.cvL,"updatehotkey",this.Nm.byB(this)],[bTG.cvL,"hotkey",this.cOy.byB(this)]]);var fA=byA.bV(bg[4],"j-flag");this.bhx=fA[1];this.xG=fA[2];this.VW={delta:0,reset:!0,progress:fA[2].parentNode,track:fA[0],thumb:fA[2],onslidestop:this.bBZ.byP(this,!0),onslidechange:this.Du.byB(this)};var fA=byA.bV(bg[7],"j-flag");this.VX=bU.zT.bG({delta:0,progress:fA[1],track:fA[0],thumb:fA[2],onslidestop:this.KU.byB(this),onslidechange:this.KU.byB(this)});this.cBv=fA[2].parentNode;this.eh=bp.cG.bG();this.dv=bp.gO.bG();this.gp=this.dv.hw();if(this.gp)delete this.gp.lyricFirstTime;this.cpB();this.gp.showLyric?this.KT():this.VZ();localCache.bSX("desktop_lyric_lock",!this.gp.lockLyric);bi.bF(document,"menuaction",{id:330015});this.hU=ctl.defPlayer;ctl.defPlayer.bgM("onmodechange",this.bhG.byB(this));ctl.defPlayer.bgM("onmutechange",this.bhH.byB(this));ctl.defPlayer.bgM("onvolumechange",this.bhJ.byB(this));ctl.defPlayer.bgM("onpositionchange",this.bhK.byB(this));ctl.defPlayer.bgM("onloading",this.bhM.byB(this));ctl.defPlayer.bgM("onplayingstatechange",this.cFC.byB(this));ctl.defPlayer.bgM("onloadingstatechange",this.cFH.byB(this));var cq=this.dv.uh();this.xI(cq.mode);this.KU({ratio:cq.volume});this.ku();this.ckK=0;bD.fo("minivolumechange","player",this.cdv.byB(this));bD.fo("desktopmousewheel","player",this.ckB.byB(this));bD.cFB("player.simulateKRC",!1);dc.track.bpF();dc.track.csG();ctl.publishManager.Wo();ctl.ad.czZ()};byx.byT=function(){var eg=!1;return function(blZ){this.cmx(blZ);if(!eg){eg=!0;this.hU.cOo()}}}();byx.pW=function(cH){ctl.defPlayer.cJm(cH)};byx.ku=function(blZ){if(!blZ||blZ.key=="track_queue"){var di=this.eh.hQ("track_queue");this.VT[1].innerText=di==1e4?"1万":di;bm.cj([102,103],function(bo){var bl=oT.dV(bo);bl.enable=di>0});if(di==0){this.bIm()}}};byx.bhs=function(bn){if((bn||cJO).action=="add"){this.bie(bn.autoplay?"已开始播放":bn.overflow?"播放列表已满":"已添加到播放列表")}};byx.bie=function(byX){var mB=this.VT[2];mB.innerText=byX;byA.bJ(mB,"f-dn");setTimeout(function(){byA.bK(mB,"f-dn")}.byB(this),3e3)};byx.bhp=function(byy){this.hU.cHX()};byx.bhH=function(byy){if(byy.mute){byA.bK(this.rS,"z-silence");byA.lh(this.rS,"title","恢复音量")}else{byA.bJ(this.rS,"z-silence");byA.lh(this.rS,"title","静音")}};byx.xI=function(){var Wj=["playorder","playcycle","playrandom","playonce"];return function(byy){this.hU.xI(byy)}}();byx.bhG=function(){var ek=["type-repeat","type-one","type-random","type-order"],Wk=["列表循环","单曲循环","随机播放","顺序播放"],dbd=["loop","one","shuffle","order"],bs={playorder:0,playcycle:1,playrandom:2,playonce:3};return function(byy){var KN=byy.mode,bAy=bs[KN]||0;byA.bEq(this.Lv,ek.join(" "),ek[bAy]);bj.cVV(this.Lv,"btmbar.sp.svg#"+dbd[bAy]);this.Lv.title=Wk[bAy];this.dv.Zi("mode",KN)}}();byx.CK=function(byy){bJb=0;logger.log("_ksipped:"+bJb);ctl.defPlayer.cLl()};byx.cFH=function(byy){if(byy&&byy.loading){byA.bK(this.xG,"z-dis")}else{byA.bJ(this.xG,"z-dis")}};byx.cFC=function(byy){if(!byy)return;var xC={id:301};if(byy.playing){xC.tooltip="暂停";xC.url=bj.uZ("pause");byA.bEq(this.nu,"btnp-play","btnp-pause");byA.lh(this.nu,"title",this.nu.title.replace("播放","暂停"));player.playState="play";bj.cVV(this.nu,"btmbar.sp.svg#pause")}else{xC.tooltip="播放";xC.url=bj.uZ("play");byA.bEq(this.nu,"btnp-pause","btnp-play");byA.lh(this.nu,"title",this.nu.title.replace("暂停","播放"));player.playState="stop";bj.cVV(this.nu,"btmbar.sp.svg#play")}bD.bX("app.setThumbnail",{btnMiddle:xC});var dk=this.eh.gB();if(!!dk&&dk.from&&dk.from.id==byy.playId){this.eh.kL(dk.from,byy.playing?2:1)}};byx.bhM=function(byy){var Fm=byy.loaded/byy.total*100;byA.byW(this.bhx,"width",Fm+"%")};byx.bBZ=function(byy,Iq,cph){this.LC.innerText=bj.AG((byy.ratio||0)*(this.ckK||0));this.Ws=false;if(!cph)this.hU.kn(byy.ratio)};byx.Du=function(byy){this.Ws=true;this.LC.innerText=bj.AG(byy.ratio*this.ckK)};byx.bhK=function(){var ccm=-1;return function(byy){if(this.Ws)return;this.eh.XJ(byy.current);this.bMC=byy.current;var tB=bj.AG(byy.current);if(tB==this.LC.innerText)return;this.LC.innerText=tB;this.bhf.innerText=bj.AG(byy.duration);if(!this.bzY){this.bzY=bU.zT.bG(this.VW)}this.bzY.kn(byy.current/byy.duration);this.ckK=byy.duration;if(ccm!=byy.duration){ccm=byy.duration;bD.cFB("player.setTotalTime",Math.floor(byy.duration*1e3))}}}();byx.cdv=function(sM){sM=Math.min(Math.max(sM||0,0),1);this.hU.Fu(sM)};byx.KU=function(byy){this.hU.Fu(byy.ratio);byA.byW(this.cBv,"width",byy.ratio*100+"%")};byx.bhJ=function(byy){this.VX.kn(byy.volume);byA.byW(this.cBv,"width",byy.volume*100+"%");this.dv.Zi("volume",byy.volume)};byx.bht=function(byy){this.hU.AH((byy||cJO).lyric)};byx.bhu=function(byy){byy.state=="show"?byA.bK(this.bA,"z-shadow"):byA.bJ(this.bA,"z-shadow")};byx.bhm=function(byy){byy=byy.ext||byy;var dQ=byy.target;while(dQ){if(byA.ey(dQ,"m-player m-lyric m-playlist"))return;dQ=dQ.parentNode}if(!!this.es&&!this.Wu)this.Lg()};byx.Lg=function(byy){if(!!this.es){this.PO()}else{this.PP()}};byx.PO=function(){if(!this.es)return;this.es.dy();this.es.bQ();delete this.es;byA.bJ(this.vS,"z-show");this.vS.title="打开播放列表"};byx.PP=function(){if(this.es)return;this.es=bR.Vw.bG({parent:document.body,clazz:"m-playlist z-show"});this.vS.title="关闭播放列表";byA.bK(this.vS,"z-show")};byx.bhw=function(byy){var biG=byA.ey(this.vR,"z-light");biG?this.VZ():this.KT();if(!!byy)nm.log.dE(nm.log.ACTION.LYRIC_BTN_PAGE)};byx.cpB=function(){var Og=oT.dV(330004),cbG=oT.dV(330005);if(this.gp.showLyricType==0){Og.menu=!0;cbG.menu=!0}else{Og.menu=!0;Og.text="启用桌面歌词";Og.image_path=bj.byN("icn_openLrc");cbG.menu=!1}localCache.bSX("show_lyric_type",this.gp.showLyricType)};byx.KT=function(){if(this.gp.showLyricType==0){localCache.bSX("desktop_lyric_close",!1);oT.bBd("desktop_lyrics");var Og=oT.dV(330004);Og.text="关闭桌面歌词";Og.image_path=bj.byN("icn_closeLrc");oT.dV(330005).menu=!0;this.vR.title="关闭歌词"}else{localCache.bSX("inline_lyric_close",!1);if(APP_CONF.isOSX){oT.bBd("inline_lyrics")}else{if(!this.cpj)this.cpj=byA.bV(document.body,"m-lyric")[0];byA.bK(this.cpj,"z-show");byA.bK(document.body,"mq-lrc")}}byA.bK(this.vR,"z-light");this.gp.showLyric=true;this.dv.bI(this.gp);dispatcher.gM({to:"/m3/setting/",data:{cmd:"onlyric",check:true}});bj.gM("/?/frame/fm/",{cmd:"desklrcshowed"})};byx.VZ=function(){if(this.gp.showLyricType==0){localCache.bSX("desktop_lyric_close",!0);oT.bJo("desktop_lyrics");var Og=oT.dV(330004);Og.text="打开桌面歌词";Og.image_path=bj.byN("icn_openLrc");oT.dV(330005).menu=!1;this.vR.title="打开歌词"}else{localCache.bSX("inline_lyric_close",!0);if(APP_CONF.isOSX){oT.bJo("inline_lyrics")}else{if(!this.cpj)this.cpj=byA.bV(document.body,"m-lyric")[0];byA.bJ(this.cpj,"z-show");byA.bJ(document.body,"mq-lrc")}}byA.bJ(this.vR,"z-light");this.gp.showLyric=false;this.dv.bI(this.gp);dispatcher.gM({to:"/m3/setting/",data:{cmd:"onlyric",check:false}});bj.gM("/?/frame/fm/",{cmd:"desklrchidden"})};byx.cOy=function(byy){if(byy&&byy.action=="lyric"){this.bhw()}};byx.hA=function(bn){bn=bn||cJO;var dk=this.eh.gB();switch(bn.data){case"onclose":this.Lg();break;case"hidequeue":this.PO();break;case"showguide":if(!this.es){this.es=bR.Vw.bG({parent:document.body,clazz:"m-playlist z-show"});this.vS.title="关闭播放列表";byA.bK(this.vS,"z-show")}this.es.cty();break;case"resetrandom":break;case"setrandomnext":bJb=0;if(this.dv.uh().mode=="playrandom")this.hU.cRM(bn.nextId);break;case"playprev":this.pW(-1);case"playnext":this.pW(1);break;case"volumemute":this.bhp();break;case"volumeup":this.hU.NO(1);break;case"volumedown":this.hU.NO(-1);break;case"switchstate":this.CK();break;case"stop":this.eh.kL((this.eh.gB()||cJO).from,0);break;case"switchstate2":this.CK();break;case"switchmode":this.xI();break;case"minimax":if(!localCache.cg("window_name")){var Wv=byA.bV(document.body,"m-winctrl")[0];if(!Wv)return;var Ww=byA.bV(Wv,"fix")[0];if(!Ww)return;bi.bF(Ww,"click")}else{dispatcher.gM({to:"/m",from:"",data:{cmd:"switchtomain"},mode:0})}break;case"love":var dk=this.eh.gB();if(!dk||!dk.from||!!dk.from.program)break;var bB=bj.bKw(dk.from);if(!bB.album||bB.album.id==null)break;if(this.eh.bKK(bB.id))break;this.eh.cbY(bB.id);break;case"lyric":this.bhw();break;case"playlistfullshow":this.Wu=!0;break;case"playlistfullhide":this.Wu=!1;break;case"resetSkipped":bJb=0;break;case"closedesktoplrc":this.VZ();break;case"opendesktoplrc":this.KT();break;case"ajustlrcoffsetback":this.ccn(-.5);break;case"ajustlrcoffsetforward":this.ccn(.5);break;case"ajustlrcoffsetback2":this.ccn(-.5,"deskLrc");break;case"ajustlrcoffsetforward2":this.ccn(.5,"deskLrc");break;case"beforeexit":this.dv.bI(this.gp);this.hU.cNB();this.hU.cMQ("",0,!0);ctl.publishManager.Wl(!0);break;case"synclyrictype":this.cpB();break;case"showdesklrc":this.KT();break;case"hidedesklrc":this.VZ();break}};byx.Nm=function(){var cq=ctl.hotkey.pO();if(!!cq&&cq.shortcut){var xA="",xz="";this.nu.title="播放";this.LN.title="上一首";this.LI.title="下一首";var cco="上一首",ccp="下一首",ccq="播放/暂停",cbr=!!cq.activateGlobal;bm.cj(cq.shortcut,function(bl){switch(bl.name){case"play_pause":if(bl.notconflict)this.nu.title="播放（"+bl.val+"）";if(cbr&&bl.gnotconflict)ccq="播放/暂停（"+bl.gval+"）";break;case"prev":if(bl.notconflict)this.LN.title="上一首（"+bl.val+"）";if(cbr&&bl.gnotconflict)cco="上一首（"+bl.gval+"）";break;case"next":if(bl.notconflict)this.LI.title="下一首（"+bl.val+"）";if(cbr&&bl.gnotconflict)ccp="下一首（"+bl.gval+"）";break;case"add_volume":if(bl.notconflict)xA=bl.val;break;case"cut_volume":if(bl.notconflict)xz=bl.val;break}},this);if(xA&&xz){this.CS.title="音量调节（"+xA+" / "+xz+"）"}else if(xA||xz){this.CS.title="音量调节（"+xA+xz+"）"}else{this.CS.title="音量调节"}bD.bX("player.updateDesktopLrcTooltips",cco,ccq,ccp);logger.warn("update hotkey play_pause title "+this.nu.title,"__onUpdateHotKey","player/index.js");logger.warn("update hotkey prev title "+this.LN.title,"__onUpdateHotKey","player/index.js");logger.warn("update hotkey next title "+this.LI.title,"__onUpdateHotKey","player/index.js");logger.warn("update hotkey add_volume/cut_volume title "+this.CS.title,"__onUpdateHotKey","player/index.js")}};byx.bIm=function(){oT.MI("网易云音乐");this.LC.innerText="00:00";this.bhf.innerText="00:00";byA.bJ(this.xG,"z-dis");this.hU.bQd();bD.cFB("player.setMiniPlayerState",{playstate:2});bD.cFB("player.setInfo",{playId:"",songName:"",albumName:"",artistName:"",albumId:"",url:"",songType:"normal"});this.hU.cft();this.hU.bCI();byA.byW(this.bhx,"width","0%");bD.bX("app.setThumbnail",{tooltip:"网易云音乐",defaultCover:bj.hk().coverimg,btnMiddle:{id:301,tooltip:"播放",url:bj.uZ("play")}});bD.bX("trayicon.setToolTip","网易云音乐");if(!!this.bzY)this.bzY.kn(0);this.eh.chx(2)};byx.bjD=function(byy){window.clearTimeout(this.bWA);if(!(byy||cJO).online){this.bWA=window.setTimeout(function(){bj.cL(4,function(cJN){cJN.bYN()})}.byB(this),3e3);return}this.bWA=window.setTimeout(function(){bj.cL(4,function(cJN){cJN.bYM()})}.byB(this),3e3);bj.cfH();if(!this.eh)return;this.eh.cAn();var dk=this.eh.gB();if(!dk)return;var bo=(!!dk.data&&!!dk.data.track?dk.data.track:dk.data||cJO).id;if(!bo)return;this.eh.cja(!0);bj.gM("/?/frame/brief/",{cmd:"coverupdate"})};byx.bEF=function(){var dk=this.eh.gB();if(dk){bj.gM("/?/frame/brief/",{cmd:"setnativecover",tid:dk.from.id});var oW=ctl.trackPlayUtil.cWy(dk)||cJO,cWo=oW.uiOpts;bD.cFB("player.setInfo",cWo);bD.bX("player.setCurrentPlay",dk.from.id);bD.cFB("player.setMiniPlayerState",{playstate:dk.state==1?1:0})}else{this.hU.bCI()}this.eh.Yg();bj.gM("/m",{cmd:"updatehotkey"})};byx.ccn=function(cr,cA){if(!ctl.defPlayer.Jj()&&!ctl.fmPlayer.Jj())return;if(!this.eh.cji())return;var dk=this.eh.gB(),bId=bj.bKw(dk.from).id,cHw=this.eh.cHy(bId),cGV=cA=="deskLrc"&&cHw,cHx=this.eh.bNM(bId,cGV);if(cHx==null)return;cr=Math.round((cHx/1e3+cr)*10)/10;bj.ci({txt:(cr>0?"+ ":"")+cr+" S",state:"none"});cr=Math.round(cr*1e3);this.eh.bQe(bId,cr,cGV);if(cGV){this.hU.cdq(cr)}else{this.eh.XJ(this.bMC);if(!cHw)this.hU.cdq(cr)}this.eh.ccj(bId,cr,cGV)};byx.ckB=function(bu,cr,clw,clv){this.ccn(cr>0?-.5:.5,"deskLrc")};bj.cU("/?/frame/foot/player/",bC.VR)})()</textarea>
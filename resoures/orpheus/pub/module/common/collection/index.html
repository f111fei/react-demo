<meta charset="utf-8"/> <textarea name="ntp" id="m-xpl-viewer"> <div class="m-mymsc"> <div class="u-lhd"> <div class="g-wrap2"> <h3 class="s-fc1"> <span class="j-flag"></span>（<span class="j-flag">0</span>） </h3> <ul class="style u-stab j-flag"> <li title="大图模式"> <svg><use xlink:href="orpheus://orpheus/style/res/svg/icon.sp.svg#stab_pic"></use></svg> </li> <li title="列表模式"> <svg><use xlink:href="orpheus://orpheus/style/res/svg/icon.sp.svg#stab_list"></use></svg> </li> <li title="图列模式"> <svg><use xlink:href="orpheus://orpheus/style/res/svg/icon.sp.svg#stab_mix"></use></svg> </li> </ul> </div> </div> <div class="g-wrap2 j-flag"> <div class="j-flag"></div> <div class="j-flag"></div> </div> </div> </textarea> <textarea name="jst" id="m-xpl-mdt-list-bigp"> <div class="m-list m-list-recmd f-flex j-bigp"></div> </textarea> <textarea name="jst" id="m-xpl-mdt-list"> {list beg..end as y} {var x=xlist[y]} {if x} {if isx(x.id)} {if showPlayRecord} <li> <div class="cvr u-cover z-rst" ${commonJST('com-res', 1, x.id, '', true, from.fid, from.data)}> <a href="#/m/personal/record/?uid=${uid}&nickname=${parseName(nickname)}" class="lnk"> ${commonJST('com-img', x.coverImgUrl, from.coverSize||'138y138', ' ')} </a> <span class="ply f-pa f-cp" ${commonJST('com-res', 1, x.id, 'play', false, from.fid, from.data)}> ${commonJST('com-svg', 'cover.sp.svg#play_rb')} </span> </div> <div class="desc"> <h3 class="f-thide2"> <a href="#/m/personal/record/?uid=${uid}&nickname=${parseName(nickname)}">{if isHost}我的{/if}${x.name|escape}</a> </h3> <p class="f-thide s-fc4"> <span class="inf">累计听歌${listenSongs||0}首</span> </p> </div> </li> {/if} {else} ${commonJST('com-playlist', x, from, y)} {/if} {/if} {/list} </textarea> <textarea name="jst" id="m-xpl-mlb-sub-playlist"> <div class="td sub-1-${x.id}"> {var showSub = !x.subscribed && x.userId!=hostId} {if showSub} <a href="javascript:;" class="icnnum s-fc4" ${commonJST('com-res', 1, x.id, 'fav')}> <span class="icn u-icn"> ${commonJST('com-svg', 'icon.sp.svg#btn_fav')} </span> <span>${x.subscribedCount|default:'0'|escape}</span> </a> {else} <span class="icnnum s-fc4"> <span class="icn u-icn"> ${commonJST('com-svg', 'icon.sp.svg#btn_fav')} </span> <span>${x.subscribedCount|default:'0'|escape}</span> </span> {/if} </div> </textarea> <textarea name="jst" id="m-xpl-mlb-ply-playlist"> <div class="td"> <a href="javascript:;" class="icnnum s-fc4" ${commonJST('com-res', 1, x.id, 'play', false, from.fid, from.data)}> <span class="icn u-icn"> ${commonJST('com-svg', 'icon.sp.svg#btn_play_sml')} </span> <span class="pc-1-${x.id}">${playCountFormat(x.playCount)}</span> </a> </div> </textarea> <textarea name="jst" id="m-xpl-mlb-list"> <div class="m-tblist"> {list beg..end as y} {var x=xlist[y]} {if !!x} {if isx(x.id)} {if showPlayRecord} <li class="itm f-cb" ${commonJST('com-res', 1, x.id, '', true, from.fid, from.data)}> <div class="td"> <figure class="u-cover u-cover-tn z-rst"> <a href="#/m/personal/record/?uid=${uid}&nickname=${parseName(nickname)}" class="lnk"> <img /> </a> <span class="ply f-pa f-cp" ${commonJST('com-res', 1, x.id, 'play', '', from.fid, from.data)}> ${commonJST('com-svg', 'cover.sp.svg#play_rb')} </span> </figure> <h4> <a href="#/m/personal/record/?uid=${uid}&nickname=${parseName(nickname)}">{if isHost}我的{/if}${x.name|escape}</a> </h4> </div> <div class="td"> <span class="info s-fc4">累计听歌${listenSongs||0}首</span> </div> </li> {/if} {else} <li class="itm f-cb" ${commonJST('com-res', 1, x.id, '', true, from.fid, from.data)}> <div class="td"> <figure class="u-cover u-cover-tn"> <a href="#/m/playlist/?id=${x.id}" class="lnk"> ${commonJST('com-img', x.coverImgUrl, '40y40')} {if x.highQuality}<div class="corner f-pa"><svg><use xlink:href="orpheus://orpheus/style/res/svg/cover.sp.svg#crown"></use></svg></div>{/if} </a> <span class="ply f-pa f-cp" ${commonJST('com-res', 1, x.id, 'play', '', from.fid, from.data)}> ${commonJST('com-svg', 'cover.sp.svg#play_rb')} </span> </figure> <h4> <a href="#/m/playlist/?id=${x.id}">${x.name|escape}</a> </h4> </div> <div class="td s-fc4"> <span class="info">歌曲：<span class="tc-1-${x.id}">${x.trackCount||0}</span>首</span> </div> <div class="td s-fc4"> <span class="by ellipsis">by&nbsp;<a href="#/m/personal/?uid=${x.userId}" class="s-fc3">{if x.creator && x.creator.nickname}${x.creator.nickname|escape}{/if}</a></span> </div> ${commonJST('m-xpl-mlb-sub-playlist', x, hostId)} ${commonJST('m-xpl-mlb-ply-playlist', x, from)} </li> {/if} {/if} {/list} </div> </textarea> <textarea name="jst" id="m-collection-empty-list"> <div class="m-plylist m-plylist-mix m-plylist-mix-empty"> <div class="empty s-fc4">${text|default:'暂无音乐'}</div> </div> </textarea> <textarea name="js">(function(){var byz=NEJ.P,byA=byz("nej.e"),bi=byz("nej.v"),cmw=byz("nej.ui"),bU=byz("nej.ut"),bm=byz("nej.u"),bj=byz("nm.x"),bp=byz("nm.d"),bxI=byz("nm.i"),byx,byD;bj.Dq=NEJ.C();byx=bj.Dq.bS(cmw.hl);byx.eo=function(){this.Yl="m-xpl-viewer"};byx.byL=function(){this.byO();var bg=byA.bV(this.bA,"j-flag");this.FD=bg.shift();this.qu=bg.shift();this.bTP=bg.shift();this.Ay=bg.shift();this.bAi=bg.shift();this.bFn=bg.shift();this.eZ={selected:"z-sel",list:byA.gj(this.bTP),onchange:this.bjc.byB(this)};this.bL={limit:20,parent:this.bAi,cache:{klass:bp.dZ,data:{},onerror:bj.jD.byP(this,false,this.bAi)},pager:{clazz:"m-page",parent:this.bFn},onbeforelistload:this.jG.byB(this),onafteradd:this.zN.byB(this),onafterdelete:this.zN.byB(this),onafterlistrender:this.hR.byB(this),onemptylist:this.qM.byB(this,"none")};this.gn=[{klass:"m-xpl-mdt-list",isx:bj.ol,from:{fid:-7,showTrackCount:!0,coverSize:"120y120"}},{klass:"m-xpl-mlb-list",isx:bj.ol,isnew:dc.playlist.lM.byB(dc.playlist),isfav:dc.playlist.nJ.byB(dc.playlist),isdft:dc.playlist.Hf.byB(dc.playlist),playcountFormat:bj.bED,from:{fid:-7}},{klass:bxI.EC,from:1,type:0,count:5,cache:bp.cG}];ctl.commonJST.cVX("m-xpl-mlb-sub-playlist",{resetDataName:["x","hostId"]});ctl.commonJST.cVX("m-xpl-mlb-ply-playlist",{resetDataName:["x","from"],playCountFormat:bj.bED})};byx.cJ=function(blZ){this.cK(blZ);this.EH(blZ.title);byA.bJ(this.bA,"f-dn");var cJN=this.bL.cache;cJN.lkey=blZ.lkey;cJN.data.uid=blZ.uid;this.dA=blZ.type;this.kQ=!!blZ.last;this.gn[2].lkey=blZ.lkey;var iO={uid:blZ.uid,nickname:blZ.nickname,isHost:blZ.isHost,showPlayRecord:!!blZ.showPlayRecord,listenSongs:blZ.listenSongs||0,parseName:encodeURIComponent,hostId:localCache.cF("host.profile.userId"),commonJST:ctl.commonJST.cFB};bm.cj(this.gn,function(bl){NEJ.X(bl,iO)},this);if(this.dA==0){this.bL.first=this.bL.limit+(iO.showPlayRecord?0:1)}else{this.bL.first=this.bL.limit}this.eZ.index=parseInt(blZ.mode)||0;if(navigator.offline){bj.jD(null,false,this.bAi);return}if(!!this.Aw)this.Aw.bQ();this.Aw=bU.cBY.bG(this.eZ);this.dO([[bp.dZ,"itemchange",this.bFw.byB(this)]])};byx.bFw=function(byy){if(!byy||byy.attr!="playCount"&&byy.attr!="subscribedCount"&&byy.attr!="trackCount"||!byy.data)return;var bh=byy.data;if(byy.attr=="playCount"){if(this.zM==2)return;var ko=byA.bV(this.bL.parent,"pc-1-"+bh.id);if(ko&&ko.length){var bTG=bj.bED(bh.playCount);bm.cj(ko,function(bk){bk.innerText=bTG})}}else if(byy.attr=="trackCount"){if(this.zM==2)return;var ko=byA.bV(this.bL.parent,"tc-1-"+bh.id);if(ko&&ko.length){var bFx=bh.trackCount;bm.cj(ko,function(bk){bk.innerText=bFx})}}else{if(this.zM==1){var ko=byA.bV(this.bL.parent,"sub-1-"+bh.id);if(ko&&ko.length){var yj=localCache.cF("host.profile.userId");bm.cj(ko,function(bk){bj.cWn(bk,ctl.commonJST.cFB("m-xpl-mlb-sub-playlist",bh,yj))},this)}}else if(this.zM==2){var bl=byA.Vy(bh.id);if(!!bl)bl.bDO(byy)}}};byx.dH=function(){this.RO();this.dI();delete this.dA;if(!!this.Aw){this.Aw.bQ();delete this.Aw}if(!!this.cw){this.cw.bQ();delete this.cw}this.bL.parent.style.minHeight=""};byx.bjc=function(byy){var bof="";if(this.cw){bof=this.bL.parent.clientHeight+"px"}var boi=this.bL.parent;boi.style.minHeight=bof;if(!!this.cw){this.cw.bQ();delete this.cw}this.bF("onModeChange",byy.index);this.zM=byy.index;this.bL.item=this.gn[byy.index];if(this.zM==0){byA.eB(this.bAi,"m-xpl-mdt-list-bigp");this.bL.parent=byA.bV(this.bAi,"j-bigp")[0]}else{this.bAi.innerHTML="";this.bL.parent=this.bAi}if(this.bL.parent!=boi){this.bL.parent.style.minHeight=bof;boi.style.minHeight=""}if(this.zM==1){byA.bJ(this.bAi.parentNode,"g-wrap2 g-wrap5");if(this.kQ){this.bL.pager.clazz="m-page"}else{this.bL.pager.clazz="m-page m-page-4"}}else{byA.bK(this.bAi.parentNode,"g-wrap2");byA.bJ(this.bAi.parentNode,"g-wrap5");this.bL.pager.clazz="m-page"}this.cw=bU.kl.bG(this.bL)};byx.jG=function(byy){byy.value=byA.gy("m-xwgt-list-loading");if(this.zM==0)bj.bim(byy.parent)};byx.hR=function(){return function(byy){this.bL.parent.style.minHeight="";if(this.dA==0){this.qu.innerText=byy.list.length-1||0}else{this.qu.innerText=byy.list.length||0}if(this.zM==0)bj.bnO("li",byy.parent);if(byy.list.length){byA.bJ(this.bA,"f-dn")}else{byA.bK(this.bA,"f-dn")}}}();byx.zN=function(byy){byy.stopped=!0;this.cw.hM()};byx.qM=function(zJ,byy){this.qu.innerText=0;byy.value=byA.gk("m-common-empty-list",{text:"暂无数据~"});byA.bK(this.bA,"f-dn")};byx.EH=function(oS){this.FD.innerText=oS||"歌单"}})();
(function(){var byz=NEJ.P,cJO=NEJ.O,byA=byz("nej.e"),bj=byz("nm.x"),bp=byz("nm.d"),bY=byz("nm.m"),bC=byz("nm.m.x"),byx,byD;bC.RT=NEJ.C();byx=bC.RT.bS(bY.cW);byx.byG=function(){this.dg();this.bA=byA.iz("div");this.tA={title:"歌单",shortcut:"s-collection-crtplalst",parent:this.bA};this.ql={title:"收藏",shortcut:"s-collection-favplylst",parent:this.bA,last:!0};this.byJ={onlistload:this.rD.byB(this)}};byx.byT=function(blZ){if(!this.bH)this.bH=bp.dZ.bG(this.byJ);this.cmx(blZ);logger.warn("/?/playlist/ -> show")};byx.dq=function(blZ){this.dC(blZ);var bP=blZ.param||cJO,dM=blZ.input||cJO,hr=localCache.cF("host.profile.userId"),bZ=bP.uid||dM.uid||hr,bnA=bZ==hr,hy=bP.nickname||dM.nickname||"",cDc=bP.showPlayRecord||dM.showPlayRecord,czT=bP.listenSongs||dM.listenSongs||0;if(!!this.zE&&!!this.zC&&this.dn&&this.dn==bZ&&!!cDc==!!this.bFO)return;if(!this.kT)this.kT=bp.gO.bG();this.hP=this.kT.hw();this.bFO=!!cDc;this.dn=bZ||hr;this.tA.uid=this.dn;this.tA.nickname=hy;this.tA.mode=this.hP.plmode;this.tA.onModeChange=this.bJr.bind(this,"plmode");this.tA.lkey="playlist_new-"+this.dn;this.tA.isHost=bnA;this.tA.type=0;this.tA.showPlayRecord=cDc;this.tA.listenSongs=czT;this.ql.type=2;this.ql.uid=this.dn;this.ql.isHost=bnA;this.ql.mode=this.hP.fvmode;this.ql.onModeChange=this.bJr.bind(this,"fvmode");this.ql.lkey="playlist_fav-"+this.dn;if(bnA){this.tA.title="我创建的歌单";this.ql.title="我收藏的歌单"}else{this.tA.title="歌单";this.ql.title="收藏"}this.bxg();this.bH.wp(this.dn)};byx.bJr=function(bq,ew){this.hP[bq]=ew;this.kT.bI(this.hP)};byx.eR=function(){delete this.dn;if(!!this.kT)this.kT.bQ();delete this.kT;this.byU();this.bxg();logger.warn("/?/playlist/ -> hide")};byx.rD=function(blZ){if(blZ.key!="playlist_favorite-"+this.dn)return;this.bxg();this.zE=bj.Dq.bG(this.tA);this.zC=bj.Dq.bG(this.ql)};byx.bxg=function(){if(!!this.zE){this.zE.bQ();delete this.zE}if(!!this.zC){this.zC.bQ();delete this.zC}};bj.cU("/?/playlist/",bC.RT);bj.cU("/?/playlist/personal/",bC.RT)})()</textarea>
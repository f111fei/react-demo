<meta charset="utf-8"/> <textarea name="txt" id="m-fm-module"> <div class="m-fm q-lrc f-dn"> <section class="g-play"> <div class="fmplay"> <div class="covers f-pr j-flag"> <div class="cvr cvr-next-hide u-cover u-cover-fm f-pa j-next-hide"></div> <div class="cvr cvr-next cvr-dlt u-cover u-cover-fm f-pa j-next"></div> <div class="cvr f-pa u-cover u-cover-fm j-curr"><img></div> <div class="cvr cvr-nh f-pa u-cover u-cover-fm j-curr-nh"></div> <div class="cvr cvr-hide f-pa u-cover u-cover-fm j-curr-hide"></div> <span class="playbtn f-pa j-flag" data-action="play"> <svg class="play"> <use xlink:href="orpheus://orpheus/style/res/svg/icon.sp.svg#fm_play"></use> </svg> <svg class="pause"> <use xlink:href="orpheus://orpheus/style/res/svg/icon.sp.svg#fm_pause"></use> </svg> </span> </div> <div class="btnwrap f-cb f-pr"> <button class="btn j-flag" data-action="like" title="喜欢"> <svg> <use xlink:href="orpheus://orpheus/style/res/svg/icon.sp.svg#fm_love"></use> </svg> </button> <button class="btn" data-action="hate" title="垃圾桶"> <svg> <use xlink:href="orpheus://orpheus/style/res/svg/icon.sp.svg#fm_delete"></use> </svg> </button> <button class="btn" data-action="next" title="下一首"> <svg> <use xlink:href="orpheus://orpheus/style/res/svg/icon.sp.svg#fm_next"></use> </svg> </button> <button class="btn j-flag" data-action="more" title="更多" data-res-type="76" data-res-id="" data-res-menu="true"> <svg> <use xlink:href="orpheus://orpheus/style/res/svg/icon.sp.svg#fm_more"></use> </svg> </button> <ul class="m-fmore f-dn"> <li><a class="j-flag s-fc1" data-res-ext="playing" data-res-type="4" data-res-id="${id}" data-res-action="fav" data-action = "fav" href="#">收藏</a></li> <li><a class="j-flag s-fc1" data-res-ext="playing" data-res-ext2="fm" data-res-type="4" data-res-id="${id}" data-res-action="download" data-log-source="playdetail" data-res-from="-1" data-res-data="${id}" data-action ="down" href="#">下载</a></li> <li><a class="j-flag s-fc1" data-res-ext="playing" data-res-type="4" data-res-id="${id}" data-res-action="share" data-log-action="cltshare" data-log-type="song" data-log-source="playdetail" data-action = "share" href="#">分享</a></li> <li><a href="#/m/fmtl/" class="j-flag s-fc1" data-log-action="click" data-log-type="trashlist" data-log-source="userfm">跳转到不感兴趣列表</a></li> </ul> </div> </div> <div class="j-flag"> </div> </section> <section class="fmcmt g-wrap2 q-lrc j-flag"> </section> </div> <div class="u-load f-top j-flag">载入中...</div> <div class="m-off j-flag f-dn"> <i class="icon u-icn u-icn-offline s-fc7"><svg><use xlink:href="orpheus://orpheus/style/res/svg/icon.sp.svg#empty_offline"></use></svg></i> <h2 class="s-fc3">网络不给力哦，请检查你的网络设置~</h2> </div> </textarea> <textarea name="js">(function(){var byz=NEJ.P,cJO=NEJ.O,byA=byz("nej.e"),bi=byz("nej.v"),bD=byz("nej.cef"),bm=byz("nej.u"),bU=byz("nej.ut"),bj=byz("nm.x"),bY=byz("nm.m"),bC=byz("nm.m.i"),bp=byz("nm.d"),bTG=byz("nm.c"),bR=byz("nm.l"),byx,byD;var cVp="nm.l.f.ldblank(this)";bC.csh=NEJ.C();byx=bC.csh.bS(bY.cW);byx.byG=function(){this.bCU="m-fm";this.dg();var bg=byA.bV(this.bA,"j-flag");this.coa=bg.shift();this.lZ=bg.shift();this.cok=bg.shift();this.cwW=bg.shift();this.csf=bg.shift();this.crD=bg.shift();this.cse=bg.shift();this.cwX=bg.shift();this.iN=bg.shift();this.dcc=bg.shift();this.crC=bg.shift();this.bgY=bg.shift();this.Hu=true;this.cnR=true;this.crA=true;this.bL={parent:this.dcc,targetUmi:"/?/fmcomment/detail/"};this.lI={parent:this.iN,type:"fm",clazz:"fmlrc m-playlrc m-playlrc-fm f-pr"};ctl.fmPlayer.IG();bi.bM(bTG.MY,"onplayingstatechange",this.cFC.byB(this));bi.bM(bp.cG,"likechange",this.csd.byB(this));bi.bM(bTG.MY,"beforeswitch",this.cwY.byB(this));bi.bM(bTG.MY,"afterswitch",this.cwZ.byB(this));bi.bM(bTG.MY,"nextpreload",this.cxa.byB(this));bi.bM(bTG.MY,"offline",this.bjI.byB(this));bi.bM(bTG.beh,"switch",this.cxb.byB(this));bi.bM(this.bA,"click",this.btw.byB(this))};byx.byT=function(){var cH=false;return function(blZ){this.cmx(blZ);if(cH)ctl.fmPlayer.cqo();cH=true;bj.gM("/?/frame/brief/",{cmd:"fmonshow"});nm.log.cFs("page",{type:"userfm"});var bB=ctl.fmPlayer.cvY().current;if(bB){nm.log.cFs("page",{type:"playsong",id:bB.id||0})}}}();byx.eR=function(){this.byU(!0);bj.gM("/?/frame/brief/",{cmd:"fmonhide"})};byx.dq=function(blZ){this.dC(blZ);if(!byA.ey(this.bgY,"f-dn")){byA.bK(this.bgY,"f-dn");byA.bJ(this.crC,"f-dn");ctl.fmPlayer.IG()}};byx.cFC=function(byy){var xC={id:301};if(byy.playing){this.coT(!0);xC.tooltip="暂停";xC.url=bj.uZ("pause")}else{this.coT(!1);xC.tooltip="播放";xC.url=bj.uZ("play")}bD.bX("app.setThumbnail",{btnMiddle:xC})};byx.coT=function(cxc){if(cxc){byA.bT(this.lZ,"action","pause");byA.bK(this.lZ,"z-pause")}else{byA.bT(this.lZ,"action","play");byA.bJ(this.lZ,"z-pause")}};byx.cwY=function(byy){this.cxd(byy.action)};byx.cwZ=function(byy){this.lI.track=byy.current;this.lI.from=byy.from;if(!!this.Eu)this.Eu.bQ();this.Eu=bj.UL.bG(this.lI);this.bL.rid=byy.current.commentThreadId;if(!!this.yf)this.yf.bQ();this.yf=bj.OM.bG(this.bL);if(!this.eh)this.eh=bp.cG.bG();this.csd({like:!!this.eh.bKK(byy.current.id),id:byy.current.id});byA.bT(this.csf,"resId",byy.current.id);byA.bT(this.crD,"resId",byy.current.id);byA.bT(this.crD,"resData",byy.current.id);byA.bT(this.cse,"resId",byy.current.id);byA.bT(this.cwW,"resId",byy.current.id);var cVo=new Image;cVo.onload=this.cVr.byB(this,cVo);cVo.src=this.cVs=byy.current.album.picUrl+"?param=300y300";if(byy.previous&&byy.previous.album&&byy.previous.album.picUrl){var cVn=new Image;cVn.onload=this.cVq.byB(this,cVn);cVn.src=this.cVt=byy.previous.album.picUrl+"?param=300y300"}nm.log.cFs("page",{type:"playsong",id:this.lI.track.id||0})};byx.cVr=function(gm){if(this.cVs!==gm.src){this.cVq(gm);return}gm.onerror=cVp;byA.bV(this.coa,"j-curr")[0].innerHTML="";byA.bV(this.coa,"j-curr")[0].appendChild(gm);delete gm;if(this.Hu){this.Hu=false;byA.bJ(this.bA.children[0],"f-dn");byA.bK(this.crC,"f-dn");var mB=bj.cL(11,function(cJN){return cJN.cDX("fm_guide")}),bQg=bj.cL(11,function(cJN){return cJN.cDX("Permisson_fm_guide")});if(!bQg&&mB){this.bxW()}}};byx.cVq=function(gm){if(this.cVt!==gm.src){return}gm.onerror=cVp;byA.bV(this.coa,"j-next")[0].innerHTML="";byA.bV(this.coa,"j-next")[0].appendChild(gm);delete gm};byx.cxd=function(){var cxe=function(bg,rU){var cxf=bg.map(function(bk){return bk.className});bg.forEach(function(bk,bs){var bzT=bs+rU;if(bzT<0){bzT=3}else if(bzT>3){bzT=0}bk.className=cxf[bzT];if(!bk.innerHTML){byA.bK(bk,"cvr-dlt")}else{byA.bJ(bk,"cvr-dlt")}})};return function(bq){var kf=new Image;kf.onerror="nm.l.f.ldblank(this)";kf.src=bj.hk().cover320;if(!!this.coU&&this.coU.complete){kf=this.coU;delete this.coU}var csc=byA.bV(this.coa,"j-next-hide")[0],bzT=byA.bV(this.coa,"j-next")[0],beI=byA.bV(this.coa,"j-curr")[0],cob=byA.bV(this.coa,"j-curr-hide")[0],csb=byA.bV(this.coa,"j-curr-nh")[0],rU;if(bq=="skip"){cob.innerHTML="";cob.appendChild(kf);rU=-1}else if(bq=="back"){csc.innerHTML="";rU=1}else if(bq=="replace"){cob.innerHTML="";cob.appendChild(kf);var cxg=beI.className;var cxh=csb.className;csb.className=cob.className;beI.className=cxh;cob.className=cxg}if(rU){cxe([csc,bzT,beI,cob],rU)}}}();byx.btw=function(byy){var bk=bi.cR(byy,"d:action");if(bi.cR(byy,"c:j-next")){ctl.fmPlayer.cqs();return}switch(byA.bT(bk,"action")){case"play":ctl.fmPlayer.rA();break;case"pause":ctl.fmPlayer.NT();break;case"hate":if(this.crA){ctl.fmPlayer.cqt();this.crA=false;setTimeout(function(){this.crA=true}.byB(this),800)}break;case"like":ctl.fmPlayer.cbY(!0);break;case"unlike":ctl.fmPlayer.cbY(!1);break;case"more":bi.bF(bk,"contextmenu");break;case"next":if(this.cnR){ctl.fmPlayer.coX();this.cnR=false;setTimeout(function(){this.cnR=true}.byB(this),800)}break;default:break}};byx.hA=function(byy){if(!byy||!byy.data||!byy.data.cmd)return;switch(byy.data.cmd){case"tomin":break;case"tomax":break;case"fav":bi.bF(this.csf,"click");break;case"offline":bi.bF(this.crD,"click");break;case"share":bi.bF(this.cse,"click");break;case"tocrash":bi.bF(this.cwX,"click");break;case"back":ctl.fmPlayer.cqs();break;case"changestate":if(byA.ey(this.lZ,"z-pause"))ctl.fmPlayer.NT();else ctl.fmPlayer.rA();break}};byx.csd=function(byy){if(byy.id!=ctl.fmPlayer.cvY().current.id)return;if(byy.like){byA.bK(this.cok,"loved");bj.cVV(this.cok,"icon.sp.svg#fm_loved");byA.bT(this.cok,"action","unlike");this.cok.title="取消喜欢"}else{byA.bJ(this.cok,"loved");bj.cVV(this.cok,"icon.sp.svg#fm_love");byA.bT(this.cok,"action","like");this.cok.title="喜欢"}};byx.cxa=function(byy){this.coU=new Image;this.coU.src=byy.url+"?param=300y300"};byx.bjI=function(byy){byA.bJ(this.bgY,"f-dn");byA.bK(this.crC,"f-dn")};byx.cxb=function(bh){if(!!this.yf)this.yf.bQ();this.yf=bj.OM.bG(this.bL)};byx.bxW=function(){ctl.layer.dD({clazz:"z-show",hideNotelay:!0,mask:"m-mask m-mask-2",draggable:!1,txt:"m-xwgt-layer-fmguide-module",zIndex:1,onaction:function(bk){byA.lG(bk.parentNode)}},bR.cXa)};bj.cU("/m/fm/",bC.csh)})()</textarea>
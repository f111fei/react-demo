<meta charset="utf-8"/> <textarea name="txt" id="m-mdwning-module"> <div class="oper f-cb j-flag"> <div class="buttons"> <button class="u-ibtn5 z-off j-flag" data-action="resumeAll"> <svg><use xlink:href="orpheus://orpheus/style/res/svg/icon.sp.svg#btn_start"></use></svg>全部开始 </button> <button class="u-ibtn5 z-off j-flag" data-action="pauseAll"> <svg><use xlink:href="orpheus://orpheus/style/res/svg/icon.sp.svg#btn_pause_all"></use></svg>全部暂停 </button> </div> <button class="clear u-ibtn5 j-flag" data-action="clearAll"> <svg><use xlink:href="orpheus://orpheus/style/res/svg/icon.sp.svg#btn_delete"></use></svg>清空 </button> <div class="open1"> <span class="txt f-thide s-fc3">存储目录：<span class="j-flag">E:\CloudMusic</span></span> <a href="javascript:;" class="lnk s-fc2" data-action="folder">打开目录</a> </div> </div> <div class="j-flag"></div> </textarea> <textarea name="txt" id="m-mdwning-empty"> <div class="m-plylist m-plylist-prs m-plylist-only"> <div class="head f-cb"> <div class="fix"> <div class="th col"></div> <div class="th col"></div> </div> <div class="flow"> <div class="th col">进度</div> <div class="th col">音乐标题</div> </div> </div> <div class="z-empty"> <div class="m-off"> <i class="icon u-icn u-icn-download-empty s-fc7"><svg><use xlink:href="orpheus://orpheus/style/res/svg/icon.sp.svg#empty_dld"></use></svg></i> <h2 class="s-fc3">还没有下载的音乐哦，快去下载吧～</h2> </div> </div> </div> </textarea> <textarea name="js">(function(){var byz=NEJ.P,cJO=NEJ.O,bD=byz("nej.n"),byA=byz("nej.e"),bi=byz("nej.v"),bU=byz("nej.ut"),bj=byz("nm.x"),bxI=byz("nm.i"),bp=byz("nm.d"),bY=byz("nm.m"),bR=byz("nm.l"),bC=byz("nm.m.r"),byx,byD;bC.bOi=NEJ.C();byx=bC.bOi.bS(bY.cW);byx.byG=function(){this.bCU="m-mdwning";this.dg();var bg=byA.bV(this.bA,"j-flag");this.bLd=bg[0];this.bRn=bg[1];this.bRm=bg[2];this.ciP=bg[3];this.bLc=bg[4];this.Ov=bg[5];this.cu={parent:this.Ov,mopt:{limit:APP_CONF.offline_page,pager:{clazz:"m-page m-page-4"},item:{klass:"m-xwgt-track-list-offline-download",from:{fid:-2,data:"",isComplete:false,ext:"download",vkey:"offline_download",hideMv:true},mark:function(v){return v}},cache:{data:{},lkey:"track_offline_download",clear:!0},onemptylist:this.nL.byB(this),onafterlistrender:this.hR.byB(this),onpagechange:this.bzC.byB(this)},resizer:{tableResizerKey:"offline-download",colNum:4}};this.cS=bp.cG.bG();bi.bM(this.bLd,"click",this.ei.byB(this));bi.bM(location,"beforeurlchange",this.gv.byB(this));bi.bM(bp.cG,"listchange",this.ku.byB(this));bi.bM(bp.cG,"trackprogress",this.OX.byB(this));bi.bM(bp.cG,"offlinechange",this.xm.byB(this));this.bLb();this.eV={};this.cZ=1;this.bKa=null;this.kw={esc:!0,title:"确认",message:"是否清空下载任务",onok:this.cjp.byB(this)}};byx.byT=function(blZ){this.cmx(blZ)};byx.dq=function(blZ){this.dC(blZ);byA.bJ(this.bRn,"z-dis");byA.bJ(this.bRm,"z-dis");byA.bJ(this.ciP,"z-dis");var bP=blZ.param||cJO,dM=blZ.input||cJO,bs=bP.index||dM.index||1,cJN=bP.cache||dM.cache||!1;if(cJN&&this.cZ==bs){document.mbody.scrollTop=this.eV[this.cZ];if(!!this.byS)this.byS.bbM();return}this.cZ=bs;this.cu.mopt.pager.index=this.cZ;this.cu.mopt.item.href=blZ.href;if(!!this.byS)this.byS.bQ(this.byS);this.byS=bj.lo.bG(this.cu)};byx.eR=function(blZ){this.byU(!0)};byx.nL=function(byy){var hC=this.cu.mopt.item.href||"";byy.value=byA.gy("m-mdwning-empty");byA.bK(this.bRn,"z-dis");byA.bK(this.bRm,"z-dis");byA.bK(this.ciP,"z-dis")};byx.hR=function(){this.brL()};byx.ku=function(blZ){if(!blZ||blZ.key!=this.cu.mopt.cache.lkey)return;switch(blZ.realAction){case"sort":this.bKa=blZ.ext;return;break;case"delete":break;default:this.bKa=null;break}var di=bj.cL(4,function(cJN){return cJN.hQ("track_offline_download")});if(di){byA.bJ(this.bRn,"z-dis");byA.bJ(this.bRm,"z-dis");byA.bJ(this.ciP,"z-dis")}else{byA.bK(this.bRn,"z-dis");byA.bK(this.bRm,"z-dis");byA.bK(this.ciP,"z-dis")}};byx.bzC=function(byy){if(byy.last==byy.index)return;dispatcher.dr(this.gq+"?index="+byy.index)};byx.Jh=function(){};byx.brL=function(){if(this.bKa){byA.bK("field-"+this.bKa.field+"-"+this.cu.mopt.item.from.data+"-"+this.cu.mopt.item.from.fid,this.bKa.order)}};byx.bBW=function(){};byx.IX=function(){};byx.ei=function(byy){var bv=bi.cR(byy,"d:action");if(!bv)return;switch(byA.bT(bv,"action")){case"folder":var cq=bj.cL(11,function(cJN){return cJN.fF()});bD.bX("os.shellOpen",cq.storage.path);break;case"pauseAll":bj.cL(4,function(cJN){cJN.bPf()});break;case"resumeAll":bj.cL(4,function(cJN){cJN.bPe()});break;case"clearAll":if(this.cje)this.cje.bQ();this.cje=bR.pE.bG(this.kw).dD();break}};byx.cjp=function(){bj.cL(4,function(cJN){cJN.cjh()})};byx.bLb=function(){var dY=bj.cL(11,function(cJN){return((cJN.fF()||cJO).storage||cJO).path});this.bLc.innerText=bj.bVn(dY)};byx.gv=function(byy){if(!!byy&&!!byy.oldValue&&byy.oldValue.path==this.gq){this.eV[this.cZ]=document.mbody.scrollTop}};byx.hA=function(bn){if(!bn||!bn.data)return;!!this.byS&&this.byS.bJk(bn);var byc=bn.data.cmd||bn.data.type;switch(byc){case"clear":break}};byx.OX=function(){if(this.bKa&&this.bKa.field=="progress"){byA.bJ("field-"+this.bKa.field+"-"+this.cu.mopt.item.from.data+"-"+this.cu.mopt.item.from.fid,this.bKa.order);this.bKa=null}};byx.xm=function(byy){if(this.bKa&&this.bKa.field=="state"&&byy&&byy.newValue!=4&&byy.newValue>0){byA.bJ("field-"+this.bKa.field+"-"+this.cu.mopt.item.from.data+"-"+this.cu.mopt.item.from.fid,this.bKa.order);this.bKa=null}};bj.cU("/m/offline/download/",bC.bOi,!0)})()</textarea>
<meta charset="utf-8"/> <textarea name="txt" id="m-yrtk-module"> <div class="p-dtalb q-lrc"> <div class=""> <div class="j-t"></div> <div class="j-t"></div> </div> <div class="m-list m-list-alb"> <ul class="f-flex"></ul> </div> <div class="m-tblist s-fc4"></div> <div class="j-flag u-addmore">加载更多</div> </div> </textarea> <textarea name="jst" id="m-xalm-mdt-list"> {list beg..end as y} ${commonJST('com-album', xlist[y], from)} {/list} {list 1..15 as x} <li class="j-leftfix"></li> {/list} </textarea> <textarea name="jst" id="m-xalm-mlb-list"> {list beg..end as y} {var x=xlist[y]} <div class="itm f-cb j-item" data-res-id="${x.id}" data-res-menu="true" data-res-type="2" data-res-from="4"> <div class="td"> <div class="u-cover u-cover-tnalb"> <a data-href="#/m/album/?id=${x.id}" href="#" class="lnk"> ${commonJST('com-img', x.picUrl, '40y40')} </a> </div> <h4><a data-href="#/m/album/?id=${x.id}" href="#">${x.name}{var alias = getAlias(x)}{if alias}&nbsp;<span class="s-fc4">(${escape2(alias)})</span>{/if}</a></h4> </div> <div class="td"><span>${x.size}首</span></div> <div class="td"></div> <div class="td"><span>发行时间：${x.publishTime|format:'yyyy-MM-dd'}</span></div> </div> {/list} </textarea> <textarea name="js">(function(){var byz=NEJ.P,cJO=NEJ.O,byA=byz("nej.e"),bU=byz("nej.ut"),bi=byz("nej.v"),bj=byz("nm.x"),bxI=byz("nm.i"),bp=byz("nm.d"),bY=byz("nm.m"),bC=byz("nm.m.y"),gD=byz("nm.w"),byx;bC.bDk=NEJ.C();byx=bC.bDk.bS(bY.cW);byx.byG=function(){this.bCU="m-yrtk";this.dg();this.kk=byA.gj(this.bA);this.ckj=this.kk[0];this.cjw=this.kk[1];this.cjw=byA.gj(this.cjw)[0];this.cki=this.kk[2];this.cjR=byA.bV(this.bA,"j-t");this.bPh=this.cjR[0];this.cfp=this.cjR[1];this.eZ={onlistload:this.bmI.byB(this),onerror:this.gF.byB(this)};this.bL={limit:5,delta:9999,more:this.kk[3],parent:this.cjw,cache:{data:{},klass:bp.lA},item:{cache:bp.cG,count:10,type:2,klass:bxI.EC,getAlias:bj.csw,escape2:bj.fg,from:{fid:4,biEvent:{action:"play",params:{type:"album",source:"artist",id:{get:"id"}}},showPublishTime:!0},commonJST:ctl.commonJST.cFB},onafteradd:this.zN.byB(this),onafterdelete:this.zN.byB(this),onbeforelistload:this.Ak.byB(this),onbeforelistclear:this.bzb.byB(this),onbeforelistrender:this.bkJ.byB(this),onafterlistrender:this.hR.byB(this),onemptylist:this.chM.byB(this)};this.ckL={emptyCount:0,emptyCountMax:2}};byx.hA=function(byy){if(!byy||!byy.data||!byy.data.cmd)return;switch(byy.data.cmd){case"clear":this.RO();this.bdG();delete this.eV;break;case"switchMode":if(byy.data.mode<2){byA.bK(this.bPh,"f-dn")}this.gP({id:this.kH,mode:byy.data.mode});break}};byx.byT=function(blZ){if(!this.HO)this.HO=bp.cG.bG(this.eZ);this.dO([[location,"beforeurlchange",this.gv.byB(this)]]);this.cmx(blZ)};byx.dq=function(blZ){var bP=blZ.param;if(bP.mode==undefined)bP.mode=2;if((bP||cJO).cache&&bP.id==this.kH&&this.kU==bP.mode){document.mbody.scrollTop=this.eV;return}if(blZ.data&&blZ.data.mode!==undefined)bP.mode=blZ.data.mode;this.gP(bP);this.dC(blZ)};byx.gP=function(bP){this.kH=bP.id;this.kU=bP.mode;this.bL.item.uid=this.kH;this.bL.item.lkey="artist";var cJN=this.bL.cache;cJN.data.id=this.kH;cJN.lkey="album-"+this.kH;if(!!this.cw){this.cw.bQ();delete this.cw}switch(this.kU){case 0:this.bL.limit=20;this.bL.parent=this.cjw;this.bL.item.klass="m-xalm-mdt-list";byA.bJ(this.cjw.parentNode,"f-dn");byA.bEq(this.bA,"g-wrap5 g-wrap1","g-wrap");byA.bK(this.bPh,"f-dn");this.bL.cache.onerror=this.ej.byP(this,false,this.bL.parent);break;case 1:this.bL.limit=20;this.bL.parent=this.cki;this.bL.item.klass="m-xalm-mlb-list";byA.bK(this.cjw.parentNode,"f-dn");byA.bEq(this.bA,"g-wrap5 g-wrap","g-wrap1");byA.bK(this.bPh,"f-dn");this.bL.cache.onerror=this.ej.byP(this,false,this.bL.parent);break;default:this.ckL.emptyCount=0;this.bL.limit=5;this.bL.parent=this.cfp;this.bL.item.klass=bxI.EC;byA.bK(this.cjw.parentNode,"f-dn");byA.bEq(this.bA,"g-wrap1 g-wrap","g-wrap5");byA.bJ(this.bPh,"f-dn");this.bL.cache.onerror=this.ej.byP(this,false,this.bL.parent);this.HO.fE({key:"track_artist_top-"+this.kH,data:{top:50,id:this.kH}})}this.bL.sbody=document.mbody;this.cw=bU.jN.bG(this.bL)};byx.bmI=function(blZ){if(blZ.key!="track_artist_top-"+this.kH||blZ.data.id!=this.kH)return;var bg=this.HO.byI("track_artist_top-"+this.kH);if(!bg||bg.length==0){byA.bK(this.bPh,"f-dn");if(this.kU==2){this.ckL.emptyCount++;if(this.ckL.emptyCount>=this.ckL.emptyCountMax){byA.eB(this.bL.parent,"m-common-empty-list1",{text:"没有相关专辑"})}}return}if(this.HG){this.HG=this.HG.bQ()}this.HG=byA.DP([{id:this.kH,name:"热门50首"}],bxI.EC,{type:3,from:4,count:10,parent:this.bPh})[0];byA.bJ(this.bPh,"f-dn");if(this.kU==0||this.kU==1)return};byx.bzb=function(byy){bj.mn(byy.parent);switch(this.kU){case 0:break;case 1:break;case 2:break}};byx.bkJ=function(byy){bj.bim(byy.parent)};byx.hR=function(byy){switch(this.kU){case 0:break;case 1:break;case 2:this.ckj.insertAdjacentElement("afterBegin",this.bPh);break}};byx.zN=function(byy){byy.stopped=!0;this.cw.hM()};byx.chM=function(byy){this.bdo("m-common-empty-list1",{text:"没有相关专辑"},byy);if(this.kU==2){this.ckL.emptyCount++;if(this.ckL.emptyCount>=this.ckL.emptyCountMax){byA.eB(this.bL.parent,"m-common-empty-list1",{text:"没有相关专辑"})}byy.stopped=!0}};byx.gF=function(byy){if(bj.hi(byy)){byA.bK(this.bPh,"f-dn")}};byx.eR=function(){this.byU(!0)};byx.gv=function(byy){if(!!byy&&!!byy.oldValue&&byy.oldValue.path==this.gq){this.eV=document.mbody.scrollTop}};bj.cU("/m/artist/",bC.bDk,!0)})()</textarea>
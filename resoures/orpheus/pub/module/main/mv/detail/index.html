<meta charset="utf-8"/> <textarea name="txt" id="m-mvdetail-module"> <div class="g-mv n-mvdtl"> <div class="mvwrap f-cb"> <div class="mvmain"> <div class="mvtitle j-flag"></div> <div class="mvbox j-flag"></div> <div class="mvbtn f-cb j-flag"></div> <div class="j-flag"></div> </div> <div class="mvsd"> <div class="j-flag"></div> <div class="j-flag"></div> </div> <div class="j-flag"></div> </div> </div> </textarea> <textarea name="ntp" id="m-mvdetail-commt"> <div> <div class="u-head1"> <h2 class="u-tit f-ff2"><a class="j-flag" href="javascript:;">评论</a></h2> <span class="tip s-fc4 j-flag"></span> </div> <div class="s-fc3 j-flag"> </div> <div class="m-more j-flag" style="padding-top:15px;text-align:right;"> <a href="javascript:;" class="s-fc3 j-flag">查看更多&gt;</a> </div> </div> </textarea> <textarea name="ntp" id="m-mvdetail-rec"> <h3 class="f-fs4 s-fc3 f-ff2"><span>相关MV</span></h3> <ul class="mvlist j-flag"></ul> </textarea> <textarea name="jst" id="m-mvdetail-title"> <a href="javascript:;" class="f-ust back f-thide" title="${mv.name}" data-action="back"> <svg title="返回"><use xlink:href="orpheus://orpheus/style/res/svg/icon.sp.svg#mv_back"></use></svg> <h2 class="f-ff2 f-thide">${mv.name}</h2></a>{if !!mv.artistId}<a href="#/m/artist/?id=${mv.artistId}" title="${mv.artistName}" class="artist f-ust s-fc3 f-thide">${mv.artistName}</a>{else}<span title="${mv.artistName}" class="artist f-ust s-fc3 f-thide">${mv.artistName}</span>{/if} </textarea> <textarea name="jst" id="m-mvdetail-desc"> {if !!publishTime || desc !== "" || briefdesc !== ""} <h3 class="f-fs4 s-fc3 f-ff2"><span>MV介绍</span></h3> <div class="intr s-fc3{if fold} js-fold{/if}"> {if !!publishTime}<h4 class="s-fc4">发布时间：${publishTime}</h4>{/if} <h4 class="s-fc4">播放次数：<em class="s-fc4" id="mvPlayCount">${pc(playCount||0)}次</em></h4> <h4 class="brief f-ust">${briefdesc}</h4> {if desc !== ""} <p class="p1 f-ust">简介：${desc}</p> {if fold} <p class="p2 f-ust">简介：${completedesc}</p> <span class="oper" title="展开" data-action="switch" data-fold="true"><svg><use xlink:href="orpheus://orpheus/style/res/svg/icon.sp.svg#detail_more"></use></svg></span> <span class="oper z-fold" title="收起" data-action="switch" data-fold="false"><svg><use xlink:href="orpheus://orpheus/style/res/svg/icon.sp.svg#detail_more"></use></svg></span> {/if} {/if} </div> {/if} </textarea> <textarea name="jst" id="m-mvdetail-button"> {if mv.subed} <button class="u-ibtn5 faved" data-res-type="10" data-res-action="unfav" data-res-id="${mv.id}"><svg><use xlink:href="orpheus://orpheus/style/res/svg/icon.sp.svg#btn_fav"></use></svg>已收藏(${mv.subCount||0})</button> {else} <button class="u-ibtn5" data-res-type="10" data-res-action="fav" data-res-id="${mv.id}"><svg><use xlink:href="orpheus://orpheus/style/res/svg/icon.sp.svg#btn_fav"></use></svg>收藏(${mv.subCount||0})</button> {/if} <button class="u-ibtn5"  id="mvShare" data-res-type="10" data-res-action="share" data-res-id="${mv.id}"><svg><use xlink:href="orpheus://orpheus/style/res/svg/icon.sp.svg#btn_share"></use></svg>分享(${mv.shareCount||0})</button> {if offlineState>=0} <button class="u-ibtn5 z-dis"><svg><use xlink:href="orpheus://orpheus/style/res/svg/icon.sp.svg#btn_dld"></use></svg>{if offlineState==4}已下载{else}下载中{/if}</button> {else} <button class="u-ibtn5" data-res-type="10" data-res-action="download" data-res-id="${mv.id}"><svg><use xlink:href="orpheus://orpheus/style/res/svg/icon.sp.svg#btn_dld"></use></svg>下载</button> {/if} </textarea> <textarea name="jst" id="m-mvdetail-simliar"> {list beg..end as y} {var x=xlist[y]} <li class="f-cb"> <div class="u-cover u-cover-mmv"> <a href="#/m2/mv/?source=related&position=${y+1}&alg=${x.alg}&id=${x.id}" class="lnk"> ${commonJST('com-img', x.cover||cover, '119y67')} </a> </div> <div class="cnt"> <p> <a href="#/m2/mv/?source=related&position=${y+1}&alg=${x.alg}&id=${x.id}" title="${x.name}"> <span class="f-thide2">${x.name}</span> </a> </p> <p> <a href="#/m/artist/?id=${x.artistId}" class="s-fc4">${x.artistName}</a> </p> </div> </li> {/list} </textarea> <textarea name="js">(function(){var byz=NEJ.P,cJO=NEJ.O,byA=byz("nej.e"),bi=byz("nej.v"),bU=byz("nej.ut"),bm=byz("nej.u"),bj=byz("nm.x"),bxI=byz("nm.i"),bp=byz("nm.d"),bY=byz("nm.m"),gD=byz("nm.w"),bR=byz("nm.l"),bC=byz("nm.m.r"),qC=byz("nej.cef.ut"),bTG=byz("nm.c"),byx,byD;bC.bPo=NEJ.C();byx=bC.bPo.bS(bY.cW);byx.byG=function(){this.bCU="m-mvdetail";this.dg();var bg=byA.bV(this.bA,"j-flag");this.cbn=bg[0];this.nu=bg[1];this.mh=bg[2];this.ces=bg[4];this.chD=bg[6];this.byJ={onitemload:this.cet.byB(this),onerror:this.gF.byB(this)};this.bL={parent:bg[3]};this.dG={parent:bg[5]}};byx.byT=function(blZ){byA.bK(document.body,"mq-mv");ctl.player.cHW(ctl.mvPlayer);localCache.bSX("mvShow",!0);this.cfg=blZ.referer;if(!this.caW)this.caW=bp.bPF.bG(this.byJ);if(!this.crq)this.crq=bj.bUi.kE();this.dO([[bp.bPF,"itemchange",this.tj.byB(this)],[this.bA,"click",this.ei.byB(this)],[gD.bOW,"mvfullscreenshare",this.chk.byB(this)],[gD.bOW,"mvfullscreencomment",this.chl.byB(this)],[bp.cG,"offlinechange",this.xm.byB(this)],[bTG.bBN,"off",this.cPt.byB(this)]]);this.cmx(blZ)};byx.dq=function(blZ){this.dC(blZ);this.nu.innerHTML="";byA.bJ(this.nu.parentNode,"f-dn");byA.bJ(this.ces.parentNode,"f-dn");this.chD.innerHTML="";this.bFf=!1;this.bEW=!1;var bP=blZ.param||cJO,bo=bP.id,gi=bP.source||"others",cUT=bP.go||false;this.byZ=bo;this.bL.rid=bj.bAw(10,this.byZ);var oH=this.caW.cl(bo);if(oH){this.caW.bvP(bo);byA.eB(this.cbn,"m-mvdetail-title",{mv:oH,pc:bj.bED.byB(this)})}if(this.hU){this.hU.bQ();delete this.hU}this.hU=gD.bOW.bG({parent:this.nu,id:this.byZ});this.caW.hv({key:"mv",id:this.byZ,ext:{go:cUT},data:{id:bo,type:"mp4"}});nm.w.mv.log.info("mv detail id={0}",this.byZ);nm.log.dE("play","mv",this.byZ,{id:this.byZ,type:"mv",source:gi,wifi:navigator.offline?0:1,download:dc.mv.nx(bo)==4?1:0});if(gi=="related"){nm.log.dE("recommendclick","mv",this.byZ,{id:this.byZ,scene:"mv-mv-recommend",position:bP.position,alg:bP.alg})}};byx.cet=function(bn){var oH=dc.mv.cl(bn.id),gL="",chE=0;oH.subCount=Math.max(0,oH.subCount||0);if(!dc.mv.bVh(bn.id)){this.cfY=bn.id;if(!bn.ext.go){dc.mv.bJO(bn.id,"play")}this.hU.cTY(bn.id)}else{if(dc.mv.nx(bn.id)==4){gL="file:///"+this.caW.bVf(bn.id);chE=this.caW.crc(bn.id)}var cbh=oH.brs||[],iK={mvDetail:oH,localBit:undefined};bm.dP(cbh,function(bl,bs){iK["q"+bl.br]=NEJ.X({},bl)});if(chE==240||chE==480||chE==720||chE==1080){if(!iK["q"+chE]){iK["q"+chE]={}}iK["q"+chE].url=gL;iK["q"+chE].local=!0;iK.localBit="q"+chE}this.hU.ceo(iK);this.caW.Hh(this.byZ)}byA.eB(this.cbn,"m-mvdetail-title",{mv:oH,pc:bj.bED.byB(this)});byA.eB(this.mh,"m-mvdetail-button",{mv:oH,offlineState:this.caW.nx(oH.id)});var bxB=!!oH.desc?oH.desc.trim():"";var jF=bm.rV(bxB);var sB=312;if(jF>316){var bs;for(bs=sB;bm.rV(bxB.slice(0,bs))>sB;bs--){}bxB=bxB.slice(0,bs)+"..."}byA.eB(this.ces,"m-mvdetail-desc",{desc:bxB,publishTime:oH.publishTime,playCount:oH.playCount,completedesc:!!oH.desc?oH.desc.trim():"",briefdesc:!!oH.briefDesc?oH.briefDesc.trim():"",fold:jF>304,pc:bj.bED.byB(this)});this.dG.mvId=this.byZ;this.bFf=!0;this.bEW=!1;this.UX=this.bFt.byB(this,this.byZ);setTimeout(function(){if(this.UX)this.UX()}.byB(this),0)};byx.bFt=function(bo){if(this.byZ!=bo||!this.bFf||this.bEW)return;if(!!this.ccL)this.ccL.bQ();if(!!this.bAP)this.bAP.bQ();this.bAP=bj.ccJ.bG(this.dG);this.ccL=bj.ccI.bG(this.bL);this.bEW=!0;this.UX=null;var dk=localCache.cg("notify-play");if(!!dk){localCache.bSX("notify-play",null)}};byx.tj=function(byy){var bh=byy.data||cJO;if(byy.attr=="sub"||byy.attr=="shareCount"){byA.eB(this.mh,"m-mvdetail-button",{mv:bh,offlineState:this.caW.nx(bh.id)})}if(byy.attr=="playCount"){var ccM=byA.cg("mvPlayCount");if(ccM)ccM.innerText=bj.bED(bh.playCount)+"次"}};byx.ei=function(byy){var ccM=bi.cR(byy,"d:action");if(!ccM)return;switch(byA.bT(ccM,"action")){case"back":this.cMx();return;case"switch":var cbH=byA.bT(ccM,"fold")=="false"?false:true;var cD=ccM.parentNode;if(cbH){byA.bJ(cD,"js-fold");byA.bK(cD,"js-unfold")}else{byA.bJ(cD,"js-unfold");byA.bK(cD,"js-fold")}return}};byx.gF=function(byy){if(this.caW.nx(this.byZ)==4){this.crq.cxm("select * from web_offline_track where id='offline-mv-"+this.byZ+"';",this.cxj.byB(this,this.byZ))}else{this.crb()}};byx.crb=function(){byA.bK(this.nu.parentNode,"f-dn");byA.bK(this.ces.parentNode,"f-dn");this.ej(null,false,this.chD,"",{isPage:true})};byx.cxj=function(bo,bn){if(this.byZ==bo){if(bn&&bn.err==0&&bn.ret&&bn.ret.length){this.caW.cum(bn.ret[0]);var oH=this.caW.cl(bo);if(!oH)this.crb();else this.cet({id:bo})}else{this.crb()}}};byx.chk=function(){setTimeout(function(){var bk=byA.cg("mvShare");if(!!bk)bk.click()},150)};byx.chl=function(){setTimeout(function(){this.bA.scrollTop=480}.byB(this),100)};byx.eR=function(blZ){byA.bJ(document.body,"mq-mv");localCache.bSX("mvShow",!1);if(this.hU){this.hU.bQ();delete this.hU}if(this.caW){this.caW.bQ();delete this.caW}this.byU();ctl.player.cLp(ctl.mvPlayer)};byx.hA=function(byy){if(!byy||!byy.data||!byy.data.cmd)return;switch(byy.data.cmd){case"volumeup":case"volumedown":case"switchstate":if(!!this.hU)this.hU.cfZ({cmd:byy.data.cmd});break;case"back":this.cMx();break}};byx.xm=function(byy){if(byy&&byy.id=="offline-mv-"+this.byZ&&this.caW){var oH=this.caW.cl(this.byZ);if(!!oH){byA.eB(this.mh,"m-mvdetail-button",{mv:oH,offlineState:byy.newValue})}}};byx.cMx=function(){if(this.bfC){if(this.cfg&&this.cfg.indexOf("/m2/mv/")>-1){location.href="#/m/disc/rec/"}else{location.href="#"+this.cfg}}};byx.cPt=function(){this.cMx()};bj.cU("/m2/mv/",bC.bPo)})()</textarea>
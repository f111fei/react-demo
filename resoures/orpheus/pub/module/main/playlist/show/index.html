<meta charset="utf-8"/> <textarea name="txt" id="m-ypsh-module"> <div class="g-wrap j-flag"></div> <nav class="u-tab2 f-cb j-flag"> <ul class="j-flag"> <li> <a class="j-flxg" href="#/m/playlist/" data-id="/m/playlist/" data-log-action="tab" data-log-type="songlist" data-log-source="list">歌曲列表</a> </li> <li> <a class="j-flxg" href="#/m/playlist/comment/" data-id="/m/playlist/comment/" data-log-action="tab" data-log-type="comment" data-log-source="list">评论(<span class="j-flag">0</span>)</a> </li> <li> <a class="j-flxg" href="#/m/playlist/fav/" data-id="/m/playlist/fav/" data-log-action="tab" data-log-type="subscriber" data-log-source="list">收藏者</a> </li> </ul> <div class="m-lstoper"> <div class="u-lcsch j-flag"><input class="j-flag" type="text" placeholder="搜索歌单音乐"><span class="sch-btn j-flag"><svg><use xlink:href="orpheus://orpheus/style/res/svg/icon.sp.svg#search"></use></svg></span></div> </div> </nav> <div class="n-ypsh-box g-wrap1 q-lrc j-flag"></div> </textarea> <textarea name="jst" id="m-ypsh-detail"> {var u=creator||playlist.creator||o} <dl class="m-info f-cb"> <dt class="u-cover u-cover-big"><span class="lnk jj-flag"> ${commonJST('com-img', playlist.coverImgUrl||defaultURL.cover220, '198y198')} </span></dt> <dd class="tit"> <div class="name f-ff2"> <span class="u-rtag f-ff1">{if playlist.highQuality}精品{/if}歌单</span> <h2> <b class="f-ust">${escapeWithSpace(playlist.name)}</b> </h2> {if playlist.specialType!=5 && !!playlist.creator && u.userId==userId} <span class="edt" data-href="#/m/playlistedit/?id=${playlist.id}" data-id="/m/playlistedit/"> ${commonJST('com-svg', 'icon.sp.svg#edit')} </span> {/if} </div> <div class="more"> <div class="mnum s-fc3"> ${commonJST('com-svg', 'icon.sp.svg#music_note')} ${trackCount|default:'0'} </div> <div class="mnum s-fc3"> ${commonJST('com-svg', 'icon.sp.svg#btn_play')} ${playCount|default:'0'} </div> </div> </dd> <dd class="user"> <a href="#/m/personal/?uid=${u.userId}" class="u-face u-face-2" {if u.userId == userId && isAnonimous}data-anon-action="playlist_creator"{/if} data-da-event="h117"> <div class="wrap">${commonJST('com-img', u.avatarUrl||defaultURL.avatar32, '32y32')}</div>${commonJST('com-user-type-2', u, 'flag')} </a> <a href="#/m/personal/?uid=${u.userId}" class="uname s-fc3" {if u.userId == userId && isAnonimous}data-anon-action="playlist_creator"{/if} data-da-event="h117">{if u.userId == userId && isAnonimous}未登录&gt;{else}${u.nickname|escape}{/if}</a> <p class="time">{if playlist.specialType==10}最近更新：${playlist.updateTime|format:'M月dd日'}{else}${playlist.createTime|format:'yyyy-MM-dd'}创建{/if}</p> </dd> <dd class="btns"> <div class="u-ibtn5b"> <span class="u-ibtn5 u-ibtn5-ply {if isEmpty}z-dis{/if}" data-res-action="play" data-res-type="1" data-res-id="${playlist.id}" data-log-action="play" data-log-type="list" data-log-source="list" data-log-id="${playlist.id}" data-da-event="h111"> ${commonJST('com-svg', 'icon.sp.svg#btn_play_sml')}播放全部 </span><span class="u-ibtn5 u-ibtn5-only u-ibtn5-addto{if isEmpty} z-dis{/if}" data-res-action="queue" data-res-type="1" data-res-id="${playlist.id}" data-log-action="addto" data-log-type="list" data-log-source="list" data-log-id="${playlist.id}" data-da-event="h113" title="添加全部到播放列表"><svg><use xlink:href="orpheus://orpheus/style/res/svg/icon.sp.svg#btn_addto_list"></use></svg></span> </div> <button class="u-ibtn5 z-off {if isNew || isEmpty}z-dis{/if}" ${commonJST('com-res', 1, playlist.id, isFav?'unfav':'fav')} data-da-event="h114"> ${commonJST('com-svg', isFav?'icon.sp.svg#btn_faved':'icon.sp.svg#btn_fav')}{if isFav}已{/if}收藏(${playlist.subscribedCount|default:'0'}) </button> <button class="u-ibtn5 z-off {if isEmpty}z-dis{/if}" ${commonJST('com-res', 1, playlist.id, 'share')} data-da-event="h115"> ${commonJST('com-svg', 'icon.sp.svg#btn_share')}分享(${playlist.shareCount|default:'0'}) </button> <button class="u-ibtn5 z-off {if isEmpty}z-dis{/if}" ${commonJST('com-res', 1, playlist.id, 'download', '', 1, playlist.id)} data-da-event="h116"> ${commonJST('com-svg', 'icon.sp.svg#btn_dld')}下载全部 </button> </dd> {if playlist.specialType!=5} {var myplaylist = (!!playlist.creator && playlist.creator.userId == userId)} {if (playlist.tags.length>0 || !!myplaylist)} <dd class="inf tags {if playlist.specialType==10}f-dn{/if}" data-log-type="tag"> <span class="s-fc1">标签：</span> {list playlist.tags as t}<a href="#/m/disc/playlist/?type=hot&cat=${escapeCat(t)}" data-da-event="h118" class="s-fc2">${t|escape}</a>{if t_index<t_length-1}&nbsp;/&nbsp;{/if}{/list} {if playlist.tags.length<=0} <a data-href="#/m/playlistedit/?id=${playlist.id}" class="s-fc2">添加标签</a> {/if} </dd> {/if} {/if} {if (!!playlist.description || !!myplaylist)} <dd class="intr"> <p class="s-fc3 z-fold jj-flag"> <span class="s-fc1">简介：</span> {if !!playlist.description} <span class="f-ust">${playlist.description|default:'暂无简介'|escape2}</span> {else} <a class="add s-fc2" data-href="#/m/playlistedit/?id=${playlist.id}">添加简介</a></span> {/if} </p> {if !!playlist.description} <a class="more f-fr s-fc4 jj-flag" data-action="switch"> ${commonJST('com-svg', 'icon.sp.svg#detail_arr')} </a> {/if} </dd> {/if} </dl> </textarea> <textarea name="jst" id="m-ypsh-advertisement"> <div data-res-id="${id}" data-res-type="110" data-res-action="link" {if biEvent}data-bi-event="${biEvent}"{/if} {if biJson}data-bi-json="${biJson}"{/if} class="m-ad-playlist">${commonJST('com-img', picUrl)}</div> </textarea> <textarea name="js">(function(){var byz=NEJ.P,cJO=NEJ.O,byA=byz("nej.e"),bi=byz("nej.v"),bm=byz("nej.u"),bU=byz("nej.ut"),bj=byz("nm.x"),bY=byz("nm.m"),bp=byz("nm.d"),bR=byz("nm.l"),bC=byz("nm.m.y"),byx;bC.xy=NEJ.C();byx=bC.xy.bS(bY.cW);byx.byG=function(){this.bCU="m-ypsh";this.dg();var bg=byA.bV(this.bA,"j-flag");this.oZ=bg[0];this.cBt=bg[1];this.cls=bg[2];this.bko=bg[3];this.cjE=bg[4];this.cce=bg[5];this.cle=bg[6];this.ip.parent=bg[7];this.byJ={onitemload:this.uy.byB(this),onerror:this.ej.byP(this,false,this.oZ)};this.bLs=byA.bV(bg[2],"j-flxg");this.cu={selected:"z-sel",list:this.bLs};this.cjd=this.bLs[2];bi.bM(this.cce,"input",this.yu.byB(this));bi.bM(this.cce,"focus",this.yu.byB(this));bi.bM(this.cle,"click",this.bvx.byB(this));bi.bM(this.oZ,"click",this.ei.byB(this));this.XV=""};byx.byT=function(blZ){if(!!this.bH)this.bH.bQ();this.bH=bp.dZ.bG(this.byJ);if(!this.ctJ){this.ctJ=bp.ctG.bG()}if(!!this.iC)this.iC.bQ();this.iC=bU.mP.bG(this.cu);this.dO([[bp.dZ,"itemchange",this.Kq.byB(this)]]);this.cmx(blZ)};byx.dq=function(blZ){this.dC(blZ);this.dhm(0);this.iC.lg(blZ.target);var bP=blZ.param||cJO,cGv=false;if(!bP.id){bj.sC();return}this.cgC=!!bP.fromSource;if(this.dX!=bP.id){this.XV="";this.cce.value="";this.bin();cGv=true}if(blZ.target=="/m/playlist/"){byA.bJ(this.cjE,"f-dn");if(bP.id==bj.bLa()&&this.XV!=bP.id){this.XV=bP.id;nm.log.cFs("page",{type:"myfavourite"})}}else{byA.bK(this.cjE,"f-dn")}this.dX=bP.id;this.fP="playlist-"+this.dX;bm.cj(this.bLs,function(bk){var hC="#"+byA.bT(bk,"id")+"?id="+this.dX+"&rid=A_PL_0_"+this.dX;if(bk==this.cjd){var dJ=dc.playlist.cl(this.dX);if(dJ&&dJ.commentCount){hC+="&defaultCount="+dJ.commentCount}}bk.href=hC},this);var dJ=dc.playlist.cl(this.dX);if(dJ&&dJ.specialType){byA.bT(this.ip.parent,"specialType",dJ.specialType);byA.bT(this.ip.parent,"ToplistType",dJ.ToplistType||"")}else{byA.bT(this.ip.parent,"specialType","");byA.bT(this.ip.parent,"ToplistType","")}this.bH.hv({id:this.dX,key:this.fP});nm.log.cFs("page",{type:"cltlist",id:this.dX});if(this.cvN){byA.lG(this.cvN)}var bCd=this.ctJ.cl("111_0");if(bCd&&bCd.picUrl){var cQZ={page:"list",position:"neartab",pagetype:"list",pageid:this.dX,url:bCd.url,id:bCd.adId+"",method:"featured",algname:"null"};this.cvN=byA.xQ(byA.gk("m-ypsh-advertisement",NEJ.X({commonJST:ctl.commonJST.cFB,biEvent:"adclick",biJson:bj.cPo(cQZ)},bCd)));this.cBt.appendChild(this.cvN);if(cGv){nm.log.cFs("adimpress",cQZ)}}};byx.eR=function(){this.XV="";this.byU()};byx.ei=function(byy){var bv=bi.cR(byy,"d:action");if(bv&&byA.bT(bv,"action")=="switch"){var crI=bv.previousElementSibling;if(byA.ey(bv,"z-fold")){byA.bJ(bv,"z-fold");byA.bK(crI,"z-fold")}else{byA.bK(bv,"z-fold");byA.bJ(crI,"z-fold")}bv.scrollIntoViewIfNeeded()}else{bv=bi.cR(byy,"d:href");if(bv&&!dc.playlist.cWs(this.dX)){location.href=byA.bT(bv,"href")}}};bqO=/\d+\.jpg/;byx.uy=function(blZ){if(blZ.key!=this.fP||blZ.data.id!=this.dX)return;var dJ=this.bH.cl(this.dX);if(!dJ){bj.sC();return}byA.bT(this.ip.parent,"specialType",dJ.specialType);byA.bT(this.ip.parent,"ToplistType",dJ.ToplistType);if(!bm.fv(dJ.tags)){if(!dJ.tags)dJ.tags=[];else dJ.tags=dJ.tags.split(";")}var wB=localCache.cF("host.profile.userId");var cbs=bj.bED(dJ.playCount);var cAI=this.bH.cAA(dJ);var bRq=byA.bV(this.oZ,"jj-flag");if(bRq&&bRq.length>0){bRq=bRq[0].firstElementChild}byA.eB(this.oZ,"m-ypsh-detail",{o:{},playlist:dJ,playCount:cbs,trackCount:cAI,defaultURL:bj.hk(),userId:wB,escapeCat:bj.cWg,isNew:this.bH.lM(this.dX),isFav:this.bH.nJ(this.dX),isEmpty:cAI==0,isAnonimous:bj.btm(wB),creator:this.bH.lM(this.dX)?localCache.cF("host.profile"):null,commonJST:ctl.commonJST.cFB,escapeWithSpace:bj.cll},{escape2:bj.bUS});var bRB,crI,cTv,ko=byA.bV(this.oZ,"jj-flag");if(!!ko&&!!ko.length){bRB=ko.shift();crI=ko.shift();cTv=ko.shift();var ho=(dJ.coverImgUrl||"").match(bqO);ho=(ho||[])[0];if(bRq&&ho&&(bRq.src||"").indexOf(ho)>-1){byA.cae(bRB);bRB.appendChild(bRq)}if(crI&&cTv&&crI.clientHeight==crI.scrollHeight){cTv.style.display="none"}}this.cjd.href="#"+byA.bT(this.cjd,"id")+"?id="+this.dX+"&rid=A_PL_0_"+this.dX+"&defaultCount="+(dJ.commentCount||0);this.bko.innerText=dJ.commentCount||0;byA.bT(this.kJ,"logId",dJ.id);if(dJ.trackCount==0){}else{}if(!bj.btm()&&!dJ.nocreator&&(!dJ.creator||dJ.creator.userId!=wB&&!dJ.creator.nickname)){if(!!this.cgC){bj.sC()}else{dispatcher.dr("/m/disc/rec/",{replace:!0,force:!0});history.clearBack()}}this.dhm(this.dX)};byx.Kq=function(byy){if(!byy||!byy.data||byy.data.id!=this.dX)return;this.uy({key:this.fP,data:{id:this.dX}})};byx.yu=function(){var bAq=true,sE=null;return function(byy){sE&&clearTimeout(sE);var eF=this.cce.value.replace(/(^\s*)|(\s*$)/g,"");this.bin();if(eF.length==0){this.mi("");return}if(bAq){bAq=false;this.mi(eF);setTimeout(function(){bAq=true}.byB(this),500)}else{sE=setTimeout(function(){this.yu()}.byB(this),500)}}}();byx.bvx=function(byy){this.cce.value="";this.yu()};byx.mi=function(eF){bj.gM("/m/playlist/",{cmd:"search",keyword:eF})};byx.hA=function(bn){if(!bn||!bn.data||!bn.data.cmd)return;switch(bn.data.cmd){case"setkeyword":this.cce.value=bn.data.keyword||"";this.bin();break;case"getshowdetail":bn.data.pid=this.dhE;break}};byx.bin=function(){if(!!this.cce.value){bj.cVV(this.cle,"icon.sp.svg#colse");byA.bK(this.cjE,"z-edit")}else{bj.cVV(this.cle,"icon.sp.svg#search");byA.bJ(this.cjE,"z-edit")}};byx.dhm=function(cP){this.dhE=cP;bj.gM("/m/playlist/",{cmd:"showdetail",pid:cP})};bj.cU("/m/playlist",bC.xy)})()</textarea>
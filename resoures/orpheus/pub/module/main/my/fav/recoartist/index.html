<meta charset="utf-8"/> <textarea name="txt" id="m-recoart-module"> <div class="m-myartist"> <div class="u-lhd"> <div class="g-wrap2 f-cb"> <h3 class="s-fc3">猜你喜欢</h3> </div> </div> <div class="n-btnarea f-cb"> <button class="u-ibtn5" data-action="favall">全部收藏</button> <button class="u-ibtn5" data-action="unfavall">都不感兴趣</button> </div> <div class="j-flag"> </div> </div> </textarea> <textarea name="jst" id="m-recomartist-list"> <div class="singers g-wrap5"> <ul class="f-cb f-flex"> {list beg..end as y} {var x=xlist[y]} {if !!x} {var biEventData = getBiEventData(x, y)} <li data-res-id="${x.id}" data-res-type="6" data-res-from="-18" data-res-menu="true" data-res-data="${x.id}" class="u-card" id="${x.id|seed}"> <a class="head u-artist u-artist-sm f-fl" href="#/m/artist/?id=${x.id}" ${biEventData}><img src="${x.picUrl || defaultURL.artist_cover}?param=50y50" onerror="nm.l.f.empty(this)"></a> <div class="cnt"> <h3 class="name f-brk"><a href="#/m/artist/?id=${x.id}" ${biEventData}>${x.name|escape}{if !!x.trans||!!x.transName}&nbsp;<span class="f-mcp s-fc4">(${x.trans||x.transName|escape})</span>{/if}</a></h3> </div> <div class="desc f-thide s-fc4">${x.reason}</div> <button class="btn u-ibtn5" {if !x.followed}${biEventData}{/if} data-res-type="6" data-res-id="${x.id}" data-res-action="{if !!x.followed}un{/if}favart">{if !!x.followed}<svg><use xlink:href="orpheus://orpheus/style/res/svg/icon.sp.svg#btn_faved"></use></svg>已{else}<svg><use xlink:href="orpheus://orpheus/style/res/svg/icon.sp.svg#btn_fav"></use></svg>{/if}收藏</button> </li> {/if} {/list} <li class="u-card" style="height: 0px; margin-bottom: 0px; margin-top: 0px; padding: 0px; border: 0px;"></li> <li class="u-card" style="height: 0px; margin-bottom: 0px; margin-top: 0px; padding: 0px; border: 0px;"></li> <li class="u-card" style="height: 0px; margin-bottom: 0px; margin-top: 0px; padding: 0px; border: 0px;"></li> <li class="u-card" style="height: 0px; margin-bottom: 0px; margin-top: 0px; padding: 0px; border: 0px;"></li> <li class="u-card" style="height: 0px; margin-bottom: 0px; margin-top: 0px; padding: 0px; border: 0px;"></li> </ul> </div> </textarea> <textarea name="js">(function(){var byz=NEJ.P,byA=byz("nej.e"),bi=byz("nej.v"),bm=byz("nej.u"),cI=byz("nej.n"),bD=byz("nej.cef"),oO=byz("nej.cef.ut"),bj=byz("nm.x"),bU=byz("nej.ut"),cN=byz("nej.j"),bY=byz("nm.m"),gD=byz("nm.w"),bC=byz("nm.m.i"),qC=byz("nej.cef.ut"),bp=byz("nm.d"),byx,byD;bC.cDN=NEJ.C();byx=bC.cDN.bS(bY.cW);byx.byG=function(){this.bCU="m-recoart";this.dg();var bg=byA.bV(this.bA,"j-flag");this.bL={parent:bg[0],limit:100,count:1,item:{klass:"m-recomartist-list",defaultURL:bj.hk(),commonJST:ctl.commonJST.cFB,getBiEventData:this.ZD.byB(this)},cache:{clear:true,klass:bp.bzI,lkey:"artist_recommend"},onafterlistrender:this.hR.byB(this),onemptylist:this.sW.byB(this)}};byx.byT=function(blZ){this.cfg=blZ.referer;this.cmx(blZ);this.dO([[this.bA,"click",this.bqC.byB(this)],[location,"beforeurlchange",this.gv.byB(this)],[bp.bzI,"dislike",this.cEZ.byB(this)]])};byx.cEZ=function(blZ){this.cDO=true};byx.dq=function(blZ){var bZ=localCache.cF("host.profile.userId");this.bL.cache.lkey="artist_recommend-"+bZ;this.dC(blZ);if(!!this.cCJ)this.cCJ.bQ();this.cCJ=gD.cmG.bG(this.bL)};byx.bqC=function(byy){var bk=bi.cR(byy,"d:action");var cJN=this.cCJ.rY(),cCI=[];if(cJN){var bg=cJN.byI(this.bL.cache.lkey);if(bg&&bg.length){for(var i=0;i<bg.length;i++)if(!bg[i].followed)cCI.push(bg[i].id)}switch(byA.bT(bk,"action")){case"favall":cJN.cFb({artistIds:cCI});break;case"unfavall":cJN.cFa({artistIds:cCI});break}}};byx.hA=function(byy){};byx.hR=function(byy){};byx.sW=function(byy){setTimeout(function(){location.hash="#"+this.cfg}.byB(this),0)};byx.ZD=function(jM,bs){var bzg="";if(jM){bzg='data-bi-event="recommendclick" data-bi-json="'+bj.cPo({id:jM.id,scene:"user-artist",position:(bs||0)+1,alg:jM.alg||""})+'"'}return bzg};bj.cU("/m/fav/recoartist/",bC.cDN)})()</textarea>
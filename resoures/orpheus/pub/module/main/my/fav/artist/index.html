<meta charset="utf-8"/> <textarea name="txt" id="m-favartist-module"> <div class="m-myartist"> <div class="u-header"> <h2 class="f-ff2">我的歌手</h2> <span class="u-subtit s-fc3"><span class="j-count"></span>位歌手</span> </div> <ul class="m-tblist m-tblist-myartist j-flag" tabindex="1002" data-res-type="6" data-res-from="-14" data-res-shortcut="s-fav-artist"></ul> <div class="j-flag"></div> </div> </textarea> <textarea name="jst" id="m-hasrecommenddata"> <div class="recommend f-pr f-cb j-recommend"> <a href="#/m/fav/recoartist/" data-log-action="click" data-log-type="interestedartist" data-log-source="subscribeartist"> <span class="s-fc3"><svg class="icn u-icn u-icn-artist f-fl"><use xlink:href="orpheus://orpheus/style/res/svg/icon.sp.svg#artist"></use></svg></span> <div class="title f-fs1 s-fc1">发现你可能感兴趣的歌手</div> <i class="arr s-fc4"><svg><use xlink:href="orpheus://orpheus/style/res/svg/icon.sp.svg#search_arr"></use></svg></i> </a> </div> </textarea> <textarea name="jst" id="m-favartist-list"> {list beg..end as y} {var x=xlist[y]} {if !!x} <li data-res-id="${x.id}" data-res-type="6" data-res-from="-14" data-res-menu="true" data-res-data="${x.id}" class="itm f-cp f-cb j-item" data-href="#/m/artist/?id=${x.id}"> <div class="td w11"> <div class="u-artist u-artist-tn"> <a data-href="#/m/artist/?id=${x.id}" class="lnk"> ${commonJST('com-img', x.picUrl || defaultURL.artist_cover, '40y40')} </a> </div> <h4><a data-href="#/m/artist/?id=${x.id}">${x.name|escape}{if !!x.trans||!!x.transName}&nbsp;<span class="f-mcp s-fc4">(${x.trans||x.transName|escape})</span>{/if}</a></h4> </div> <div class="td w4 s-fc4">专辑：${x.albumSize}</div> <div class="td s-fc4">MV：${x.mvSize}</div> </li> {/if} {/list} </textarea> <textarea name="txt" id="m-favartist-emply-list"> <div class="m-empty"> <i class="emptyicon u-icn u-icn-empty_artist s-fc7"><svg><use xlink:href="orpheus://orpheus/style/res/svg/icon.sp.svg#empty_artist"></use></svg></i> <h2 class="s-fc3">暂无收藏歌手</h2> <p class="s-fc4">收藏喜欢的歌手，可及时收到他们的新专辑提醒</p> </div> </textarea> <textarea name="js">(function(){var byz=NEJ.P,cJO=NEJ.O,byA=byz("nej.e"),bi=byz("nej.v"),bU=byz("nej.ut"),bj=byz("nm.x"),bxI=byz("nm.i"),bp=byz("nm.d"),bY=byz("nm.m"),bR=byz("nm.l"),bC=byz("nm.m.r"),byx,byD;bC.ccR=NEJ.C();byx=bC.ccR.bS(bY.cW);byx.byG=function(){this.bCU="m-favartist";this.dg();var bg=byA.bV(this.bA,"j-flag");this.qx=byA.bV(this.bA,"j-count")[0];this.baZ=byA.bV(this.bA,"j-head")[0];this.eZ={index:-1,selected:"z-sel",onchange:this.zu.byB(this)};this.bL={limit:20,cache:{clear:!0,klass:bp.bzI,lkey:"artist_sub",data:{},onerror:bj.gM.byB(this,"/m/fav",{cmd:"showNonet"})},parent:bg[0],pager:{clazz:"m-page m-page-4",parent:bg[1]},item:{klass:"m-favartist-list",defaultURL:bj.hk(),commonJST:ctl.commonJST.cFB},onemptylist:this.Ph.byB(this),onbeforelistclear:this.tV.byB(this),onbeforelistload:this.im.byB(this,"m-xwgt-loading"),onafterlistrender:this.hR.byB(this),onpagechange:this.bzC.byB(this)};bi.bM(bp.mo,"hostfavinfochange",this.bZW.byB(this,!0));bi.bM(bp.bzI,"hasrec",this.cEX.byB(this))};byx.byT=function(blZ){this.cmx(blZ);nm.log.cFs("page",{type:"subscribeartist"})};byx.cEX=function(byy){this.cEY=byy.hasArtists};byx.dq=function(blZ){this.dC(blZ);bj.cL(6,function(bu,cJN){cJN.eN(bu)}.byB(this,this.bL.cache.lkey));var bZ=localCache.cF("host.profile.userId");this.bL.cache.lkey="artist_sub-"+bZ;if(!!this.bSd)this.bSd.bQ();if(bj.btm()){bj.cL(6,function(bu,cJN){cJN.hI(bu,[])}.byB(this,this.bL.cache.lkey))}bj.gM("/m/fav",{cmd:"hideNonet"});this.bSd=bU.kl.bG(this.bL);this.bZW()};byx.hR=function(byy){if(!!byy.options.realtotal)this.bL.cache.data.realtotal=byy.options.realtotal;if(!!byy.options.hasRec)this.cFq=byy.options.hasRec.hasArtists;this.eZ.list=byA.bV(byy.parent,"j-item");if(!!this.ht)this.ht.bQ();this.ht=bU.cBY.bG(this.eZ);if(byy.offset==0&&!!this.cFq){var bk=byA.gk("m-hasrecommenddata");byy.parent.insertAdjacentHTML("beforebegin",bk)}else{}};byx.tV=function(byy){document.mbody.scrollTop=0;if(!!this.ht){this.ht.bQ();delete this.ht}if(byA.bV(byy.parent.parentElement,"j-recommend").length){byy.parent.parentElement.removeChild(byA.bV(byy.parent.parentElement,"j-recommend")[0])}};byx.zu=function(byy){var bh=byA.bT(byy.list[byy.index],"resId");localCache.bSX(byA.bT(this.bL.parent,"resShortcut"),bh)};byx.bKu=function(byy){if(!byy)return;if(this.bSd)this.bSd.bQ();this.bL.cache.lkey="artist_sub-"+byy.userId;if(bj.btm()){bj.cL(6,function(bu,cJN){cJN.hI(bu,[])}.byB(this,this.bL.cache.lkey))}this.bSd=bU.kl.bG(this.bL)};byx.Ph=function(byy){if(!!this.cEY)location.hash="#/m/fav/recoartist/";else{byA.bK(this.baZ,"f-dn");byy.value=byA.gy("m-favartist-emply-list")}};byx.eR=function(blZ){this.byU();delete this.bL.cache.data.realtotal;bj.gM("/m/fav",{cmd:"hideNonet"})};byx.bzC=function(byy){};byx.bZW=function(chR){var chs=0;var fz=bj.cL(13,function(cJN){return cJN.chw()});if(!fz.isDef){chs=Math.max(fz.arCnt||0,0)}this.qx.innerText=chs;if(!!chR)this.bL.cache.data.realtotal=chs};bj.cU("/m/fav/artist/",bC.ccR)})()</textarea>
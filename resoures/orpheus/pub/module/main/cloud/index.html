<meta charset="utf-8"/> <textarea name="txt" id="m-cloud-module"> <div class="n-local"> <div class="u-header j-flag"> <h2 class="f-ff2">我的音乐云盘</h2> <div class="cldstat f-ff1 s-fc3"> 云盘容量 <div class="stat f-pr"> <span class="statcurr f-pa j-flag" style="width:0%"></span> </div> <span class="num j-flag"></span> <span class="j-flag">歌曲永久保存，随时随地多端畅听</span> </div> </div> <div class="oper f-cb j-flag"> <div class="buttons"> <button class="u-ibtn5 j-flag" data-action="upload"> <svg><use xlink:href="orpheus://orpheus/style/res/svg/icon.sp.svg#btn_update"></use></svg> 上传音乐 </button> <button class="u-ibtn5 j-flag" data-action="start"> <svg><use xlink:href="orpheus://orpheus/style/res/svg/icon.sp.svg#btn_start"></use></svg> <span class="j-flag">全部开始</span> </button> </div> <div class="u-lcsch j-flag"> <input class="j-flag" type="text" data-res-type='16' data-res-menu='true' placeholder="搜索我的音乐云盘"> <span class="sch-btn j-flag"> <svg><use xlink:href="orpheus://orpheus/style/res/svg/icon.sp.svg#search"></use></svg> </span> </div> </div> <div class="j-flag"> <div class="m-plylist m-plylist-only m-plylist-cloud m-plylist_cloud" tabindex="1000" data-res-type="4" data-res-from="16" data-res-data="" data-res-shortcut=""> <div class="head f-cb j-flag"> <div class="fix"> <div class="th col"> <span class="check u-icn u-icn-checkbox j-flag f-dn"> <svg><use xlink:href="orpheus://orpheus/style/res/svg/icon.sp.svg#checkbox_checked"></use></svg> </span> </div> <div class="th col"></div> </div> <div class="flow f-cb"> <div class="th col" data-res-type="4" data-res-from="16" data-res-data="" data-res-action="sort" data-res-field="title" data-log-action="sort" data-log-type="operation" data-log-source="cloud"> 音乐标题<svg class="u-icn u-icn-sort-hvr"><use xlink:href="orpheus://orpheus/style/res/svg/icon.sp.svg#sort_hvr"></use></svg><svg class="u-icn u-icn-sort"><use xlink:href="orpheus://orpheus/style/res/svg/icon.sp.svg#sort"></use></svg> </div> <span class="js-resize" data-index="0">&nbsp;</span> <div class="th col" data-res-type="4" data-res-from="16" data-res-data="" data-res-action="sort" data-res-field="artist" data-log-action="sort" data-log-type="operation" data-log-source="cloud">歌手<svg class="u-icn u-icn-sort-hvr"><use xlink:href="orpheus://orpheus/style/res/svg/icon.sp.svg#sort_hvr"></use></svg><svg class="u-icn u-icn-sort"><use xlink:href="orpheus://orpheus/style/res/svg/icon.sp.svg#sort"></use></svg></div> <span class="js-resize" data-index="1">&nbsp;</span> <div class="th col" data-res-type="4" data-res-from="16" data-res-data="" data-res-action="sort" data-res-field="album" data-log-action="sort" data-log-type="operation" data-log-source="cloud">专辑<svg class="u-icn u-icn-sort-hvr"><use xlink:href="orpheus://orpheus/style/res/svg/icon.sp.svg#sort_hvr"></use></svg><svg class="u-icn u-icn-sort"><use xlink:href="orpheus://orpheus/style/res/svg/icon.sp.svg#sort"></use></svg></div> <span class="js-resize" data-index="2">&nbsp;</span> <div class="th col" data-res-type="4" data-res-from="16" data-res-data="" data-res-action="sort" data-res-field="fileExt" data-log-action="sort" data-log-type="operation" data-log-source="cloud">格式<svg class="u-icn u-icn-sort-hvr"><use xlink:href="orpheus://orpheus/style/res/svg/icon.sp.svg#sort_hvr"></use></svg><svg class="u-icn u-icn-sort"><use xlink:href="orpheus://orpheus/style/res/svg/icon.sp.svg#sort"></use></svg></div> <span class="js-resize" data-index="3">&nbsp;</span> <div class="th col" data-res-type="4" data-res-from="16" data-res-data="" data-res-action="sort" data-res-field="size" data-log-action="sort" data-log-type="operation" data-log-source="cloud">大小<svg class="u-icn u-icn-sort-hvr"><use xlink:href="orpheus://orpheus/style/res/svg/icon.sp.svg#sort_hvr"></use></svg><svg class="u-icn u-icn-sort"><use xlink:href="orpheus://orpheus/style/res/svg/icon.sp.svg#sort"></use></svg></div> <span class="js-resize" data-index="4">&nbsp;</span> <div class="th col" data-res-type="4" data-res-from="16" data-res-data="" data-res-action="sort" data-res-field="time" data-log-action="sort" data-log-type="operation" data-log-source="cloud">上传时间<svg class="u-icn u-icn-sort-hvr"><use xlink:href="orpheus://orpheus/style/res/svg/icon.sp.svg#sort_hvr"></use></svg><svg class="u-icn u-icn-sort"><use xlink:href="orpheus://orpheus/style/res/svg/icon.sp.svg#sort"></use></svg></div> </div> </div> <div class="j-flag"></div> </div> </div> <div class="m-off f-dn j-flag"> <i class="icon u-icn u-icn-offline s-fc7"><svg><use xlink:href="orpheus://orpheus/style/res/svg/icon.sp.svg#empty_offline"></use></svg></i> <h2 class="s-fc3">网络不给力哦，请检查你的网络设置~</h2> </div> <div class="service service-list j-flag"> <a href="javascript:;" class="s-fc4 f-tdu" data-href2="/static/cloudservice.html">《“我的音乐云盘”服务协议》</a> </div> </div> </textarea> <textarea name="jst" id="m-cloud-list-empty"> <div class="m-plylist m-plylist-only m-plylist-cloud"> {if !!keyword} <ul> <div class="m-empty s-fc1">未能找到与<mark class="s-fc2"><span class="f-ff1">“</span>${keyword|escape}<span class="f-ff1">”</span></mark>相关的任何音乐</div> </ul> </div> {else} <div class="cldempty"> <h2 class="f-ff2 s-fc1">现在上传文件，电脑手机都能听</h2> <p class="s-fc1">超大空间，歌曲永久保存。</p> <div class="btns"> <button class="btn u-ibtn1" data-action="upload" data-log-action="click" data-log-source="mycloud" data-log-type="uptocloud">添加音乐</button> </div> </div> {/if} </textarea> <textarea name="js">(function(){var byz=NEJ.P,cJO=NEJ.O,byA=byz("nej.e"),bi=byz("nej.v"),bm=byz("nej.u"),bU=byz("nej.ut"),cN=byz("nej.j"),bj=byz("nm.x"),bTG=byz("nm.c"),bp=byz("nm.d"),bY=byz("nm.m"),bR=byz("nm.l"),bC=byz("nm.m.r"),byx,byD;bC.cuw=NEJ.C();byx=bC.cuw.bS(bY.cW);byx.byG=function(){this.bCU="m-cloud";this.dg();var bg=byA.bV(this.bA,"j-flag");this.cHE=bg.shift();this.cpE=bg.shift();this.cus=bg.shift();this.cpC=bg.shift();this.baZ=bg.shift();this.czF=bg.shift();this.coh=bg.shift();this.dal=bg.shift();this.sy=bg.shift();this.cpz=bg.shift();this.cwE=bg.shift();this.cHG=bg.shift();this.cGL=bg.shift();this.bSI=bg.shift();this.hZ=bg.shift();this.cHH=bg.shift();this.cAe=bg.shift();this.cY=byA.bV(this.cGL,"th");this.cu={parent:this.hZ,shortcutNode:this.hZ.parentNode,mopt:{limit:APP_CONF.cloud_page,pager:{clazz:"m-page"},item:{from:{fid:16,vkey:"cloud"}},cache:{data:{}},onemptylist:this.nL.byB(this),onafterlistrender:this.hR.byB(this),onpagechange:this.bzC.byB(this),onbeforelistclear:this.tV.byB(this)},resizer:{parent:this.cGL,tableResizerKey:"cloud",noClearNode:!0},selector:{checkboxSupported:!0,checkboxClazz:"u-icn-checkbox",selectAllNode:this.bSI,selectAllClazz:"z-sel"}};bi.bM(this.cpz,"input",this.yu.byB(this));bi.bM(this.cpz,"focus",this.yu.byB(this));bi.bM(this.cwE,"click",this.bvx.byB(this));bi.bM(bp.cG,"uploadsizechange",this.cuh.byB(this));bi.bM(bp.cG,"uploadprogress",this.cug.byB(this));bi.bM(bp.cG,"local2playlistmatchstatechange",this.cAx.byB(this));bi.bM(bTG.cVZ,"cloudselectstatechange",this.cIF.byB(this));bi.bM(bTG.cVZ,"uploadprogress",this.cug.byB(this));bi.bM(bTG.cVZ,"uploadsizechange",this.cuh.byB(this));this.cue=!1;this.gY="";this.bin()};byx.byT=function(blZ){this.dO([[this.bA,"click",this.ei.byB(this)]]);if(!this.cue){this.cue=!0;this.cuh(bj.cL(4,function(cJN){return cJN.cya()}));this.cAx(bj.cL(4,function(cJN){return cJN.cAd()}))}this.cug(bj.cL(4,function(cJN){return cJN.ctp()}));this.cmx(blZ);nm.log.cFs("page",{type:"mycloud"})};byx.dq=function(blZ){this.dC(blZ);var bP=blZ.param||cJO,dM=blZ.input||cJO,cFe=bP.fromSource||dM.fromSource;this.cgC=!!cFe;this.mi()};byx.eR=function(blZ){this.byU()};byx.bin=function(){if(this.gY){bj.cVV(this.cwE,"icon.sp.svg#colse");byA.bK(this.sy,"z-edit")}else{bj.cVV(this.cwE,"icon.sp.svg#search");byA.bJ(this.sy,"z-edit")}};byx.mi=function(eF,bs){eF=eF||"";var cJN=this.cu.mopt.cache,bh=cJN.data,bl=this.cu.mopt.item,cA=bl.from,bZ=localCache.cF("host.profile.userId");if(!!eF){cJN.clear=!0;cJN.lkey="track_cloud_search-"+bZ+"-"+eF;cA.data=eF;cA.uid=bZ;bh.uid=bZ;bh.keyword=eF;delete bh.orderData}else{cJN.clear=!0;cJN.lkey="track_cloud-"+bZ;cA.data="";cA.uid=bZ;bh.uid=bZ;delete bh.keyword}this.gY=eF;this.bin();bl.mark=this.bAk(eF);this.bhy(cA.data);byA.bJ(this.cHE,"f-dn");byA.bJ(this.baZ,"f-dn");byA.bJ(this.cHG,"f-dn");byA.bK(this.cHH,"f-dn");!!this.byS&&this.byS.bQ();this.byS=bj.lo.bG(this.cu)};byx.nL=function(byy){this.cgC=!1;byy.value=byA.gk("m-cloud-list-empty",{keyword:this.gY});byA.bJ(this.cAe,"f-dn");if(!this.gY){if(navigator.offline){byA.bK(this.cHE,"f-dn");byA.bK(this.baZ,"f-dn");byA.bK(this.cHG,"f-dn");byA.bJ(this.cHH,"f-dn");byA.bK(this.cAe,"f-dn")}}};byx.hR=function(byy){byA.bJ(this.cAe,"f-dn");this.bBW();if(this.cgC&&byy.options&&byy.options.offset==0&&!this.gY){var cBX=byA.bV(this.hZ,"z-play");if(!cBX||!cBX.length)cBX=byA.bV(this.hZ,"z-pause");if(cBX&&cBX.length){if(cBX[0]&&cBX[0].scrollIntoViewIfNeeded)cBX[0].scrollIntoViewIfNeeded()}}this.cgC=!1};byx.bzC=function(byy){};byx.tV=function(byy){byA.bK(this.cAe,"f-dn")};byx.bAk=function(eF){if(!eF.length){return function(ds){return ds}}else{var bLe=new RegExp(bj.pD(eF),"gi");return function(ds){if(!ds)return;return ds.replace(bLe,function($1){return'<span class="s-fc2">'+$1+"</span>"})}}};byx.yu=function(){var bAq=true,sE=null;return function(byy){sE&&clearTimeout(sE);var eF=this.cpz.value.replace(/(^\s*)|(\s*$)/g,"");if(eF.length==0){if(this.gY!=eF)this.mi("");return}if(bAq){bAq=false;if(this.gY!=eF)this.mi(eF);setTimeout(function(){bAq=true}.byB(this),500)}else{sE=setTimeout(function(){this.yu()}.byB(this),500)}}}();byx.bvx=function(byy){this.cpz.value="";this.yu()};byx.ei=function(byy){var bv=bi.cR(byy,"d:action");if(!bv)return;switch(byA.bT(bv,"action")){case"upload":bj.cL(4,function(cJN){cJN.cxT()});break;case"start":bj.cL(4,function(cJN){cJN.cxV()});break;case"stop":bj.cL(4,function(cJN){cJN.cxU()});break;case"retryTransform":var bo=byA.bT(bv,"id");bj.cL(4,function(cJN){cJN.cpZ(bo,!0)});break;case"retryAdd":var bo=byA.bT(bv,"id");bj.cL(4,function(cJN){cJN.bvi(bo,!0)});break;case"retryUpload":var bo=byA.bT(bv,"id");bj.cL(4,function(cJN){cJN.cAt(bo)});break;case"closeGuide":if(!!this.cnY){if(this.cnY.parentNode){this.cnY.parentNode.removeChild(this.cnY)}delete this.cnY}break;case"openDownload":bj.caU(APP_CONF.domain+"/download/");break;case"payForCapacity":var bh=localCache.cg("cloudCapacityPayInfo");if(!bh){bj.ci({txt:"请稍后再试"})}else{if(bh.action==1){bj.caU(bh.payUrl||"http://music.163.com/#/vip",!0)}else{bj.ci({txt:bh.payMsg||"请稍后再试",state:"none"})}}break}};byx.cuh=function(byy){if(!byy)return;var coj=byy.useSize,col=byy.maxSize,cwF=coj>=col,cFp=byy.isEmpty,cuc="z-full",cub="s-fc6",dT="";if(col==0)return;if(cwF){byA.bK(this.cpE,cuc);byA.bK(this.cpC,cub);this.cpE.style.width="100%";this.cus.innerText=(Math.floor(coj*10/1024/1024/1024)/10).toFixed(1)+"G/"+Math.floor(col/1024/1024/1024)+"G";dT='云盘已满，请清除部分文件，才能继续上传<a href="javascript:;" style="margin-left:10px" class="s-fc2 z-off" data-action="payForCapacity">扩容</a>'}else{if(this.cff){this.cug(bj.cL(4,function(cJN){return cJN.ctp()}))}byA.bJ(this.cpE,cuc);byA.bJ(this.cpC,cub);if(coj>0&&coj<107374183){coj=107374183}if(coj==0){this.cpE.style.width="0%"}else{this.cpE.style.width=Math.max((coj/col*100).toFixed(1),1)+"%"}this.cus.innerText=(Math.floor(coj*10/1024/1024/1024)/10).toFixed(1)+"G/"+Math.floor(col/1024/1024/1024)+"G";if(coj==0&&cFp){dT='<a href="javascript:;" style="margin-left:10px" class="s-fc2 z-off" data-action="payForCapacity">扩容</a>'}else{dT='歌曲永久保存，随时随地多端畅听<a href="javascript:;" style="margin-left:10px" class="s-fc2 z-off" data-action="payForCapacity">扩容</a>'}}this.cff=cwF;this.jI(dT,"default")};byx.cug=function(byy){if(!byy)return;if(byy.sta==1){byA.bT(this.coh,"action","stop");byA.bJ(this.coh,"f-dn");this.dal.innerText="全部暂停";bj.cVV(this.coh,"icon.sp.svg#btn_pause_all")}else{if(!!byy.len){byA.bJ(this.coh,"f-dn")}else{byA.bK(this.coh,"f-dn")}byA.bT(this.coh,"action","start");this.dal.innerText="全部开始";bj.cVV(this.coh,"icon.sp.svg#btn_start")}};byx.cAx=function(byy){if(!byy)return;var dT="";if(byy.state==1){dT='正在添加上传任务，本地音乐加歌单后可多端畅听<a href="javascript:;" style="margin-left:10px" class="s-fc2 z-off" data-action="payForCapacity">扩容</a>'}this.jI(dT,"match")};byx.cIF=function(byy){if(!byy)return;var dT="";if(byy.state==1){dT='正在添加文件&nbsp;<span class="u-icn u-icn-scan"></span>'}this.jI(dT,"select")};byx.jI=function(mB,bq){if(!this.cGA){this.cGA=[]}if(bq=="select"){this.cGA[2]=mB}else if(bq=="match"){this.cGA[1]=mB}else if(bq=="default"){this.cGA[0]=mB}var bs=bj.cIy(this.cGA,function(ds){return!!ds});this.cpC.innerHTML=this.cGA[bs]||"歌曲永久保存，随时随地多端畅听"};byx.hA=function(byy){if(!byy||!byy.data||!byy.data.cmd)return;switch(byy.data.cmd){case"sort":var ih=this.cu.mopt.cache.lkey;if(ih.indexOf("track_cloud-")==0){this.cu.mopt.cache.data.orderData={field:byy.data.field,order:byy.data.order};bj.cL(4,function(cJN){cJN.eN(ih);cJN.bJx(ih)})}break}};byx.bhy=function(bh){bh=bh||"";byA.bJ(this.cGL.parentNode,"m-plylist-sort");bm.cj(this.cY,function(bk,bs){var oU=byA.bT(bk,"resField");if(!!oU){byA.bJ(bk,"asc desc");byA.bT(bk,"resData",bh)}},this)};byx.bBW=function(){if(this.gY)return;var ih=this.cu.mopt.cache.lkey,bh=bj.cL(4,function(cJN){return cJN.bkf(ih)});if(!!bh){var oU=bh.field,bzH=bh.order;bm.cj(this.cY,function(bk,bs){var cGu=byA.bT(bk,"resField");if(cGu){byA.bJ(bk,"asc desc");if(cGu==oU){byA.bK(bk,bzH)}}},this)}else{bm.cj(this.cY,function(bk,bs){var cGu=byA.bT(bk,"resField");if(cGu){byA.bJ(bk,"asc desc")}},this)}byA.bK(this.cGL.parentNode,"m-plylist-sort")};bj.cU("/m/cloud/",bC.cuw)})()</textarea>
<meta charset="utf-8"/> <textarea name="txt" id="m-hotcmt-module"> <div class="g-wrap"> <div class="u-head1"> <h2 class="u-tit f-ff2">精彩评论</h2> </div> <div class="m-comment m-comment-hotall"><ul class="j-flag"></ul></div> </div> </textarea> <textarea name="js">(function(){var byz=NEJ.P,cJO=NEJ.O,byA=byz("nej.e"),bi=byz("nej.v"),bU=byz("nej.ut"),bm=byz("nej.u"),bj=byz("nm.x"),bxI=byz("nm.i"),bp=byz("nm.d"),bY=byz("nm.m"),bC=byz("nm.m.r"),byx,byD;bC.cyd=NEJ.C();byx=bC.cyd.bS(bY.cW);byx.byG=function(){this.bCU="m-hotcmt";this.dg();var bg=byA.bV(this.bA,"j-flag");this.bL={limit:20,sbody:document.mbody,item:{klass:bxI.RZ,onreply:this.bkx.byB(this),onpraise:this.ctC.byB(this),onactivity:this.dfb.byB(this)},cache:{klass:bp.cpa,clear:!0},parent:bg[0],onbeforelistload:this.im.byB(this,"m-xwgt-list-loading"),onemptylist:this.im.byB(this,"m-xevt-list-empty")}};byx.byT=function(blZ){this.cmx(blZ)};byx.dq=function(blZ){this.dC(blZ);var bP=blZ.param||cJO,dM=blZ.input||cJO,cJN=this.bL.cache,hs=bP.rid==="{commentThreadId}"?dM.rid:bP.rid||dM.rid;if(this.cw){this.cw=this.cw.bQ()}cJN.data={rid:hs};cJN.lkey="comment_hotall-"+hs;this.bL.item.rid=hs;this.cw=bU.jN.bG(this.bL);if(this.cQz)this.cQz.bQ();this.cQz=bp.cTb.bG({onactivitytitle:this.ddp.byB(this),onactivitytitleerror:this.ddo.byB(this)});nm.log.cFs("page",{type:"interestcomment",sourceid:hs})};byx.bkx=function(byy){byy.threadId=this.bL.cache.data.rid;document.action({id:byy.commentId,tid:byy.threadId,type:9,action:"opencomment",ext:byy.user})};byx.ctC=function(byy){if(this.cw&&this.cw.rY()){this.cw.rY().cbY(this.bL.cache.data.rid,byy.commentId,byy.praised,this.ctE.byB(this,byy.commentId))}};byx.ctE=function(bTj,byy){if(!byy||byy.code!=200&&byy.code!=400)return;if(this.cw&&this.cw.rY()){var caO=this.cw.rY().cl(bTj);if(caO){if(this.bL.parent){var ko=this.bL.parent.querySelectorAll(".cmtid-"+bTj);bm.cj(ko,function(bk){if(caO.liked){byA.bK(bk,"z-did")}else{byA.bJ(bk,"z-did")}if(bk.childNodes[1]){bk.childNodes[1].nodeValue="("+caO.likedCount+")"}else{bk.appendChild(document.createTextNode("("+caO.likedCount+")"))}},this)}}}};byx.dfb=function(oS){this.cQz.ddF(oS)};byx.ddp=function(cRq){if(cRq.act){location.href="#/m/friend/activity?id="+cRq.act.actId+"&r="+Math.random()}else{bj.ci({txt:"该话题暂未创建"})}};byx.ddo=function(){bj.ci({txt:"该话题暂未创建"})};bj.cU("/m/comment/hot",bC.cyd)})()</textarea>
<meta charset="utf-8"/> <textarea name="txt" id="m-drpl-module"> <div class="g-wrap p-songlist q-lrc"> <div class="m-slthead"> <div class="slttype f-pr j-flag"> <button class="u-ibtn5 u-ibtn5-drop j-flag"><span class="j-flag">全部歌单</span><svg><use xlink:href="orpheus://orpheus/style/res/svg/icon.sp.svg#btn_droparr"></use></svg></button> </div> <div class="rec j-flag"></div> </div> <ul class="m-list m-list-recmd m-list-recmd-bill m-list-flow f-flex j-flag"></ul> <div class="j-flag"></div> </div> </textarea> <textarea name="jst" id="m-drpl-hqent"> <li> <figrue class="cvr u-cover u-cover-list crown-enter"> <a href="#/m/disc/playlist/highquality/?cat=${cat}" class="lnk" data-da-event="c816"> <img class="real blur" src="${pic}?param=138y138" onerror="nm.l.f.empty(this)"> <span class="crown-full f-pr"><img src="orpheus://orpheus/style/res/default/placeholder_cover_list.png"><svg class="f-pa"><use xlink:href="orpheus://orpheus/style/res/svg/cover.sp.svg#crown_enter"></use></svg><em class="f-pa">精品歌单<svg class="arr"><use xlink:href="orpheus://orpheus/style/res/svg/icon.sp.svg#search_arr"></use></svg></em></span> </a> </figrue> <div class="desc"> <h3><a href="#/m/disc/playlist/highquality/?cat=${cat}" data-da-event="c816">精品歌单倾心推荐，给最懂音乐的你</a></h3> </div> </li> </textarea> <textarea name="ntp" id="m-drpl-cats"> <div class="titbar f-fs1">选择标签</div> <section class="tagcntwrap"> <div class="tagcnt"> <div class="all tag z-slt f-cp j-flag">全部歌单<svg class="slted"><use xlink:href="orpheus://orpheus/style/res/svg/icon.sp.svg#type_selected"></use></svg></div> <div class="j-flag"></div> </div> </section> </textarea> <textarea name="jst" id="m-drpl-cats-cnt"> {list xlist as x} {if x} <dl class="taglist{if transCat[x.name]=='scene'} taglist-scence{/if}"> <dt class="f-fs1"> <svg class="type"><use xlink:href="orpheus://orpheus/style/res/svg/icon.sp.svg#type_${transCat[x.name]||'default'}"></use></svg>${x.name} </dt> <dd> <ul class="f-cb"> {list x.list as y}<li data-name="${y.name}" class="tag{if y.name==cat} z-slt{/if} f-cp">${y.name}{if y.hot}<svg class="hot"><use xlink:href="orpheus://orpheus/style/res/svg/icon.sp.svg#type_hot"></use></svg>{/if}{if y.name==cat}<svg class="slted"><use xlink:href="orpheus://orpheus/style/res/svg/icon.sp.svg#type_selected"></use></svg>{/if}</li>{/list} </ul> </dd> </dl> {/if} {/list} </textarea> <textarea name="jst" id="m-playlist-hottags"> <div> <span>热门标签：</span> {list xlist as x} <a data-log-action="click" data-log-type="hotclassify" href="#/m/disc/playlist/?cat=${x.name}" data-name="${x.name}" class="s-fc4" data-da-event="c715">${x.name}</a> {if x_index!=x_length-1} <span class="line">|</span> {/if} {/list} </div> </textarea> <textarea name="jst" id="m-drpl-playlist-list"> {list beg..end as y} {var x = xlist[y]} {if x} ${commonJST('com-playlist', x, from, y)} {/if} {/list} </textarea> <textarea name="js">(function(){var byz=NEJ.P,cJO=NEJ.O,byA=byz("nej.e"),bi=byz("nej.v"),bm=byz("nej.u"),bU=byz("nej.ut"),bj=byz("nm.x"),bxI=byz("nm.i"),bp=byz("nm.d"),gD=byz("nm.w"),bY=byz("nm.m"),bR=byz("nm.l"),bj=byz("nm.x"),bC=byz("nm.m.d"),byx,byD;bC.Yo=NEJ.C();byx=bC.Yo.bS(bY.cW);byx.byG=function(){this.bCU="m-drpl";this.dg();var bg=byA.bV(this.bA,"j-flag");this.bnk=bg[2];this.Er=bg[0];bi.bM(bg[1],"click",this.bnl.byB(this));this.bnm=bg[3];this.Yp={limit:10,item:"m-playlist-hottags",parent:this.bnm,cache:{data:{},lkey:"frgmt_hottag",klass:bp.mo,clear:false},onemptylist:this.bno.byB(this),onbeforelistload:this.bnp.byB(this)};this.bL={limit:100,count:1,delta:200,parent:bg[4],pager:{parent:bg[5],clazz:"m-page m-page-3"},item:{klass:"m-drpl-playlist-list",from:{fid:6,daEvent:"c711",showCreator:!0,coverSize:"194y194",daEvent:"c711"},commonJST:ctl.commonJST.cFB},cache:{data:{},klass:bp.dZ,onerror:this.JZ.byB(this)},onemptylist:this.sW.byB(this),onbeforelistload:this.tH.byB(this),onafterlistload:this.HI.byB(this),onbeforelistrender:this.bkJ.byB(this),onafterlistrender:function(byy){bj.bnO("li",byy.parent)}.byB(this)};this.eV={};this.cZJ={}};byx.byT=function(blZ){if(!this.bH)this.bH=bp.mo.bG(this.byJ);if(!this.hP)this.hP=bp.gO.bG();this.En=this.hP.hw();if(!this.En.discoverPlaylist)this.En.discoverPlaylist={};this.cnC=this.En.discoverPlaylist;this.dO([[location,"beforeurlchange",this.gv.byB(this)],[bp.dZ,"itemchange",this.cXj.byB(this,this.bL.parent,"1")]]);this.cmx(blZ);nm.log.cFs("page",{type:"recommendplaylist"})};byx.dq=function(blZ){this.dC(blZ);var bP=blZ.param||{},dM=blZ.input||{},cJN=this.bL.cache;if(!bP.cache&&!bP.force&&!!blZ.referer&&blZ.referer.indexOf("/m/disc/")>-1&&(blZ.referer.indexOf("/m/disc/playlist")==-1||blZ.referer.indexOf("/m/disc/playlist/highquality/")>-1)){bP.cat=this.cnC.lastCat||"全部歌单";bP.type="hot";this.cnC.defaultCat=bP.cat;this.cnC.defaultType=bP.type;history.replace("/m/disc/playlist/?cat="+bP.cat.replace("&","%26")+"&type="+bP.type)}else{bP.cat=bP.cat||this.cnC.defaultCat||"全部歌单";bP.type=bP.type||this.cnC.defaultType||"hot"}bP.order=bP.type;if(!this.cnu&&bP.cache&&cJN.lkey=="playlist_cat-"+bj.cWg(bP.cat)+"-"+bP.type&&this.cZ==(bP.index||1)&&this.eV[cJN.lkey+this.cZ]){document.mbody.scrollTop=this.eV[cJN.lkey+this.cZ];return}else{delete this.dA}this.cnu=!1;bj.gM("/m/disc",{cmd:"hideNonet"});cJN.data=bP;cJN.lkey="playlist_cat-"+bj.cWg(bP.cat)+"-"+bP.type;if(bP.cat=="全部歌单"){this.bL.item.from.daEvent="c711"}else{this.bL.item.from.daEvent="c714"}bj.cL(1,function(ctf){if(!ctf.hQ(cJN.lkey)){ctf.eN(cJN.lkey)}});this.bns(bP.index);this.dA=bP.type;this.cZ=bP.index||1;this.bnk.innerText=bP.cat;this.cnC.lastCat=bP.cat;this.cnC.lastType=bP.type;this.hP.bI(this.En);if(this.Yr)this.Yr.bQ();this.Yr=bU.kl.bG(this.Yp)};byx.bns=function(bs){if(!!this.cw)this.cw.bQ();this.bL.pager.index=bs||1;this.cw=gD.cmG.bG(this.bL);this.cw.oI("onpagechange",this.bzC.byB(this))};byx.sW=function(byy){byy.stopped=true;byy.parent.innerHTML='<div class="m-empty"><h2 class="s-fc4">没有相关歌单</h2></div>'};byx.tH=function(){var Cw=null;return function(byy){byy.stopped=true;var ep=byy.parent.children.length==0?"m-xwgt-loading":"m-xwgt-list-loading";if(Cw!=ep||!this.bzf)this.bzf=byA.xQ(byA.gy(ep));Cw=ep;byy.parent.parentNode.insertAdjacentElement("beforeEnd",this.bzf)}}();byx.JZ=function(byy){this.HI(byy);this.hA({data:{cmd:"nonet"}})};byx.bkJ=function(byy){var blZ=byy.options;this.cZJ[blZ.data.cat]=blZ.highQuality;if(this.cZJ[blZ.data.cat]&&byy.offset==0){byA.eB(byy.parent,"m-drpl-hqent",{cat:this.bL.cache.data.cat=="全部歌单"?"全部":this.bL.cache.data.cat,pic:this.cZJ[blZ.data.cat].picUrl})}bj.bim(byy.parent)};byx.HI=function(byy){byy.stopped=true;if(!!this.bzf&&!!this.bzf.parentNode)byA.lG(this.bzf)};byx.eR=function(){this.byU(!0);this.RO();bj.gM("/m/disc",{cmd:"hideNonet"})};byx.bnl=function(byy){nm.log.dE(nm.log.ACTION.PLAYLIST_CLASSIFY_CLICK);nm.log.bTO("c712");bi.bQd(byy);if(this.zU){this.zU=this.zU.bQ()}else{this.zU=bR.Hs.bG({destroyable:!0,parent:this.Er,type:this.dA,cat:this.bL.cache.data.cat,umi:this.gq,onhide:this.bnv.byB(this)})}};byx.bnv=function(){if(this.zU){delete this.zU}};byx.bzC=function(byy){var hL=this.bL.cache.data.cat;hL=bj.cWg(hL);dispatcher.dr(this.gq+"?type="+this.dA+"&index="+byy.index+"&cat="+hL)};byx.bno=function(byy){this.Yp.parent.innerText=""};byx.bnp=function(byy){byy.value=" "};byx.gv=function(byy){if(!!byy&&!!byy.oldValue&&byy.oldValue.path==this.gq){this.eV[this.bL.cache.lkey+this.cZ]=document.mbody.scrollTop}};byx.hA=function(byy){if(!byy||!byy.data||!byy.data.cmd)return;switch(byy.data.cmd){case"clear":var bP=byy.data.param||cJO,cJN=this.bL.cache;if(cJN.lkey=="playlist_cat-"+bj.cWg(bP.cat)+"-"+bP.type&&this.cZ==(bP.index||1)){delete this.eV[cJN.lkey+this.cZ];this.RO();this.bdG()}break;case"nonet":this.cnu=!0;bj.gM("/m/disc",{cmd:"showNonet"});break}};bj.cU("/m/disc/playlist/",bC.Yo,!0)})()</textarea>
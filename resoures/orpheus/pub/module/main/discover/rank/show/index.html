<meta charset="utf-8"/> <textarea name="txt" id="m-drank-module"> <div class="g-wrap4 p-rank q-lrc"> <div class="u-load f-top j-flag">载入中...</div> <div class="j-flag"> <div class="u-head1"> <h2 class="u-tit f-ff2">官方榜</h2> </div> <div class="m-drank f-cb j-flag"> <div class="blk j-flag"></div> <div class="blk j-flag"></div> <div class="blk j-flag"></div> </div> <div class="m-drank f-cb"> <div class="blk j-flag"></div> <div class="blk j-flag"></div> </div> <div class="u-head1"> <h2 class="u-tit f-ff2">全球榜</h2> </div> <div> <ul class="m-list m-list-recmd m-list-recmd-dj m-list-flow f-flex j-flag"></ul> </div> </div> </div> </textarea> <textarea name="jst" id="m-rank-artists-loading"> <dt class="top"> <a class="cvr f-db" href="#/m/disc/artists"> <span class="dte f-ff1">${artiuptime}更新</span> </a> </dt> <dd> <ol class="artist"> <div class="u-load u-load-3">载入中...</div> </ol> </dd> </textarea> <textarea name="jst" id="m-rank-artists"> <dt class="top"> <a class="cvr f-db" href="#/m/disc/artists"> <span class="dte f-ff1">${artiuptime}更新</span> </a> </dt> <dd> <ol class="artist"> {list beg..end as y} {var x = xlist[y]} {if x} <li class="f-cp" data-res-type="6" data-res-id="${x.id}" data-res-menu="true" data-res-action="link"> <span class="itm num {if y_index<3}red{/if}">${y_index+1}</span> <span class="itm rnk"> ${commonJST('com-rnk-ico', x.lastRank, y_index, true)} </span> <div class="flow name f-thide"> <a href="#/m/artist/?id=${x.id}" class="s-fc1"> ${x.name|escape}{if !!x.trans||!!x.transName}&nbsp;<span class="f-mcp s-fc4">(${x.trans||x.transName|escape})</span>{/if} </a> </div> </li> {/if} {/list} </ol> <div class="mre"> <a href="#/m/disc/artists" class="s-fc3 j-flag"> 查看全部<i class="arr f-ff1">&gt;</i> </a> </div> </dd> </textarea> ${commonJST('com-rnk-ico', x.lastRank, y_index, true)} </span> <span class="face f-fl u-face u-face-2"> ${commonJST('com-img', x.picUrl, '30y30')} </span> <div class="name f-thide"> <span class="s-bfc1"> ${x.name|escape}{if !!x.trans||!!x.transName}&nbsp;<span class="f-mcp s-bfc5">(${x.trans||x.transName|escape})</span>{/if} </span> </div> </li> {/if} {/list} </ol> </dd> </textarea> <textarea name="ntp" id="m-drank-spe-viewer"> <dl data-res-from="1" data-res-type="4"> <dt class="top" data-action="redirect"> <div class="cvr"> <span class="dte j-flag f-ff1">2月18日更新</span> <span class="ply j-flag" data-res-action="play" data-res-type="1" data-log-action="play" data-log-type="list" data-log-source="recommendtop"> <svg><use xlink:href="orpheus://orpheus/style/res/svg/icon.sp.svg#rank_play"></use></svg> </span> </div> </dt> <dd> <ol class="j-flag"></ol> <div class="mre f-dn"> <a href="#" class="s-fc3 j-flag"> 查看全部<i class="arr f-ff1">&gt;</i> </a> </div> </dd> </dl> </textarea> <textarea name="jst" id="m-drank-spe-item"> {list beg..end as y} {var x=xlist[y]} {if !!x} <li class="j-item ${gray(x.id)}" data-res-menu="true" data-res-type="4" data-res-id="${x.id}" data-res-from="1" ${resource(x.id)}> <span class="itm num{if y_index<3} red{/if}">${y_index+1}</span> {if from.ToplistType == 'S'} <span class="itm rnk f-ff1 s-fc4">${(commonJST('com-track-toplist-ratio', y, from.data)||'').trim()}%</span> {else} <span class="itm rnk"> ${commonJST('com-track-toplist-rnk-ico', y, from.data)} </span> {/if} <div class="flow"> <div class="itm nm"> {var nameData = getTrackNameData(x)} {var alias = getAlias(x)} <span class="tit s-fc1 f-thide" title="${escape3(nameData.title)}">${escape2(nameData.name)}{if nameData.alias}&nbsp;<em class="s-fc5">(${escape2(nameData.alias)})</em>{/if} </div> <span class="itm aut f-thide s-fc4" title="${escape3(getArtistsTitle(x))}"> {list x.artists as m} {if !!m.id}<a class="s-fc4" data-title="${m.name}" href="#/m/artist/?id=${m.id}">${escape2(m.name)}</a>{else}<em class="s-fc4" data-title="${m.name}">${escape2(m.name)}</em>{/if}{if m_index<m_length-1}/{/if} {/list} </span> </div> </li> {/if} {/list} </textarea> <textarea name="js">(function(){var byz=NEJ.P,cJO=NEJ.O,byA=byz("nej.e"),bm=byz("nej.u"),bi=byz("nej.v"),cmw=byz("nej.ui"),bU=byz("nej.ut"),bj=byz("nm.x"),bp=byz("nm.d"),bxI=byz("nm.i"),gD=byz("nm.w"),byx,byD;bj.bSl=NEJ.C();byx=bj.bSl.bS(cmw.hl);byx.byR=function(blZ){this.bEc(blZ)};byx.eo=function(){this.Yl="m-drank-spe-viewer"};byx.byL=function(){this.byO();var eX=+(new Date);var bg=byA.bV(this.bA,"j-flag");this.bSZ=bg[0];this.nu=bg[1];this.bSI=bg[3];this.bL={limit:8,item:{shortcut:"s-"+eX,klass:"m-drank-spe-item",from:{},resource:this.btt.byB(this),gray:this.bVI.byB(this),getAlias:bj.csw,escape2:bj.fg,escape3:bj.cXu,getTrackNameData:bj.daC,getArtistsTitle:bj.dcX,commonJST:ctl.commonJST.cFB},parent:bg[2],cache:{total:8,data:{},klass:bp.cG},onbeforelistload:this.jG.byB(this),onafterlistrender:this.hR.byB(this)};bi.bM(this.bA,"click",this.qn.byB(this));byA.bT(this.bA,"resShortcut",this.bL.item.shortcut)};byx.cJ=function(blZ){return function(blZ){this.cK(blZ);this.ckN(blZ);byA.bT(this.bA,"resData",blZ.id);var cJN=this.bL.cache;cJN.lkey="track_playlist-"+blZ.id;cJN.data.id=blZ.id;cJN.onerror=blZ.onerror;this.bL.item.from.data=blZ.id;this.bL.item.from.ToplistType=blZ.ToplistType;this.jL=blZ.name||"";if(!!this.cw)this.cw.bQ();this.cw=bU.kl.bG(this.bL)}}();byx.ckN=function(blZ){this.bSY=blZ.id;this.bSZ.innerText=bm.rC(blZ.utime,"MM月dd日更新");byA.bT(this.nu,"resId",blZ.id);byA.bT(this.nu,"logId",blZ.id);this.bSI.href="#/m/playlist/?id="+blZ.id;byA.bJ(this.bSI.parentNode,"f-dn")};byx.jG=function(byy){byy.value=byA.gy("m-xwgt-list-loading-rank")};byx.hR=function(byy){if(!!this.ht)this.ht.bQ();this.xn={name:"resId",item:"j-item",selected:"z-sel",onchange:this.bwf.byB(this)};this.xn.parent=this.bA;this.ht=bU.bBr.bG(this.xn)};byx.bwf=function(){var PC=null,cA=this.bL.item.from,mT=this.ht.VF(!0);if(mT.count>0){PC={type:4,map:mT,ids:mT.list,fid:cA.fid,data:cA.data}}localCache.bSX("resSelection",PC);localCache.bSX(this.bL.item.shortcut,this.ht)};byx.btt=function(bo){var cA=this.bL.item.from,bh=cA.data||"";var Py='data-res-data="'+bh+'"';return Py};byx.qn=function(byy){var bk=bi.cR(byy,"d:action");if(!!bk){switch(byA.bT(bk,"action")){case"redirect":if(!byA.ey(byy.target,"ply")){nm.log.dE("page",null,null,{type:"toplist",value:this.jL});dispatcher.dr("/m/playlist/?id="+this.bSY)}break}}};byx.cfn=function(bo){return bj.cL(4,function(cJN){return cJN.cfw(bo,1)?"z-nocyr":""})};byx.bYu=function(bo){return bj.cL(4,function(cJN){return cJN.nx(bo)==4?"z-hasdown":""})};byx.bYt=function(bo){return bj.cL(4,function(cJN){return cJN.bUy(bo)?"z-hascache":""})};byx.bYs=function(bo){return bj.cL(4,function(cJN){return cJN.bUG(bo)?"z-haslocal":""})};byx.bVI=function(bo){if(!bo)return"";var bTV=[];bTV.push(this.cfn(bo));bTV.push(this.bYu(bo));if(navigator.offline){bTV.push(this.bYs(bo));bTV.push(this.bYt(bo))}return bTV.join(" ")}})();
(function(){var byz=NEJ.P,cJO=NEJ.O,byA=byz("nej.e"),bi=byz("nej.v"),bm=byz("nej.u"),bU=byz("nej.ut"),bj=byz("nm.x"),bxI=byz("nm.i"),bp=byz("nm.d"),gD=byz("nm.w"),bY=byz("nm.m"),bR=byz("nm.l"),bC=byz("nm.m.d"),byx,byD;bC.ckb=NEJ.C();byx=bC.ckb.bS(bY.cW);byx.byG=function(){this.bCU="m-drank";this.dg();var bg=byA.bV(this.bA,"j-flag");this.rm=bg[0];this.crN=bg[1];this.czE=bg[2];this.cwP=bg[8];this.csF=[bg[3],bg[4],bg[5],bg[6],bg[7]];this.crM=new Array(this.csF.length);this.crL=!1;this.fP="frgmt_world_top";this.bL={limit:100,item:{klass:"com-list",commonJST:ctl.commonJST.cFB,from:{biEvent:{action:"page",params:{type:"toplist",value:{get:"name"}}},item:"com-playlist",coverSize:"158y158"}},parent:this.cwP,cache:{data:{},lkey:"frgmt_world_top",klass:bp.mo},onbeforelistload:this.Ak.byB(this),onbeforelistrender:this.bkJ.byB(this),onafterlistrender:this.hR.byB(this)};this.cwQ={onlistload:this.yW.byB(this),onerror:this.ej.byB(this)}};byx.byT=function(blZ){this.dO([[location,"beforeurlchange",this.gv.byB(this)],[bp.dZ,"itemchange",this.cXj.byB(this,this.bL.parent,"1")]]);if(!this.bFj){this.bFj=bp.mo.bG(this.cwQ)}if(!this.nG){this.nG=bp.dZ.bG()}this.cmx(blZ);nm.log.cFs("page",{type:"recommendtop"})};byx.dq=function(blZ){var bP=blZ.param||cJO,dM=blZ.input||cJO,cJN=!!bP.cache||!!dM.cache||!1;if(!this.crL&&cJN){document.mbody.scrollTop=this.eV||0;return}this.crL=!1;bj.gM("/m/disc",{cmd:"hideNonet"});byA.bJ(this.rm,"f-dn");byA.bK(this.crN,"f-dn");this.bFj.fE({key:this.fP});this.dC(blZ)};byx.eR=function(){this.byU(!0)};byx.yW=function(byy){if(byy.key!=this.fP)return;var bg=this.nG.byI("frgmt_top5"),CB={N:"new",H:"hot",O:"org",E:"elc",S:"up",artists:"artist"};bm.cj(bg,function(bl,bs){var cD=this.csF[bs],bq=bl.ToplistType||"";if(!cD||!bq)return;byA.bJ(cD,"new hot org elc up artist");byA.bK(cD,CB[bq]);if(bl.ToplistType=="artists"){byA.eB(cD,"m-rank-artists-loading",{artiuptime:bm.rC(new Date,"MM月dd日")});if(!this.coZ){this.coZ=bp.bzI.bG({onlistload:this.crP.byB(this,cD),onerror:this.ej.byB(this)})}this.coZ.fE({key:"artists_rank",data:{type:1}})}else{if(this.crM[bs])this.crM[bs].bQ();this.crM[bs]=bj.bSl.bG({id:bl.id,parent:cD,utime:bl.updateTime,name:bl.name,ToplistType:bq,onerror:this.ej.byB(this)})}},this);if(!!this.cw)this.cw.bQ();this.cw=bU.kl.bG(this.bL);byA.bK(this.rm,"f-dn");byA.bJ(this.crN,"f-dn")};byx.crP=function(cD,blZ){if(!blZ||blZ.key!="artists_rank")return;var bg=this.coZ.byI("artists_rank");bg.length=8;byA.eB(cD,"m-rank-artists",{xlist:bg,beg:0,end:bg.length-1,artiuptime:bm.rC(blZ.data.updateTime,"MM月dd日"),commonJST:ctl.commonJST.cFB})};byx.bkJ=function(byy){bj.bim(byy.parent)};byx.hR=function(byy){bj.bnO("li",byy.parent)};byx.ej=function(byy){this.crL=!0;bj.gM("/m/disc",{cmd:"showNonet"});byA.bK(this.rm,"f-dn");byA.bK(this.crN,"f-dn")};bj.cU("/m/disc/rank/",bC.ckb,!0)})()</textarea>
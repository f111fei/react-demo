<meta charset="utf-8"/> <textarea name="txt" id="m-drat-module"> <div class="g-wrap p-artist"> <div class="m-tags j-flag"></div> <div class="m-list m-list-artist m-list-flow f-flex j-flag"></div> </div> </textarea> <textarea name="jst" id="m-drat-tags"> {list xlist as x} {if !!x&&x.type} <dl> <dt>${x.type.tit}：</dt> <dd class="j-flag"> {list x.values as y} <a class="tag" data-action="changTag" data-type="${x.type.val}" data-tag="${y.val}">${y.tit}</a> {if y_index!=y_length-1}<span class="lne"></span>{/if} {/list} </dd> </dl> {/if} {/list} </textarea> <textarea name="jst" id="m-drat-artist-list"> {list beg..end as y} {var z=xlist[y]} {if !!z} {if z.artistTopId} <li data-res-from="18" data-res-type="6" data-res-id="${z.id}"> <figure class="cvr u-cover u-cover-recmd"> <a href="#/m/disc/artists?type=${z.artistTopId}" class="lnk"> ${commonJST('com-img-d', 'orpheus://orpheus/style/res/common/cover/cover_artist.png', '', 'placeholder_cover_list.png')} </a> </figure> <div class="desc"> <h3><a href="#/m/disc/artists?type=${z.artistTopId}" class="name f-thide">${z.name|escape}</a></h3> </div> </li> {else} <li data-res-from="18" data-res-type="6" data-res-id="${z.id}" data-res-menu="true"> <figure class="cvr u-cover u-cover-recmd"> <a href="#/m/artist/?id=${z.id}" class="lnk"> ${commonJST('com-img-d', z.img1v1Url||z.picUrl, from.coverSize || '138y138', 'placeholder_cover_list.png')} </a> </figure> <div class="desc"> <h3> <a href="#/m/artist/?id=${z.id}" class="name f-thide">${z.name|escape}</a> {if z.accountId} <a href="#/m/personal/?uid=${z.accountId}" class="stay u-icn u-icn-stay"> ${commonJST('com-svg', 'icon.sp.svg#enter')} </a> {/if} </h3> </div> </li> {/if} {/if} {/list} </textarea> <textarea name="js">(function(){var byz=NEJ.P,cJO=NEJ.O,byA=byz("nej.e"),bi=byz("nej.v"),bm=byz("nej.u"),bU=byz("nej.ut"),bj=byz("nm.x"),bp=byz("nm.d"),bY=byz("nm.m"),gD=byz("nm.w"),bC=byz("nm.m.r"),byx,byD;bC.bdy=NEJ.C();byx=bC.bdy.bS(bY.cW);byx.byG=function(){this.bCU="m-drat";this.dg();var gR=byA.bV(this.bA,"j-flag");this.bda=gR.shift();this.bIn=gR.shift();this.bL={parent:this.bIn,limit:30,delta:200,cache:{clear:!0,klass:bp.bzI,lkey:"artist_library",data:{},onerror:this.sZ.byB(this)},item:{klass:"m-drat-artist-list",commonJST:ctl.commonJST.cFB,from:{coverSize:"158y158"}},onemptylist:this.bAe.byB(this,"暂无符合条件的歌手"),onbeforelistload:this.im.byB(this,"m-xwgt-loading"),onbeforelistrender:this.bkJ.byB(this),onafterlistrender:this.hR.byB(this)};this.bTf={tagList:null};this.bSE={};this.bTg={};this.bTh={};this.bIo();bi.bM(this.bda,"click",this.ei.byB(this))};byx.byT=function(blZ){this.cmx(blZ);this.dO([[location,"beforeurlchange",this.gv.byB(this)]]);nm.log.cFs("page",{type:"recommendartist"})};byx.dq=function(blZ){this.dC(blZ);var bP=blZ.param||cJO,cA=bP.from,ckO=byA.ey(this.bA,"nonet");if(bP.cache&&!ckO&&this.ckc(bP)){document.mbody.scrollTop=this.eV;return}byA.bJ(this.bA,"nonet");this.bTg=NEJ.X({},bP);this.bns()};byx.eR=function(blZ){this.RO();this.byU(!0)};byx.bQa=function(){var bg=[{type:{tit:"语种",val:"area"},values:[{tit:"全部",val:-1},{tit:"华语",val:7},{tit:"欧美",val:96},{tit:"日本",val:8},{tit:"韩国",val:16},{tit:"其他",val:0}]},{type:{tit:"分类",val:"type"},values:[{tit:"全部",val:-1},{tit:"男歌手",val:1},{tit:"女歌手",val:2},{tit:"乐队组合",val:3}]},{type:{tit:"筛选",val:"initial"},values:[{tit:"热门",val:-1}]}];var byX="ABCDEFGHIJKLMNOPQRSTUVWXYZ";for(var i=0,ii=byX.length;i<ii;i++){bg[2].values.push({tit:byX.charAt(i),val:byX.charCodeAt(i)})}bg[2].values.push({tit:"#",val:0});this.Yr=bg};byx.bIo=function(){this.bQa();byA.eB(this.bda,"m-drat-tags",{xlist:this.Yr});var bSj=byA.bV(this.bda,"j-flag");var qm={dataset:"tag",selected:"z-sel"};bm.cj(this.Yr,function(bl,bs){var bq=bl.type,bUd=bl.values;qm.list=byA.gj(bSj[bs]);this.bTh[bq.val]=bUd[0].val;this.bTf[bq.val]=bU.mP.bG(qm)},this)};byx.bns=function(){bm.dP(this.bTh,function(jP,bq){if(!!this.bTg[bq])this.bSE[bq]=this.bTg[bq];if(!this.bSE[bq])this.bSE[bq]=jP;this.bTf[bq].lg(this.bSE[bq])},this);var cgh=bj.ciE(this.bSE);this.bL.cache.data=NEJ.X({},this.bSE);this.bL.cache.lkey="artist_library-"+cgh;if(!!this.bSd)this.bSd.bQ();this.bSd=gD.cmG.bG(this.bL)};byx.sZ=function(byy){byA.bK(this.bA,"nonet");this.ej(byy,false,this.bL.parent,"",{isPage:true})};byx.bkJ=function(byy){bj.bim(byy.parent)};byx.hR=function(byy){bj.bnO("li",byy.parent)};byx.ei=function(byy){var bk=bi.cR(byy,"d:action");if(!bk)return;switch(byA.bT(bk,"action")){case"changTag":this.bTg=NEJ.X({},this.bSE);this.bTg[byA.bT(bk,"type")]=byA.bT(bk,"tag");this.bns();return}};byx.ckc=function(bh){var bP=bh||cJO,oK=!0;bm.dP(bP,function(jP,bq){if(!!this.bSE[bq]&&this.bSE[bq]!=jP)oK=!1},this);return oK};byx.hA=function(byy){if(!byy||!byy.data||!byy.data.cmd)return;if(byy.data.cmd=="clear"){if(this.ckc(byy.data.param)){this.RO();this.bdG()}}};bj.cU("/m/disc/artist/",bC.bdy,!0)})()</textarea>
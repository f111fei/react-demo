<meta charset="utf-8"/> <textarea name="txt" id="m-discover-djradio-rank-module"> <div class="m-radio-rank"> <div class="n-newhead f-pr j-flag"> <div class="u-tabbtn u-tabbtn-1 u-tabbtn-3tab"> <a href="#/m/disc/djradio/rank/?type=0" class="btn" data-da-event="c4631"> <span>节目榜</span> </a> <a href="#/m/disc/djradio/rank/?type=1" class="btn" data-da-event="c4633"> <span>新晋电台榜</span> </a> <a href="#/m/disc/djradio/rank/?type=2" class="btn" data-da-event="c4635"> <span>热门电台榜</span> </a> </div> <div class="update f-pa"> <p>最近更新：<em class="j-flag"></em></p> <div class="help f-pr"> <svg><use xlink:href="orpheus://orpheus/style/res/svg/icon.sp.svg#help"></use></svg> <div class="lay m-help u-arrlay s-fc3 j-flag"></div> </div> </div> </div> <div class="m-plylist m-plylist-rdi m-plylist-rdi-rank j-flag"></div> </div> </textarea> <textarea name="jst" id="m-discover-program-rank-item"> {list beg..end as y} {var z=xlist[y]} {if z} {var x=z.program} {var daEvent = commonJST('com-da', from.daEvent)} {var state = checkPlay(x.id)} <li data-res-type="3" data-res-id="${x.id}" data-res-from="72" data-res-menu="true" class="j-item itm itm-${x.id} f-cb{if state} z-play{/if}" ${daEvent} data-da-trigger="dblclick"> <span class="rnk"> ${commonJST('com-rnk-ico', z.lastRank>0?z.lastRank:null, z.rank)} </span> {if state==2} <svg class="playstate"> <use xlink:href="orpheus://orpheus/style/res/svg/icon.sp.svg#list_play"></use> </svg> {else} <svg class="playstate"> <use xlink:href="orpheus://orpheus/style/res/svg/icon.sp.svg#list_pause"></use> </svg> {/if} <span class="td nm"> <div class="cvr u-cover u-cover-tn u-cover-hasply" data-res-action="play" data-log-action="recommendclick" data-log-id="${x.id}" data-log-alg="${x.alg}" data-log-position="${y}" data-res-id="${x.id}" data-res-type="3" data-res-from="72" ${daEvent}> <a class="lnk" href="javascript:;">${commonJST('com-img', x.coverUrl, '40y40')}</a> <span class="ply f-pa f-cp"><svg><use xlink:href="orpheus://orpheus/style/res/svg/cover.sp.svg#play_rb"></use></svg></span> </div><h3 class="f-thide">${x.name|escape}</h3> </span> <span class="td sup f-thide"><a href="#/m/djradio/?id=${x.radio.id}" ${daEvent}>${x.radio.name|escape}</a></span> <span class="td lb"><a href="#/m/disc/djradio/home/cat?id=${x.radio.categoryId}&name=${encodeURIComponent(x.radio.category)}" class="type u-type" ${daEvent}>${x.radio.category|escape}</a></span> <span class="td ht"> <div class="u-hot"><div class="hot" style="width:${z.score*100}%"></div></div> </span> </li> {/if} {/list} </textarea> <textarea name="jst" id="m-discover-radio-rank-item"> {list beg..end as y} {var z=xlist[y]} {if z} {var x=z.radio} <li data-res-type="70" data-res-id="${x.id}" data-res-menu="true" data-res-action="link" class="j-item itm f-cb f-cp" ${commonJST('com-da', from.daEvent)}> <span class="rnk"> ${commonJST('com-rnk-ico', z.lastRank>0?z.lastRank:null, z.rank)} </span> <span class="td nm"> <div class="cvr u-cover u-cover-tn"> <a class="lnk" href="#/m/djradio/?id=${x.id}">${commonJST('com-img', x.picUrl, '40y40')}</a> </div><h3 class="f-thide"><a href="#/m/djradio/?id=${x.id}">${x.name|escape}</a></h3> </span> <span class="td sup f-thide"><a data-res-action="x" href="#/m/personal/?uid=${x.dj.userId}">${x.creatorName|escape}</a></span> <span class="td lb"><a data-res-action="x" href="#/m/disc/djradio/home/cat?id=${x.categoryId}&name=${encodeURIComponent(x.category)}" class="type u-type">${x.category|escape}</a></span> <span class="td ht"> <div class="u-hot"><div class="hot" style="width:${z.score*100}%"></div></div> </span> </li> {/if} {/list} </textarea> <textarea name="js">(function(){var byz=NEJ.P,cJO=NEJ.O,byA=byz("nej.e"),bi=byz("nej.v"),bU=byz("nej.ut"),bm=byz("nej.u"),bj=byz("nm.x"),bxI=byz("nm.i"),bp=byz("nm.d"),bY=byz("nm.m"),gD=byz("nm.w"),bC=byz("nm.m.r"),byx,byD,dbG=["选取云音乐中7天内发布的热度最高的节目。热度由节目播放、赞、分享数量总和计算","选取云音乐中3个月内发布的热度最高的电台。热度由电台播放、收藏、分享数量总和计算","选取云音乐中热度最高的电台。热度由电台播放、订阅、分享数量总和计算"];bC.cZU=NEJ.C();byx=bC.cZU.bS(bY.cW);byx.byG=function(){this.bCU="m-discover-djradio-rank";this.dg();this.cZT=[];var bg=byA.bV(this.bA,"j-flag");this.zo=bg.shift();this.sG=bg.shift();this.dbH=bg.shift();this.iJ=bg.shift();this.bLs=byA.bV(this.zo,"btn");this.tA={limit:100,parent:this.iJ,pager:{},cache:{clear:false,lkey:"program_rank-list",klass:bp.gr},item:{klass:"m-discover-program-rank-item",commonJST:ctl.commonJST.cFB,checkPlay:this.cwT.byB(this),from:{daEvent:"c4632"}},onafterlistload:this.cZS.byB(this)};this.cmJ={limit:100,parent:this.iJ,pager:{},cache:{clear:false,klass:bp.cmK,data:{}},item:{klass:"m-discover-radio-rank-item",commonJST:ctl.commonJST.cFB,from:{}},onafterlistload:this.cZS.byB(this),onbeforelistclear:this.tV.byB(this)};this.xn={from:72,parent:this.iJ}};byx.byT=function(blZ){this.cmx(blZ);this.dO([[bp.cG,"playchange",this.OZ.byB(this)],[bp.gr,"itemchange",this.cZR.byB(this)],[bp.cmK,"itemchange",this.cZR.byB(this)]])};byx.dq=function(blZ){this.dC(blZ);var bP=blZ.param||cJO;this.dA=bP.type||0;byA.bJ(this.bLs[0],"z-sel"),byA.bJ(this.bLs[1],"z-sel"),byA.bJ(this.bLs[2],"z-sel");byA.bK(this.bLs[this.dA],"z-sel");if(this.dA>0){if(!!this.cnp){this.cnp.bQ()}this.cmJ.cache.data.type=this.dA-1;this.cmJ.cache.lkey="radio_rank-"+(this.dA-1);this.cmJ.item.from.daEvent=this.dA==1?"c4634":this.dA==2?"c4636":"";this.cnp=gD.cmG.bG(this.cmJ)}else{if(!!this.zE){this.zE.bQ()}this.zE=gD.cmG.bG(this.tA)}nm.log.cFs("page",{type:"toplist",value:this.dA==0?"节目榜":this.dA==1?"新晋电台榜":this.dA==2?"热门电台榜":""})};byx.eR=function(blZ){this.byU(!0)};byx.cZR=function(byy){if(byy.attr!="rankUpdateTime")return;this.cZT[this.dA]=byy.data};byx.cZS=function(){var t=new Date(this.cZT[this.dA]);this.sG.innerText=t.getMonth()+1+"月"+t.getDate()+"日";this.dbH.innerText=dbG[this.dA];if(!!this.ht)this.ht.bQ();this.ht=bj.cot.bG(this.xn)};byx.tV=function(byy){if(!!this.ht){this.ht.bQ();delete this.ht}};byx.cwT=function(bo){var dk=dc.track.gB();if(!dk||!dk.data||dk.from.program!=bo)return 0;return dk.state};var YG="z-play z-pause";var bvr={1:"z-pause",2:"z-play"};var bvA={1:"icon.sp.svg#list_pause",2:"icon.sp.svg#list_play"};byx.OZ=function(byy){var dF=byy.oldValue,eK=byy.newValue,bk;bk=this.tA.parent.querySelector(".itm-"+dF.data.programId||0);if(!!bk){byA.bJ(bk,YG)}bk=this.tA.parent.querySelector(".itm-"+eK.data.programId||0);if(!!bk){byA.bEq(bk,YG,bvr[eK.state]||"");bj.cVV(bk.children[1],bvA[eK.state])}};bj.cU("/m/disc/djradio/rank/",bC.cZU)})()</textarea>
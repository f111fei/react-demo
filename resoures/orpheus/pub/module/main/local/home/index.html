<meta charset="utf-8"/> <textarea name="txt" id="m-lchom-module"> <div class="n-local"> <div class="preload f-dn"></div> <div class="u-header header"> <h2 class="f-ff2">本地音乐</h2> <div class="lstinfo s-fc3"><span class="j-flag">0</span>首音乐<span class="z-osx-hide">，</span><div class="folderSlt"><a href="javascript:;" class="s-fc2 j-flag z-osx-hide" data-action="folder" data-log-action="click" data-log-type="sltdir" data-log-source="local">选择目录</a></div></div> <ul class="tab u-stab u-stab-local j-flag"> <li title="列表" data-id="/m/local/track/" data-action="redirect" data-log-type="song"><svg><use xlink:href="orpheus://orpheus/style/res/svg/icon.sp.svg#local_list"></use></svg></li> <li title="歌手" data-id="/m/local/artist/" data-action="redirect" data-log-type="artist"><svg><use xlink:href="orpheus://orpheus/style/res/svg/icon.sp.svg#local_artist"></use></svg></li> <li title="专辑" data-id="/m/local/album/" data-action="redirect" data-log-type="album"><svg><use xlink:href="orpheus://orpheus/style/res/svg/icon.sp.svg#local_album"></use></svg></li> <li class="z-osx-hide" title="文件夹" data-id="/m/local/folder/" data-action="redirect" data-log-type="folder"><svg><use xlink:href="orpheus://orpheus/style/res/svg/icon.sp.svg#local_folder"></use></svg></li> </ul> <div class="scan"><div class="itm a-ani a-dr6 j-flag"></div></div> </div> <div class="j-flag"></div> <div class="n-lmadd f-dn j-flag"> <h2 class="s-fc1">请添加本地音乐</h2> <p class="s-fc4">升级本地音乐为高品质音乐并和朋友分享！</p> <button class="u-ibtn1 u-ibtn1-xl f-ff2" data-action="folder">选择本地音乐文件夹</button> </div> </div> </textarea> <textarea name="txt" id="m-lchom-right-empty"> <div class="m-404"> <span class="icon u-icn u-icn-content s-fc4"><svg><use xlink:href="orpheus://orpheus/style/res/svg/icon.sp.svg#empty_content"></use></svg></span> <h2 class="s-fc1">很抱歉，内容已经不存在！</h2> </div> </textarea> <textarea name="js">(function(){var byz=NEJ.P,cJO=NEJ.O,byA=byz("nej.e"),bi=byz("nej.v"),bm=byz("nej.u"),bU=byz("nej.ut"),cN=byz("nej.j"),bj=byz("nm.x"),bxI=byz("nm.i"),bp=byz("nm.d"),bY=byz("nm.m"),bR=byz("nm.l"),bC=byz("nm.m.r"),byx,byD;bC.bNZ=NEJ.C();byx=bC.bNZ.bS(bY.cW);byx.byG=function(){this.bCU="m-lchom";this.dg();var bg=byA.bV(this.bA,"j-flag");this.bQF=bg[0];this.bRp=bg[1];this.bLs=byA.gj(bg[2]);this.BH=bg[3];this.ip.parent=bg[4];this.baA=bg[4];this.bOa=bg[5];this.cu={selected:"z-sel",list:this.bLs};bi.bM(bp.cG,"scanprogress",this.tU.byB(this,"scan"));bi.bM(bp.cG,"discernprogress",this.tU.byB(this,"discern"));bi.bM(bp.cG,"beforescan",this.bQM.byB(this));bi.bM(location,"urlchange",this.VV.byB(this));this.bKL=null;this.JT()};byx.byT=function(blZ){this.cmx(blZ);this.dO([[this.bA,"click",this.ei.byB(this)]]);nm.log.cFs("page",{type:"mylocal"})};byx.dq=function(blZ){byA.bK(document.mbody,"z-overlay");if(!!this.iC)this.iC.bQ(this.iC);this.iC=bU.mP.bG(this.cu);this.dC(blZ);this.bKL=this.iC.lg(blZ.target);var mB=bj.cL(11,function(cJN){return cJN.cDX("local_guide")});if(mB){this.bxW()}};byx.eR=function(blZ){this.byU();byA.bJ(document.mbody,"z-overlay")};byx.bJK=function(dU){bj.gM("/m/local/track/",dU);bj.gM("/m/local/album/",dU);bj.gM("/m/local/artist/",dU);bj.gM("/m/local/folder/",dU)};byx.tU=function(){var bRy=!1;var bRA=null;var bRz=null;var bRL='<span class="icn icn-scan"><svg><use xlink:href="orpheus://orpheus/style/res/svg/icon.sp.svg#btn_scan"></use></svg></span><span class="s-fc3">正在更新本地音乐列表...</span>';var bWN='<span class="icn icn-scan"><svg><use xlink:href="orpheus://orpheus/style/res/svg/icon.sp.svg#btn_scan"></use></svg></span><span class="s-fc3">正在更新本地音乐列表...</span>';var bRv=[];var bRK=function(bqQ,bh,bHM,bHN){if(!bqQ)return;byA.bJ(this.BH,"a-fadeInUp a-fadeInDown");if(!this.BH.firstElementChild){this.BH.innerHTML=bqQ;byA.bK(this.BH,"a-fadeInUp")}else if(byA.ey(this.BH,"a-fadeOutUp")){if(bRv.length){bRv.push(bqQ)}else{this.BH.innerHTML=bqQ;byA.bJ(this.BH,"a-fadeOutUp");byA.bK(this.BH,"a-fadeInDown")}}else{byA.bK(this.BH,"a-fadeOutUp");bRv.push(bqQ);window.clearTimeout(bRz);bRz=window.setTimeout(bRJ.byB(this),200)}if(bHM)bRA=window.setTimeout(bRI.byB(this),4e3);if(bHN){var fj=bHN==1?byA.bK:byA.bJ;bm.cj(this.bLs,function(bk){fj(bk,"z-dis")},this)}if(bh)this.bJK(bh)};var bRI=function(){if(!bRA)return;byA.bJ(this.BH,"a-fadeInUp a-fadeInDown");if(byA.ey(this.BH,"a-fadeOutUp")){this.BH.innerHTML="";byA.bJ(this.BH,"a-fadeInUp a-fadeInDown a-fadeOutUp")}else{byA.bK(this.BH,"a-fadeOutUp");window.setTimeout(bRI.byB(this),550)}};var bRJ=function(AK){var bqQ=bRv.shift();if(!!bqQ){byA.bJ(this.BH,"a-fadeInUp a-fadeInDown");if(!this.BH.firstElementChild){this.BH.innerHTML=bqQ;byA.bK(this.BH,"a-fadeInUp")}else if(byA.ey(this.BH,"a-fadeOutUp")){this.BH.innerHTML=bqQ;byA.bJ(this.BH,"a-fadeOutUp");byA.bK(this.BH,"a-fadeInDown")}else{byA.bK(this.BH,"a-fadeOutUp");bRv.unshift(bqQ)}window.clearTimeout(bRz);bRz=window.setTimeout(bRJ.byB(this),200)}};return function(bq,byy){if(!byy)return;window.clearTimeout(bRA);bRA=null;if(bq=="scan"){bRy=!1;var ds="",bh={cmd:"scanend"},bHM=!1;switch(byy.step){case 0:break;case 1:ds=!!byy.first?bWN:bRL;bh={cmd:"scanstart"};break;case 2:case 3:ds=!!byy.first?bWN:bRL;break;case 4:bHM=!0;var dN=!!byy.first?"更新完成":"更新完成"+(byy.newCount?"，新增"+byy.newCount+"首":"");ds='<span class="icn icn-ok"><svg><use xlink:href="orpheus://orpheus/style/res/svg/icon.sp.svg#local_ok"></use></svg></span><span class="s-fc3">'+dN+"</span>";break}bRK.call(this,ds,bh,bHM)}else{var ds="",bh="",bHM=!1,bHN=0;switch(byy.state){case 0:bRy=!1;break;case 1:if(bRy){var bk=byA.cg("id-local-discern-tip"),bHz=byA.cg("id-local-discern-tip2");if(bk&&bHz){bk.innerText=byy.count+"/"+byy.total;bHz.style.width=byy.count*100/byy.total+"%"}}else{bRy=!0;ds='<span class="icn icn-scan"><svg><use xlink:href="orpheus://orpheus/style/res/svg/icon.sp.svg#btn_scan"></use></svg></span><span class="s-fc3">正在匹配 <span id="id-local-discern-tip">'+byy.count+"/"+byy.total+'</span></span><div class="u-probar sep"><div id="id-local-discern-tip2" class="pro" style="width:'+byy.count*100/byy.total+'%"></div></div>';bh={cmd:"discernstart"};bHN=1}break;case 2:var dN="匹配完成"+(byy.succe>0?"，本次成功匹配"+byy.succe+"首":"");ds='<span class="icn icn-ok"><svg><use xlink:href="orpheus://orpheus/style/res/svg/icon.sp.svg#local_ok"></use></svg></span><span class="s-fc3">'+dN+"</span>";bh={cmd:"discernend"};bHM=!0;bHN=2;bRy=!1;break}bRK.call(this,ds,bh,bHM,bHN)}}}();byx.ei=function(byy){var bv=bi.cR(byy,"d:action");if(!bv)return;switch(byA.bT(bv,"action")){case"folder":this.cDI();break;case"redirect":bi.bQd(byy);if(this.bKL)byA.bJ(this.bKL,"z-sel");byA.bK(bv,"z-sel");this.bKL=bv;var bIh=byA.bT(bv,"logType");nm.log.dE("tab",null,null,{type:bIh,source:"local"});dispatcher.dr(byA.bT(bv,"id"));break;case"fold":if(byy.srcElement.tagName=="A")break;bi.bQd(byy);var dY=byA.bT(bv,"resData"),bv=bv.parentNode,bhi=!1;if(byA.ey(bv,"expand")){byA.bJ(bv,"expand");bj.cVV(bv.firstElementChild.firstElementChild,"icon.sp.svg#tree_fold")}else{byA.bK(bv,"expand");bj.cVV(bv.firstElementChild.firstElementChild,"icon.sp.svg#tree_unfold");bhi=!0}bj.gM("/m/local/folder/",{cmd:"setfoldexpand",path:dY,expand:bhi});break;case"closetip":byA.lG(this.bJn);break}};byx.brj=function(byy){bj.cL(11,function(cJN){return cJN.Mm(byy.list)});!!this.ZY&&this.ZY.bQ(this.ZY)};byx.bQM=function(){this.bJK({cmd:"beforescan"})};byx.hA=function(){var bJt=!1,di=0;return function(byy){if(!byy||!byy.data)return;switch(byy.data.cmd||byy.data.type){case"updatescanprogress":this.tU("scan",bj.cL(4,function(cJN){return cJN.BU()}));break;case"resize":this.bJK({cmd:"resize",windowEvent:byy});break;case"resizeEnd":this.bJK({cmd:"resizeEnd",windowEvent:byy});break;case"restore":this.bJK({cmd:"restore",windowEvent:byy});break;case"maximize":this.bJK({cmd:"maximize",windowEvent:byy});break;case"readzero":this.bJK({cmd:"emptychange",empty:bJt});break;case"setzero":di=Math.max(byy.data.total||0,0);this.bQF.innerText=di;if(bJt&&di!=0||!bJt&&di==0){bJt=!di;this.bQH(bJt);this.bJK({cmd:"emptychange",empty:bJt})}break;case"readtotal":byy.data.total=di;break;case"scannewcount":this.bQF.innerText=byy.data.total;break}}}();byx.bQH=function(bJt){logger.log(bJt,"local/home/index.js","__checkZero");if(bJt){byA.bJ(this.bOa,"f-dn");byA.bK(this.baA,"f-dn");byA.lG(this.bJn)}else{byA.bJ(this.baA,"f-dn");byA.bK(this.bOa,"f-dn")}};byx.JT=function(){var byy=bj.cL(4,function(cJN){return cJN.BU()});if(!!byy&&byy.step!=4&&byy.step!=0){this.tU("scan",byy)}};byx.cDI=function(){byA.lG(this.bJn);var cq=bj.cL(11,function(cJN){return cJN.fF()});var rn=cq.localdir;!!this.ZY&&this.ZY.bQ(this.ZY);this.ZY=bR.ZH.bG({type:"local",list:rn,clazz:"m-localfolder",onok:this.brj.byB(this)}).dD()};byx.bxW=function(){this.bJn=byA.xQ(byA.gy("m-xwgt-folder-select-list-guide"));this.bRp.parentNode.appendChild(this.bJn)};byx.VV=function(byy){byA.lG(this.bJn)};bj.cU("/m/local",bC.bNZ)})()</textarea>
<meta charset="utf-8"/> <textarea name="txt" id="m-mmobc-module"> <div class="cnt cnt-4"> <p class="stip f-dn j-flag">为了安全，我们会向你的手机发送短信校验码</p> <div class="iptwrap-sigle"> <div class="itm itm-phone"> <input class="j-flag" type="text" placeholder="请输入手机号"> </div> </div> <div class="capt f-mgt10"> <div class="iptwrap-sigle"> <div class="itm itm-capt"> <input class="j-flag" type="text" placeholder="填写验证码"> </div> </div> <a href="javascript:void(0);" class="btn btn-dark j-flag">获取验证码</a> </div> <div class="err err-div f-thide2 j-flag"></div> <div class="btnwrap"> <a href="javascript:void(0);" class="btn btn-dark j-flag">下一步</a> </div> <div class="jump-div"> <a class="j-flag">跳过</a> </div> </div> </textarea> <textarea name="js">(function(){var byz=NEJ.P,cJO=NEJ.O,byA=byz("nej.e"),bm=byz("nej.u"),bD=byz("nej.cef"),bj=byz("nm.x"),bp=byz("nm.d"),bY=byz("nm.m"),bC=byz("nm.m.i"),byx,byD;bC.bSG=NEJ.C();byx=bC.bSG.bS(bY.cW);byx.byG=function(){this.bCU="m-mmobc";this.dg();var bg=byA.bV(this.bA,"j-flag");this.bSH=bg.shift();this.Ex=bg.shift();this.oo=bg.shift();this.bAu=bg.shift();this.gh=bg.shift();this.yt=bg.shift();this.bvD=bg.shift()};byx.byT=function(blZ){this.dO([[this.Ex,"click",this.jp.byB(this,1)],[this.oo,"click",this.jp.byB(this,2)],[this.Ex,"keypress",this.hE.byB(this)],[this.oo,"keypress",this.hE.byB(this)],[this.bAu,"click",this.bca.byB(this)],[this.yt,"click",this.sm.byB(this)],[this.bvD,"click",this.bTb.byB(this)]]);document.mbody.className="n-login n-login-phone";this.bxg();this.cmx(blZ)};byx.dq=function(blZ){this.dC(blZ);var bP=blZ.param||cJO,dM=blZ.input||cJO;this.mA=bP.mobile||dM.mobile||"";this.it=bP.password||dM.password;this.gH=bP.from||dM.from;this.bW=bP.data||dM.data;this.TX("获取验证码");if(this.mA){this.Ex.value=this.mA;this.oo.focus();byA.bK(this.Ex.parentNode.parentNode,"f-dn");byA.bJ(this.bSH,"f-dn");this.bca()}else{this.Ex.focus();byA.bJ(this.Ex.parentNode.parentNode,"f-dn");byA.bK(this.bSH,"f-dn")}if(this.gH=="forget"){this.yt.innerText="完成"}else{this.yt.innerText="下一步"}if(this.gH=="sns"){byA.bJ(this.bvD,"f-dn");byA.bEq(this.bA,"cnt-3","cnt-2")}else{byA.bK(this.bvD,"f-dn");byA.bEq(this.bA,"cnt-2","cnt-3")}};byx.eR=function(){this.bxg();this.byU()};byx.hE=function(byy){if(byy&&byy.keyCode!=13)return;this.sm()};byx.bca=function(byy){if(!!this.zy)return;var iI=this.vD();if(!iI)return;this.OA();bj.cHN(iI,this.ciQ.byB(this))};byx.ciQ=function(bn){var cE=bn.code;if(cE!=200){var cT="验证码获取失败";if(bn.message=="发送验证码超过限制:每个手机号一天只能发5条验证码"){cT="验证码已超过每日5个的最大上限"}else if(bn.message){cT=bn.message}this.dm(2,cT)}};byx.OA=function(){byA.bK(this.bAu,"z-dis");this.zy=true;var cV=60;this.vw=setInterval(function(){cV--;this.bAu.innerText="00:"+(cV>=10?cV:"0"+cV);if(cV<=0){this.TX("重新获取")}}.byB(this),1e3)};byx.TX=function(dN){this.vw=clearInterval(this.vw);byA.bJ(this.bAu,"z-dis");this.bAu.innerText=dN||"获取验证码";this.zy=false};byx.bTb=function(){localCache.bSX("tempHost",this.bW);var hy=this.bW.snsnickname||"";location.href="#/m/nickname/?from=sns&nickname="+hy};byx.sm=function(){var iI=this.vD();if(!iI)return;var qU=this.KG();if(!qU)return;if(this.gH=="regist"||this.gH=="forget"){ctl.host.cRS({phone:iI,password:this.it,captcha:qU},this.ckH.byB(this))}else if(this.gH=="sns"){bj.cGI(iI,qU,"",this.cIt.byB(this))}};byx.cIt=function(bn){switch((bn||cJO).code){case 200:this.bTb();break;case 503:this.dm(2,"验证码错误");break;case 506:this.dm(2,bn.message||"该手机号已与云音乐帐号["+bn.bindingNickname+"]绑定");break;default:this.dm(3,bn.message||"绑定失败，请稍后再试");break}};byx.ckH=function(bn){switch((bn||cJO).code){case 200:if(bn.account){bn.account.remember=!0}if(!!bn.profile&&!!bn.profile.userId){if(this.gH=="regist"){dispatcher.dr("/m/message/",{input:{from:"regist_504",data:bn}})}else{ctl.host.bFK(bn,{remember:!!(bn||{}).remember});bD.uD()}}else{localCache.bSX("tempHost",bn);var hy=bn.snsnickname||"";location.href="#/m/nickname/?from="+(this.gH=="forget"?"mobile":"sns")+"&nickname="+hy}break;case 503:this.dm(2,"验证码错误");break;case 504:this.dm(3,bn.message||"手机号已经被注册");break;default:this.dm(3,bn.message||(this.gH=="forget"?"重置密码失败，请稍后再试":"注册失败，请稍后再试"));break}};byx.vD=function(){var dM=this.Ex,iI=dM.value.trim();var If=bj.cRz(iI);if(!If){this.dm(1,"请输入正确的手机号码");return}return iI};byx.KG=function(){var dM=this.oo,qU=dM.value.trim();if(!qU){this.dm(2,"请输入验证码");return}return qU};byx.jp=function(bq){if(this.lY==bq)bj.iY(this.gh)};byx.bxg=function(bq){this.Ex.value="";this.oo.value="";if(!this.vw)this.bAu.innerText="获取验证码";bj.iY(this.gh)};byx.dm=function(bq,fz){this.lY=bq;bj.iY(this.gh,fz)};bj.cU("/m/login/captcha/",bC.bSG)})()</textarea>
<meta charset="utf-8"/> <textarea name="txt" id="m-inkn-module"> <div class="cnt cnt-4"> <p class="stip f-tc j-flag">该手机号尚未注册，取个昵称马上开通</p> <div class="iptwrap-sigle"> <div class="itm itm-nick"> <input class="j-flag" type="text" placeholder="昵称不少于4个英文或2个汉字"> </div> </div> <div class="err err-div f-thide2 j-flag"></div> <div class="btnwrap"> <a href="javascript:void(0);" class="btn btn-dark j-flag">开启云音乐</a> </div> </div> </textarea> <textarea name="js">(function(){var byz=NEJ.P,byA=byz("nej.e"),bm=byz("nej.u"),bj=byz("nm.x"),bp=byz("nm.d"),bTG=byz("nm.c"),bY=byz("nm.m"),bC=byz("nm.m.i"),byx,byD;bC.XQ=NEJ.C();byx=bC.XQ.bS(bY.cW);byx.byG=function(){this.bCU="m-inkn";this.dg();var bg=byA.bV(this.bA,"j-flag");this.jJ=bg[0];this.jA=bg[1];this.HU=bg[2];this.wI=bg[3]};byx.byT=function(blZ){this.dO([[this.jA,"focus",this.jp.byB(this,2)],[this.jA,"keypress",this.hE.byB(this)],[this.wI,"click",this.XS.byB(this)]]);this.cmx(blZ);document.mbody.className="n-login n-login-reg";this.bxg();this.jA.focus()};byx.dq=function(blZ){var bP=blZ.param;this.gH=bP.from;this.bmn=bP.pwd||"";if(this.gH=="mobile"){this.jJ.innerText="该手机号尚未注册，取个昵称马上开通";byA.bEq(this.bA,"cnt-3","cnt-4")}else{this.jJ.innerText="取一个昵称，让大家记住您";byA.bEq(this.bA,"cnt-4","cnt-3")}this.jA.value=bP.nickname||"";this.dC(blZ)};byx.eR=function(){this.bxg();this.byU()};byx.hE=function(byy){if(byy&&byy.keyCode!=13)return;this.XS()};byx.bxg=function(){this.jA.value="";bj.iY(this.HU)};byx.XS=function(){var hy;if(!(hy=this.vA()))return;this.nV(true);var bh={nickname:hy};if(this.gH=="mobile")bh.password=this.bmn;var ccy=ctl.host.cdy();if(ccy){bh.anoniToken=ccy}ctl.host.bpt(bh,this.bml.byB(this))};byx.vA=function(){var dM=this.jA,hy=dM.value.trim(),nZ=bm.rV(hy);if(nZ==0){this.dm(2,"请输入昵称");return}if(nZ<4||nZ>30){this.dm(2,"昵称为4-30个字，且不包含除-和_以外的特殊字符");return}if(!/^[\u4e00-\u9fa5A-Za-z0-9-_]*$/.test(hy)){this.dm(2,"昵称为4-30个字，且不包含除-和_以外的特殊字符");return}return hy};byx.bml=function(bn){var cE=bn.code;this.nV(false);if(cE==200){var hr=localCache.cg("tempHost");NEJ.X(hr,bn);if(!!hr.snsnickname&&!!hr.account){hr.account.snsnickname=hr.snsnickname}ctl.host.bFK(hr,{remember:!!(hr.account||{}).remember});nej.cef.uD()}else if(cE==408){this.dm(2,"用户已初始化")}else if(cE==505){this.dm(2,"该昵称已被占用")}else if(cE==407){this.dm(2,"昵称包含敏感字符")}else{if(bn.message&&cE>0){this.dm(2,bn.message)}else{this.dm(2,"错误["+cE+"]")}}};byx.nV=function(bq){if(typeof bq=="undefined"||bq){byA.bK(this.wI,"z-dis")}else{byA.bJ(this.wI,"z-dis")}};byx.jp=function(bq){if(this.lY==bq)bj.iY(this.HU)};byx.dm=function(bq,fz){this.lY=bq;bj.iY(this.HU,fz)};bj.cU("/m/nickname/",bC.XQ)})()</textarea>